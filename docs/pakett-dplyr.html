<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Peatükk 32 Pakett dplyr | Kvantitatiivne andmeanalüüs</title>
  <meta name="description" content="Peatükk 32 Pakett dplyr | Kvantitatiivne andmeanalüüs" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Peatükk 32 Pakett dplyr | Kvantitatiivne andmeanalüüs" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Peatükk 32 Pakett dplyr | Kvantitatiivne andmeanalüüs" />
  
  
  

<meta name="author" content="Marko Sõmer" />


<meta name="date" content="2022-02-18" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="tabelid.html"/>
<link rel="next" href="andmete-ühendamine.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Kvant II</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Sissejuhatus</a></li>
<li class="chapter" data-level="2" data-path="sissejuhatus-r-i.html"><a href="sissejuhatus-r-i.html"><i class="fa fa-check"></i><b>2</b> Sissejuhatus R-i</a></li>
<li class="chapter" data-level="3" data-path="mis-see-r-on.html"><a href="mis-see-r-on.html"><i class="fa fa-check"></i><b>3</b> Mis see R on?</a></li>
<li class="chapter" data-level="4" data-path="miks-r.html"><a href="miks-r.html"><i class="fa fa-check"></i><b>4</b> Miks R?</a></li>
<li class="chapter" data-level="5" data-path="mida-ri-kasutamiseks-vaja-on.html"><a href="mida-ri-kasutamiseks-vaja-on.html"><i class="fa fa-check"></i><b>5</b> Mida R’i kasutamiseks vaja on?</a></li>
<li class="chapter" data-level="6" data-path="kuidas-ri-ja-rstudiot-kasutada.html"><a href="kuidas-ri-ja-rstudiot-kasutada.html"><i class="fa fa-check"></i><b>6</b> Kuidas R’i ja RStudiot kasutada?</a></li>
<li class="chapter" data-level="7" data-path="r-kui-kalkulaator.html"><a href="r-kui-kalkulaator.html"><i class="fa fa-check"></i><b>7</b> R kui kalkulaator</a></li>
<li class="chapter" data-level="8" data-path="loogilised-tehted.html"><a href="loogilised-tehted.html"><i class="fa fa-check"></i><b>8</b> Loogilised tehted</a></li>
<li class="chapter" data-level="9" data-path="andmeobjektid.html"><a href="andmeobjektid.html"><i class="fa fa-check"></i><b>9</b> Andmeobjektid</a>
<ul>
<li class="chapter" data-level="9.1" data-path="andmeobjektid.html"><a href="andmeobjektid.html#loogilised-andmed-true-või-false"><i class="fa fa-check"></i><b>9.1</b> Loogilised andmed (TRUE või FALSE)</a></li>
<li class="chapter" data-level="9.2" data-path="andmeobjektid.html"><a href="andmeobjektid.html#puuduvad-väärtused"><i class="fa fa-check"></i><b>9.2</b> Puuduvad väärtused</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="ülesanne.html"><a href="ülesanne.html"><i class="fa fa-check"></i><b>10</b> Ülesanne</a></li>
<li class="chapter" data-level="11" data-path="funktsioonid.html"><a href="funktsioonid.html"><i class="fa fa-check"></i><b>11</b> Funktsioonid</a></li>
<li class="chapter" data-level="12" data-path="kuidas-abi-saada.html"><a href="kuidas-abi-saada.html"><i class="fa fa-check"></i><b>12</b> Kuidas abi saada?</a></li>
<li class="chapter" data-level="13" data-path="vektorid.html"><a href="vektorid.html"><i class="fa fa-check"></i><b>13</b> Vektorid</a>
<ul>
<li class="chapter" data-level="13.1" data-path="vektorid.html"><a href="vektorid.html#indekseerimine"><i class="fa fa-check"></i><b>13.1</b> Indekseerimine</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="ülesanne-1.html"><a href="ülesanne-1.html"><i class="fa fa-check"></i><b>14</b> Ülesanne</a></li>
<li class="chapter" data-level="15" data-path="maatriksid.html"><a href="maatriksid.html"><i class="fa fa-check"></i><b>15</b> Maatriksid</a></li>
<li class="chapter" data-level="16" data-path="andmeobjektide-klassid.html"><a href="andmeobjektide-klassid.html"><i class="fa fa-check"></i><b>16</b> Andmeobjektide klassid</a></li>
<li class="chapter" data-level="17" data-path="ülesanne-2.html"><a href="ülesanne-2.html"><i class="fa fa-check"></i><b>17</b> Ülesanne</a></li>
<li class="chapter" data-level="18" data-path="data-frame-andmestik.html"><a href="data-frame-andmestik.html"><i class="fa fa-check"></i><b>18</b> Data frame (andmestik)</a></li>
<li class="chapter" data-level="19" data-path="ülesanne-3.html"><a href="ülesanne-3.html"><i class="fa fa-check"></i><b>19</b> Ülesanne</a></li>
<li class="chapter" data-level="20" data-path="data-framei-modifitseerimine.html"><a href="data-framei-modifitseerimine.html"><i class="fa fa-check"></i><b>20</b> Data frame’i modifitseerimine</a></li>
<li class="chapter" data-level="21" data-path="ülesanne-4.html"><a href="ülesanne-4.html"><i class="fa fa-check"></i><b>21</b> Ülesanne</a></li>
<li class="chapter" data-level="22" data-path="faktorid.html"><a href="faktorid.html"><i class="fa fa-check"></i><b>22</b> Faktorid</a></li>
<li class="chapter" data-level="23" data-path="ülesanne-5.html"><a href="ülesanne-5.html"><i class="fa fa-check"></i><b>23</b> Ülesanne</a></li>
<li class="chapter" data-level="24" data-path="andmeobjektide-kustutamine.html"><a href="andmeobjektide-kustutamine.html"><i class="fa fa-check"></i><b>24</b> Andmeobjektide kustutamine</a></li>
<li class="chapter" data-level="25" data-path="ri-paketid.html"><a href="ri-paketid.html"><i class="fa fa-check"></i><b>25</b> R’i paketid</a></li>
<li class="chapter" data-level="26" data-path="andmete-sisselugemine.html"><a href="andmete-sisselugemine.html"><i class="fa fa-check"></i><b>26</b> Andmete sisselugemine</a></li>
<li class="chapter" data-level="27" data-path="andmete-salvestamine.html"><a href="andmete-salvestamine.html"><i class="fa fa-check"></i><b>27</b> Andmete salvestamine</a></li>
<li class="chapter" data-level="28" data-path="andestikust-ülevaate-saamine.html"><a href="andestikust-ülevaate-saamine.html"><i class="fa fa-check"></i><b>28</b> Andestikust ülevaate saamine</a></li>
<li class="chapter" data-level="29" data-path="kirjeldav-statistika.html"><a href="kirjeldav-statistika.html"><i class="fa fa-check"></i><b>29</b> Kirjeldav statistika</a></li>
<li class="chapter" data-level="30" data-path="ülesanne-6.html"><a href="ülesanne-6.html"><i class="fa fa-check"></i><b>30</b> Ülesanne</a></li>
<li class="chapter" data-level="31" data-path="tabelid.html"><a href="tabelid.html"><i class="fa fa-check"></i><b>31</b> Tabelid</a></li>
<li class="chapter" data-level="32" data-path="pakett-dplyr.html"><a href="pakett-dplyr.html"><i class="fa fa-check"></i><b>32</b> Pakett dplyr</a>
<ul>
<li class="chapter" data-level="32.1" data-path="pakett-dplyr.html"><a href="pakett-dplyr.html#dplyr-filter"><i class="fa fa-check"></i><b>32.1</b> dplyr: filter</a></li>
<li class="chapter" data-level="32.2" data-path="pakett-dplyr.html"><a href="pakett-dplyr.html#dplyr-select"><i class="fa fa-check"></i><b>32.2</b> dplyr: select</a></li>
<li class="chapter" data-level="32.3" data-path="pakett-dplyr.html"><a href="pakett-dplyr.html#dplyr-arrange"><i class="fa fa-check"></i><b>32.3</b> dplyr: arrange</a></li>
<li class="chapter" data-level="32.4" data-path="pakett-dplyr.html"><a href="pakett-dplyr.html#dplyr-mutate"><i class="fa fa-check"></i><b>32.4</b> dplyr: mutate</a></li>
<li class="chapter" data-level="32.5" data-path="pakett-dplyr.html"><a href="pakett-dplyr.html#dplyr-summarise"><i class="fa fa-check"></i><b>32.5</b> dplyr: summarise</a></li>
<li class="chapter" data-level="32.6" data-path="pakett-dplyr.html"><a href="pakett-dplyr.html#dplyr-group_by"><i class="fa fa-check"></i><b>32.6</b> dplyr: group_by</a></li>
<li class="chapter" data-level="32.7" data-path="pakett-dplyr.html"><a href="pakett-dplyr.html#dplyr-piping"><i class="fa fa-check"></i><b>32.7</b> dplyr: piping</a></li>
<li class="chapter" data-level="32.8" data-path="pakett-dplyr.html"><a href="pakett-dplyr.html#veel-mõned-kasulikud-funktsioonid"><i class="fa fa-check"></i><b>32.8</b> Veel mõned kasulikud funktsioonid</a></li>
</ul></li>
<li class="chapter" data-level="33" data-path="andmete-ühendamine.html"><a href="andmete-ühendamine.html"><i class="fa fa-check"></i><b>33</b> Andmete ühendamine</a></li>
<li class="chapter" data-level="34" data-path="andmestiku-kuju-muutmine.html"><a href="andmestiku-kuju-muutmine.html"><i class="fa fa-check"></i><b>34</b> Andmestiku kuju muutmine</a></li>
<li class="chapter" data-level="35" data-path="kuupäevad.html"><a href="kuupäevad.html"><i class="fa fa-check"></i><b>35</b> Kuupäevad</a></li>
<li class="chapter" data-level="36" data-path="tekstilised-tunnused.html"><a href="tekstilised-tunnused.html"><i class="fa fa-check"></i><b>36</b> Tekstilised tunnused</a></li>
<li class="chapter" data-level="37" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>37</b> R markdown</a></li>
<li class="chapter" data-level="38" data-path="andmegraafika-põhimõtted.html"><a href="andmegraafika-põhimõtted.html"><i class="fa fa-check"></i><b>38</b> Andmegraafika põhimõtted</a></li>
<li class="chapter" data-level="39" data-path="ri-baasgraafikud.html"><a href="ri-baasgraafikud.html"><i class="fa fa-check"></i><b>39</b> R’i baasgraafikud</a>
<ul>
<li class="chapter" data-level="39.1" data-path="ri-baasgraafikud.html"><a href="ri-baasgraafikud.html#scatterplot"><i class="fa fa-check"></i><b>39.1</b> Scatterplot</a></li>
<li class="chapter" data-level="39.2" data-path="ri-baasgraafikud.html"><a href="ri-baasgraafikud.html#histogram"><i class="fa fa-check"></i><b>39.2</b> Histogram</a></li>
<li class="chapter" data-level="39.3" data-path="ri-baasgraafikud.html"><a href="ri-baasgraafikud.html#boxplot"><i class="fa fa-check"></i><b>39.3</b> Boxplot</a></li>
<li class="chapter" data-level="39.4" data-path="ri-baasgraafikud.html"><a href="ri-baasgraafikud.html#barplot"><i class="fa fa-check"></i><b>39.4</b> Barplot</a></li>
<li class="chapter" data-level="39.5" data-path="ri-baasgraafikud.html"><a href="ri-baasgraafikud.html#baasgraafikute-parameetrid"><i class="fa fa-check"></i><b>39.5</b> Baasgraafikute parameetrid</a></li>
<li class="chapter" data-level="39.6" data-path="ri-baasgraafikud.html"><a href="ri-baasgraafikud.html#baasgraafikute-ehitamine"><i class="fa fa-check"></i><b>39.6</b> Baasgraafikute ehitamine</a></li>
</ul></li>
<li class="chapter" data-level="40" data-path="ggplot2.html"><a href="ggplot2.html"><i class="fa fa-check"></i><b>40</b> ggplot2</a>
<ul>
<li class="chapter" data-level="40.1" data-path="ggplot2.html"><a href="ggplot2.html#ggploti-elemendid"><i class="fa fa-check"></i><b>40.1</b> ggploti elemendid</a></li>
<li class="chapter" data-level="40.2" data-path="ggplot2.html"><a href="ggplot2.html#scatterplot-1"><i class="fa fa-check"></i><b>40.2</b> Scatterplot</a></li>
<li class="chapter" data-level="40.3" data-path="ggplot2.html"><a href="ggplot2.html#facetid"><i class="fa fa-check"></i><b>40.3</b> Facetid</a></li>
<li class="chapter" data-level="40.4" data-path="ggplot2.html"><a href="ggplot2.html#geomid-ja-aestetikud"><i class="fa fa-check"></i><b>40.4</b> Geomid ja aestetikud</a></li>
<li class="chapter" data-level="40.5" data-path="ggplot2.html"><a href="ggplot2.html#barplot-1"><i class="fa fa-check"></i><b>40.5</b> Barplot</a></li>
<li class="chapter" data-level="40.6" data-path="ggplot2.html"><a href="ggplot2.html#boxplot-ja-violin-plot"><i class="fa fa-check"></i><b>40.6</b> Boxplot ja violin plot</a></li>
<li class="chapter" data-level="40.7" data-path="ggplot2.html"><a href="ggplot2.html#histogram-ja-frequency-polygon"><i class="fa fa-check"></i><b>40.7</b> Histogram ja frequency polygon</a></li>
<li class="chapter" data-level="40.8" data-path="ggplot2.html"><a href="ggplot2.html#keskmised-ja-usalduspiirid"><i class="fa fa-check"></i><b>40.8</b> Keskmised ja usalduspiirid</a></li>
<li class="chapter" data-level="40.9" data-path="ggplot2.html"><a href="ggplot2.html#joonise-disain"><i class="fa fa-check"></i><b>40.9</b> Joonise disain</a></li>
</ul></li>
<li class="chapter" data-level="41" data-path="lugemiseks.html"><a href="lugemiseks.html"><i class="fa fa-check"></i><b>41</b> Lugemiseks</a></li>
<li class="chapter" data-level="42" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html"><i class="fa fa-check"></i><b>42</b> Lineaarne regressioon</a>
<ul>
<li class="chapter" data-level="42.1" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#lihtne-lineaarne-regressioon"><i class="fa fa-check"></i><b>42.1</b> Lihtne lineaarne regressioon</a></li>
<li class="chapter" data-level="42.2" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#regressioon-r-is"><i class="fa fa-check"></i><b>42.2</b> Regressioon R-is</a></li>
<li class="chapter" data-level="42.3" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#regressiooni-jäägid"><i class="fa fa-check"></i><b>42.3</b> Regressiooni jäägid</a></li>
<li class="chapter" data-level="42.4" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#regressioonimudeli-sobitumine"><i class="fa fa-check"></i><b>42.4</b> Regressioonimudeli sobitumine</a>
<ul>
<li class="chapter" data-level="42.4.1" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#jääkide-jaotus"><i class="fa fa-check"></i><b>42.4.1</b> Jääkide jaotus</a></li>
<li class="chapter" data-level="42.4.2" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#regressioonikoefitsiendid-ja-nende-olulisus"><i class="fa fa-check"></i><b>42.4.2</b> Regressioonikoefitsiendid ja nende olulisus</a></li>
<li class="chapter" data-level="42.4.3" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#jääkide-standardviga"><i class="fa fa-check"></i><b>42.4.3</b> Jääkide standardviga</a></li>
<li class="chapter" data-level="42.4.4" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#r-ruut"><i class="fa fa-check"></i><b>42.4.4</b> R ruut</a></li>
<li class="chapter" data-level="42.4.5" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#f-väärtus-ja-f-test"><i class="fa fa-check"></i><b>42.4.5</b> F-väärtus ja F-test</a></li>
</ul></li>
<li class="chapter" data-level="42.5" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#kategoriaalsed-tunnused-regressioonis"><i class="fa fa-check"></i><b>42.5</b> Kategoriaalsed tunnused regressioonis</a>
<ul>
<li class="chapter" data-level="42.5.1" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#üks-binaarne-sõltumatu-tunnus"><i class="fa fa-check"></i><b>42.5.1</b> Üks binaarne sõltumatu tunnus</a></li>
<li class="chapter" data-level="42.5.2" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#kolme-või-enama-kategooriaga-sõltumatu-tunnus"><i class="fa fa-check"></i><b>42.5.2</b> Kolme või enama kategooriaga sõltumatu tunnus</a></li>
</ul></li>
<li class="chapter" data-level="42.6" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#mitmene-regressioon"><i class="fa fa-check"></i><b>42.6</b> Mitmene regressioon</a>
<ul>
<li class="chapter" data-level="42.6.1" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#kaks-pidevat-sõltumatut-muutujat"><i class="fa fa-check"></i><b>42.6.1</b> Kaks pidevat sõltumatut muutujat</a></li>
</ul></li>
<li class="chapter" data-level="42.7" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#koosmõjud"><i class="fa fa-check"></i><b>42.7</b> Koosmõjud</a>
<ul>
<li class="chapter" data-level="42.7.1" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#koosmõjud-kategoriaalsete-tunnuste-puhul"><i class="fa fa-check"></i><b>42.7.1</b> Koosmõjud kategoriaalsete tunnuste puhul</a></li>
</ul></li>
<li class="chapter" data-level="42.8" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#mudelite-võrdlemine"><i class="fa fa-check"></i><b>42.8</b> Mudelite võrdlemine</a></li>
<li class="chapter" data-level="42.9" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#regressioonimudeli-eeldused"><i class="fa fa-check"></i><b>42.9</b> Regressioonimudeli eeldused</a></li>
<li class="chapter" data-level="42.10" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#kuidas-eelduste-täidetust-hinnata"><i class="fa fa-check"></i><b>42.10</b> Kuidas eelduste täidetust hinnata?</a></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#part-üldistatud-lineaarsed-mudelid"><i class="fa fa-check"></i>(PART) Üldistatud lineaarsed mudelid</a>
<ul>
<li class="chapter" data-level="42.11" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#šansid"><i class="fa fa-check"></i><b>42.11</b> Šansid</a></li>
<li class="chapter" data-level="42.12" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#logit"><i class="fa fa-check"></i><b>42.12</b> Logit</a></li>
<li class="chapter" data-level="42.13" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#logit-mudel"><i class="fa fa-check"></i><b>42.13</b> Logit mudel</a></li>
<li class="chapter" data-level="42.14" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#mudeli-tõlgendus"><i class="fa fa-check"></i><b>42.14</b> Mudeli tõlgendus</a>
<ul>
<li class="chapter" data-level="42.14.1" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#šansside-suhe"><i class="fa fa-check"></i><b>42.14.1</b> Šansside suhe</a></li>
</ul></li>
<li class="chapter" data-level="42.15" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#logistiline-regressioon-r-is"><i class="fa fa-check"></i><b>42.15</b> Logistiline regressioon R-is</a></li>
<li class="chapter" data-level="42.16" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#mudeli-kvaliteet"><i class="fa fa-check"></i><b>42.16</b> Mudeli kvaliteet</a>
<ul>
<li class="chapter" data-level="42.16.1" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#mudeli-sobivus"><i class="fa fa-check"></i><b>42.16.1</b> Mudeli sobivus</a></li>
<li class="chapter" data-level="42.16.2" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#mudeli-statistiline-olulisus"><i class="fa fa-check"></i><b>42.16.2</b> Mudeli statistiline olulisus</a></li>
<li class="chapter" data-level="42.16.3" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#pseudo-r2"><i class="fa fa-check"></i><b>42.16.3</b> Pseudo-<span class="math inline">\(R^2\)</span></a></li>
</ul></li>
<li class="chapter" data-level="42.17" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#predict"><i class="fa fa-check"></i><b>42.17</b> Predict</a>
<ul>
<li class="chapter" data-level="42.17.1" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#broom"><i class="fa fa-check"></i><b>42.17.1</b> Broom</a></li>
</ul></li>
<li class="chapter" data-level="42.18" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#marginaalsed-efektid"><i class="fa fa-check"></i><b>42.18</b> Marginaalsed efektid</a></li>
<li class="chapter" data-level="42.19" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#prognoosi-täpsus"><i class="fa fa-check"></i><b>42.19</b> Prognoosi täpsus</a></li>
</ul></li>
<li class="chapter" data-level="43" data-path="poissoni-regressioon.html"><a href="poissoni-regressioon.html"><i class="fa fa-check"></i><b>43</b> Poissoni regressioon</a>
<ul>
<li class="chapter" data-level="43.1" data-path="poissoni-regressioon.html"><a href="poissoni-regressioon.html#mudeli-tõlgendus-1"><i class="fa fa-check"></i><b>43.1</b> Mudeli tõlgendus</a></li>
<li class="chapter" data-level="43.2" data-path="poissoni-regressioon.html"><a href="poissoni-regressioon.html#poissoni-regressiooni-eeldused"><i class="fa fa-check"></i><b>43.2</b> Poissoni regressiooni eeldused</a></li>
<li class="chapter" data-level="43.3" data-path="poissoni-regressioon.html"><a href="poissoni-regressioon.html#mudeli-hindamine-r-is"><i class="fa fa-check"></i><b>43.3</b> Mudeli hindamine R-is</a>
<ul>
<li class="chapter" data-level="43.3.1" data-path="poissoni-regressioon.html"><a href="poissoni-regressioon.html#andmete-kirjeldus-ja-ettevalmistus"><i class="fa fa-check"></i><b>43.3.1</b> Andmete kirjeldus ja ettevalmistus</a></li>
<li class="chapter" data-level="43.3.2" data-path="poissoni-regressioon.html"><a href="poissoni-regressioon.html#poissoni-mudeli-defineerimine"><i class="fa fa-check"></i><b>43.3.2</b> Poissoni mudeli defineerimine</a></li>
</ul></li>
<li class="chapter" data-level="43.4" data-path="poissoni-regressioon.html"><a href="poissoni-regressioon.html#mudeli-eelduste-kontroll"><i class="fa fa-check"></i><b>43.4</b> Mudeli eelduste kontroll</a>
<ul>
<li class="chapter" data-level="43.4.1" data-path="poissoni-regressioon.html"><a href="poissoni-regressioon.html#üledispersioon"><i class="fa fa-check"></i><b>43.4.1</b> Üledispersioon</a></li>
</ul></li>
<li class="chapter" data-level="43.5" data-path="poissoni-regressioon.html"><a href="poissoni-regressioon.html#mudeli-sobivus-model-fit"><i class="fa fa-check"></i><b>43.5</b> Mudeli sobivus (<em>model fit</em>)</a>
<ul>
<li class="chapter" data-level="43.5.1" data-path="poissoni-regressioon.html"><a href="poissoni-regressioon.html#mudeli-statistiline-olulisus-1"><i class="fa fa-check"></i><b>43.5.1</b> Mudeli statistiline olulisus</a></li>
<li class="chapter" data-level="43.5.2" data-path="poissoni-regressioon.html"><a href="poissoni-regressioon.html#jääkide-jaotus-1"><i class="fa fa-check"></i><b>43.5.2</b> Jääkide jaotus</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="viited.html"><a href="viited.html"><i class="fa fa-check"></i>Viited</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Kvantitatiivne andmeanalüüs</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="pakett-dplyr" class="section level1" number="32">
<h1><span class="header-section-number">Peatükk 32</span> Pakett dplyr</h1>
<p><em>Dplyr</em> on väga funktsionaalne pakett data.frame’is olevate andmete töötlemiseks, kirjeldamiseks ja transformeerimiseks.<br />
Praktiliselt kogu andmetöötluse saab <em>dplyr</em>’i abil ära teha.<br />
<em>Dplyr</em> põhineb viiel peamisel funktsioonil:<br />
- <code>filter()</code> - vaatluste filtreerimine mingite kriteeriumite alusel<br />
- <code>select()</code> - tunnuste valimine<br />
- <code>arrange()</code> - andmete järjestamine mingi tunnuse põhjal<br />
- <code>mutate()</code> - uue tunnuse tegemine<br />
- <code>summarise()</code> - tunnuste summeerimine</p>
<p>Lisaks veel funktsioon <code>group_by()</code>, millega saab andmestiku mingi tunnuse alusel gruppideks jaotada ja siis igale grupile näiteks summarise() funktsiooni rakendada.</p>
<p>Kõigepealt installime ja laadime dplyr’i ja ühe näidisandmestiku</p>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="pakett-dplyr.html#cb208-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;dplyr&quot;</span>)</span>
<span id="cb208-2"><a href="pakett-dplyr.html#cb208-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;nycflights13&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="pakett-dplyr.html#cb209-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code></pre></div>
<pre><code>## 
## Attaching package: &#39;dplyr&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     filter, lag</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     intersect, setdiff, setequal, union</code></pre>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="pakett-dplyr.html#cb213-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(nycflights13)</span></code></pre></div>
<p>Salvestame paketist <em>nycflights13</em> andmestiku <em>flights</em> käepärasema nimega :</p>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="pakett-dplyr.html#cb214-1" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> flights</span></code></pre></div>
<p>Vaatame, mis andmestikuga tegu on</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="pakett-dplyr.html#cb215-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dat)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 19
##    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
## 1  2013     1     1      517            515         2      830            819
## 2  2013     1     1      533            529         4      850            830
## 3  2013     1     1      542            540         2      923            850
## 4  2013     1     1      544            545        -1     1004           1022
## 5  2013     1     1      554            600        -6      812            837
## 6  2013     1     1      554            558        -4      740            728
## # ... with 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
## #   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
## #   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="pakett-dplyr.html#cb217-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(dat)</span></code></pre></div>
<pre><code>##  [1] &quot;year&quot;           &quot;month&quot;          &quot;day&quot;            &quot;dep_time&quot;      
##  [5] &quot;sched_dep_time&quot; &quot;dep_delay&quot;      &quot;arr_time&quot;       &quot;sched_arr_time&quot;
##  [9] &quot;arr_delay&quot;      &quot;carrier&quot;        &quot;flight&quot;         &quot;tailnum&quot;       
## [13] &quot;origin&quot;         &quot;dest&quot;           &quot;air_time&quot;       &quot;distance&quot;      
## [17] &quot;hour&quot;           &quot;minute&quot;         &quot;time_hour&quot;</code></pre>
<div id="dplyr-filter" class="section level2" number="32.1">
<h2><span class="header-section-number">32.1</span> dplyr: filter</h2>
<p>Valime ainult need vaatlused, kus lennufirmaks on AA (tunnus <em>carrier</em>) ja mis toimusid jaanuari- või veebruarikuus (<em>dplyr</em>’i funktsioonides on andmestik alati esimeseks argumeniks)</p>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="pakett-dplyr.html#cb219-1" aria-hidden="true" tabindex="-1"></a>dat.aa <span class="ot">&lt;-</span> <span class="fu">filter</span>(dat, carrier<span class="sc">==</span><span class="st">&quot;AA&quot;</span> <span class="sc">&amp;</span> (month<span class="sc">==</span><span class="dv">1</span> <span class="sc">|</span> month<span class="sc">==</span><span class="dv">2</span>))</span>
<span id="cb219-2"><a href="pakett-dplyr.html#cb219-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(dat.aa<span class="sc">$</span>month)</span></code></pre></div>
<pre><code>## 
##    1    2 
## 2794 2517</code></pre>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="pakett-dplyr.html#cb221-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(dat.aa<span class="sc">$</span>carrier)</span></code></pre></div>
<pre><code>## 
##   AA 
## 5311</code></pre>
</div>
<div id="dplyr-select" class="section level2" number="32.2">
<h2><span class="header-section-number">32.2</span> dplyr: select</h2>
<p>Valime <em>dat.aa</em> andmestikust tunnused <em>month</em>, <em>arr_delay</em> ja <em>tailnum</em></p>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="pakett-dplyr.html#cb223-1" aria-hidden="true" tabindex="-1"></a>dat.aa1 <span class="ot">&lt;-</span> <span class="fu">select</span>(dat.aa, month, arr_delay, tailnum)</span>
<span id="cb223-2"><a href="pakett-dplyr.html#cb223-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dat.aa1)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##   month arr_delay tailnum
##   &lt;int&gt;     &lt;dbl&gt; &lt;chr&gt;  
## 1     1        33 N619AA 
## 2     1         8 N3ALAA 
## 3     1        31 N3DUAA 
## 4     1       -12 N633AA 
## 5     1         5 N3EMAA 
## 6     1        -3 N3BAAA</code></pre>
<p>Küllaltki kasulikud on <code>select()</code>’i lisavõimalused, mis lasevad valida tunnuseid vastavalt sellele, mis tähekombinatsiooniga tunnusenimi algab, lõpeb või mida sisaldab (täpsemalt vaata <code>select()</code> helpi).</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="pakett-dplyr.html#cb225-1" aria-hidden="true" tabindex="-1"></a>dat.aa2 <span class="ot">&lt;-</span> <span class="fu">select</span>(dat.aa, <span class="fu">contains</span>(<span class="st">&quot;arr&quot;</span>))</span></code></pre></div>
</div>
<div id="dplyr-arrange" class="section level2" number="32.3">
<h2><span class="header-section-number">32.3</span> dplyr: arrange</h2>
<p>Järjestame <em>dat.aa1</em> andmedtiku <em>arr_delay</em> tunnuse järgi</p>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb226-1"><a href="pakett-dplyr.html#cb226-1" aria-hidden="true" tabindex="-1"></a>dat.aa1 <span class="ot">&lt;-</span> <span class="fu">arrange</span>(dat.aa1, arr_delay)</span>
<span id="cb226-2"><a href="pakett-dplyr.html#cb226-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dat.aa1)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##   month arr_delay tailnum
##   &lt;int&gt;     &lt;dbl&gt; &lt;chr&gt;  
## 1     2       -69 N3EAAA 
## 2     2       -65 N320AA 
## 3     2       -60 N3FAAA 
## 4     1       -54 N335AA 
## 5     2       -54 N4UBAA 
## 6     2       -54 N350AA</code></pre>
<p>Suuremast väiksemaks järjestamieks tuleb kasutada <code>desc()</code> lisavõimalust</p>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb228-1"><a href="pakett-dplyr.html#cb228-1" aria-hidden="true" tabindex="-1"></a>dat.aa1 <span class="ot">&lt;-</span> <span class="fu">arrange</span>(dat.aa1, <span class="fu">desc</span>(arr_delay))</span></code></pre></div>
</div>
<div id="dplyr-mutate" class="section level2" number="32.4">
<h2><span class="header-section-number">32.4</span> dplyr: mutate</h2>
<p>Teeme uue tunnuse, kus hilinemise aeg oleks tundides.</p>
<div class="sourceCode" id="cb229"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb229-1"><a href="pakett-dplyr.html#cb229-1" aria-hidden="true" tabindex="-1"></a>dat.aa1 <span class="ot">&lt;-</span> <span class="fu">mutate</span>(dat.aa1, <span class="at">tunnid=</span>arr_delay<span class="sc">/</span><span class="dv">60</span>)</span>
<span id="cb229-2"><a href="pakett-dplyr.html#cb229-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dat.aa1)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 4
##   month arr_delay tailnum tunnid
##   &lt;int&gt;     &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt;
## 1     2       -69 N3EAAA   -1.15
## 2     2       -65 N320AA   -1.08
## 3     2       -60 N3FAAA   -1   
## 4     1       -54 N335AA   -0.9 
## 5     2       -54 N4UBAA   -0.9 
## 6     2       -54 N350AA   -0.9</code></pre>
<p>Saab luua ka funktsioonide alusel uusi tunnuseid, näiteks kui tahame mingil põhjusel tunnust, kus oleks kõikide hilinemiste keskmine.</p>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb231-1"><a href="pakett-dplyr.html#cb231-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(dat.aa1, <span class="at">keskmine=</span><span class="fu">mean</span>(arr_delay, <span class="at">na.rm=</span>T))</span></code></pre></div>
</div>
<div id="dplyr-summarise" class="section level2" number="32.5">
<h2><span class="header-section-number">32.5</span> dplyr: summarise</h2>
<p>Tahame summeerida hilinemised keskmise, standardhälbe, maksimumi ja miinimumi alusel.</p>
<div class="sourceCode" id="cb232"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb232-1"><a href="pakett-dplyr.html#cb232-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summarise</span>(dat.aa1, </span>
<span id="cb232-2"><a href="pakett-dplyr.html#cb232-2" aria-hidden="true" tabindex="-1"></a>          <span class="at">keskmine=</span><span class="fu">mean</span>(arr_delay, <span class="at">na.rm=</span>T),</span>
<span id="cb232-3"><a href="pakett-dplyr.html#cb232-3" aria-hidden="true" tabindex="-1"></a>          <span class="at">sdh=</span><span class="fu">sd</span>(arr_delay, <span class="at">na.rm=</span>T),</span>
<span id="cb232-4"><a href="pakett-dplyr.html#cb232-4" aria-hidden="true" tabindex="-1"></a>          <span class="at">maks=</span><span class="fu">max</span>(arr_delay, <span class="at">na.rm=</span>T),</span>
<span id="cb232-5"><a href="pakett-dplyr.html#cb232-5" aria-hidden="true" tabindex="-1"></a>          <span class="at">min=</span><span class="fu">min</span>(arr_delay, <span class="at">na.rm=</span>T))</span></code></pre></div>
<pre><code>## # A tibble: 1 x 4
##   keskmine   sdh  maks   min
##      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1     1.03  34.1   368   -69</code></pre>
</div>
<div id="dplyr-group_by" class="section level2" number="32.6">
<h2><span class="header-section-number">32.6</span> dplyr: group_by</h2>
<p>Tahame teada keskmist hilinemist kuude lõikes.</p>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb234-1"><a href="pakett-dplyr.html#cb234-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summarise</span>(<span class="fu">group_by</span>(dat.aa1, month), <span class="at">keskmine=</span><span class="fu">mean</span>(tunnid, <span class="at">na.rm=</span>T))</span></code></pre></div>
<pre><code>## # A tibble: 2 x 2
##   month keskmine
##   &lt;int&gt;    &lt;dbl&gt;
## 1     1   0.0164
## 2     2   0.0182</code></pre>
</div>
<div id="dplyr-piping" class="section level2" number="32.7">
<h2><span class="header-section-number">32.7</span> dplyr: piping</h2>
<p>dplyr toetab nn piping’ut. Kombinatsiooniga %&gt;% saab saab ühe funktsiooni tulemuse võtta sisendiks järgmisele funktsioonile. Seega saame kõik vajalikud toimingud ühes reas ära teha. Kõikide dplyr’i funktsioonide puhul on esimene argument <em>data</em>. Kui kasutame %&gt;%, ei pea me enam <em>data</em>’t defineerima ja dplyr saab ise aru, et andmeteks on eelmise funktsiooni tulemused.<br />
Nii saame kõik eelnevad käsud panna ühte jadasse:</p>
<div class="sourceCode" id="cb236"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb236-1"><a href="pakett-dplyr.html#cb236-1" aria-hidden="true" tabindex="-1"></a>dat <span class="sc">%&gt;%</span> <span class="co">#algsed andmed</span></span>
<span id="cb236-2"><a href="pakett-dplyr.html#cb236-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(carrier<span class="sc">==</span><span class="st">&quot;AA&quot;</span>, month<span class="sc">==</span><span class="dv">1</span> <span class="sc">|</span> month<span class="sc">==</span><span class="dv">2</span>) <span class="sc">%&gt;%</span></span>
<span id="cb236-3"><a href="pakett-dplyr.html#cb236-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(month, arr_delay, tailnum) <span class="sc">%&gt;%</span></span>
<span id="cb236-4"><a href="pakett-dplyr.html#cb236-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(arr_delay) <span class="sc">%&gt;%</span></span>
<span id="cb236-5"><a href="pakett-dplyr.html#cb236-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">tunnid=</span>arr_delay<span class="sc">/</span><span class="dv">60</span>) <span class="sc">%&gt;%</span></span>
<span id="cb236-6"><a href="pakett-dplyr.html#cb236-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(month) <span class="sc">%&gt;%</span></span>
<span id="cb236-7"><a href="pakett-dplyr.html#cb236-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">keskmine=</span><span class="fu">mean</span>(tunnid, <span class="at">na.rm=</span>T))</span></code></pre></div>
<pre><code>## # A tibble: 2 x 2
##   month keskmine
##   &lt;int&gt;    &lt;dbl&gt;
## 1     1   0.0164
## 2     2   0.0182</code></pre>
<p>Kui me tahame tulemusi kuhugi salvestada, peame uue andmeobjekti alguses määrama.</p>
<div class="sourceCode" id="cb238"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb238-1"><a href="pakett-dplyr.html#cb238-1" aria-hidden="true" tabindex="-1"></a>dat1 <span class="ot">&lt;-</span> dat <span class="sc">%&gt;%</span></span>
<span id="cb238-2"><a href="pakett-dplyr.html#cb238-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(month, arr_delay, tailnum)</span></code></pre></div>
<p>Tänu piping’ule saab küllaltki keerulisi andmeteisendusi teha väga lihtsalt ja elegantselt (puhta ja arusaadava koodiga). Näiteks tunnus, milles on kõikide lennufirmade keskmine hilinemine kõikide kuude lõikes:</p>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb239-1"><a href="pakett-dplyr.html#cb239-1" aria-hidden="true" tabindex="-1"></a>dat1 <span class="ot">&lt;-</span> dat<span class="sc">%&gt;%</span></span>
<span id="cb239-2"><a href="pakett-dplyr.html#cb239-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(carrier, month) <span class="sc">%&gt;%</span> <span class="co"># saame grupeerida ka mitme tunnuse lõikes</span></span>
<span id="cb239-3"><a href="pakett-dplyr.html#cb239-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">keskmine =</span> <span class="fu">mean</span>(arr_delay, <span class="at">na.rm=</span>T))</span></code></pre></div>
</div>
<div id="veel-mõned-kasulikud-funktsioonid" class="section level2" number="32.8">
<h2><span class="header-section-number">32.8</span> Veel mõned kasulikud funktsioonid</h2>
<p>Kui on vaja välja jätta dubleerivad vaatlused:</p>
<div class="sourceCode" id="cb240"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb240-1"><a href="pakett-dplyr.html#cb240-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb240-2"><a href="pakett-dplyr.html#cb240-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(carrier, flight)</span></code></pre></div>
<pre><code>## # A tibble: 5,725 x 2
##    carrier flight
##    &lt;chr&gt;    &lt;int&gt;
##  1 UA        1545
##  2 UA        1714
##  3 AA        1141
##  4 B6         725
##  5 DL         461
##  6 UA        1696
##  7 B6         507
##  8 EV        5708
##  9 B6          79
## 10 AA         301
## # ... with 5,715 more rows</code></pre>
<p>Kui on vaja vaatluste arvu:</p>
<div class="sourceCode" id="cb242"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb242-1"><a href="pakett-dplyr.html#cb242-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb242-2"><a href="pakett-dplyr.html#cb242-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">n</span>())</span></code></pre></div>
<pre><code>## # A tibble: 1 x 1
##    `n()`
##    &lt;int&gt;
## 1 336776</code></pre>
<div class="sourceCode" id="cb244"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb244-1"><a href="pakett-dplyr.html#cb244-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Või vaatluste arv gruppide lõikes</span></span>
<span id="cb244-2"><a href="pakett-dplyr.html#cb244-2" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb244-3"><a href="pakett-dplyr.html#cb244-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(carrier) <span class="sc">%&gt;%</span> </span>
<span id="cb244-4"><a href="pakett-dplyr.html#cb244-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">kokku =</span> <span class="fu">n</span>())</span></code></pre></div>
<pre><code>## # A tibble: 16 x 2
##    carrier kokku
##    &lt;chr&gt;   &lt;int&gt;
##  1 9E      18460
##  2 AA      32729
##  3 AS        714
##  4 B6      54635
##  5 DL      48110
##  6 EV      54173
##  7 F9        685
##  8 FL       3260
##  9 HA        342
## 10 MQ      26397
## 11 OO         32
## 12 UA      58665
## 13 US      20536
## 14 VX       5162
## 15 WN      12275
## 16 YV        601</code></pre>
<p>Kui tahame välja võtta juhuvalimi:</p>
<div class="sourceCode" id="cb246"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb246-1"><a href="pakett-dplyr.html#cb246-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Võtame välja 10 juhuslikku rida</span></span>
<span id="cb246-2"><a href="pakett-dplyr.html#cb246-2" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb246-3"><a href="pakett-dplyr.html#cb246-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sample_n</span>(<span class="dv">10</span>)</span></code></pre></div>
<pre><code>## # A tibble: 10 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
##  1  2013     7    10      620            620         0      833            843
##  2  2013    12    31     1534           1529         5     1659           1707
##  3  2013    12    12     2016           2028       -12     2158           2215
##  4  2013     6    14     1326           1328        -2     1511           1530
##  5  2013     5    21     1630           1635        -5     1929           1954
##  6  2013     1    10      904            908        -4     1115           1120
##  7  2013     6    12     1514           1451        23     1655           1650
##  8  2013     7    24     1553           1429        84     2010           1830
##  9  2013    12    23     1606           1516        50     1741           1650
## 10  2013     6    20     1155           1200        -5     1430           1450
## # ... with 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
## #   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
## #   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<p>Kui tahame välja võtta konkreetsed read:</p>
<div class="sourceCode" id="cb248"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb248-1"><a href="pakett-dplyr.html#cb248-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Võtame välja esimesed 5 rida</span></span>
<span id="cb248-2"><a href="pakett-dplyr.html#cb248-2" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb248-3"><a href="pakett-dplyr.html#cb248-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span></code></pre></div>
<pre><code>## # A tibble: 5 x 19
##    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
## 1  2013     1     1      517            515         2      830            819
## 2  2013     1     1      533            529         4      850            830
## 3  2013     1     1      542            540         2      923            850
## 4  2013     1     1      544            545        -1     1004           1022
## 5  2013     1     1      554            600        -6      812            837
## # ... with 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
## #   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
## #   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="tabelid.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="andmete-ühendamine.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
