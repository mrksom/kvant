<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Peatükk 2 Sissejuhatus R-i | Kvantitatiivne andmeanalüüs</title>
  <meta name="description" content="Peatükk 2 Sissejuhatus R-i | Kvantitatiivne andmeanalüüs" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Peatükk 2 Sissejuhatus R-i | Kvantitatiivne andmeanalüüs" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Peatükk 2 Sissejuhatus R-i | Kvantitatiivne andmeanalüüs" />
  
  
  

<meta name="author" content="Marko Sõmer" />


<meta name="date" content="2022-02-18" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="lineaarne-regressioon.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Kvant II</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Teadmiseks</a></li>
<li class="part"><span><b>I Meeldetuletus</b></span></li>
<li class="chapter" data-level="2" data-path="sissejuhatus-r-i.html"><a href="sissejuhatus-r-i.html"><i class="fa fa-check"></i><b>2</b> Sissejuhatus R-i</a>
<ul>
<li class="chapter" data-level="2.1" data-path="sissejuhatus-r-i.html"><a href="sissejuhatus-r-i.html#päris-algus"><i class="fa fa-check"></i><b>2.1</b> Päris algus</a></li>
<li class="chapter" data-level="2.2" data-path="sissejuhatus-r-i.html"><a href="sissejuhatus-r-i.html#andmetega-töötamine"><i class="fa fa-check"></i><b>2.2</b> Andmetega töötamine</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="sissejuhatus-r-i.html"><a href="sissejuhatus-r-i.html#dplyr"><i class="fa fa-check"></i><b>2.2.1</b> dplyr</a></li>
<li class="chapter" data-level="2.2.2" data-path="sissejuhatus-r-i.html"><a href="sissejuhatus-r-i.html#andmete-ühendamine"><i class="fa fa-check"></i><b>2.2.2</b> Andmete ühendamine</a></li>
<li class="chapter" data-level="2.2.3" data-path="sissejuhatus-r-i.html"><a href="sissejuhatus-r-i.html#andmestiku-kuju-muutmine"><i class="fa fa-check"></i><b>2.2.3</b> Andmestiku kuju muutmine</a></li>
<li class="chapter" data-level="2.2.4" data-path="sissejuhatus-r-i.html"><a href="sissejuhatus-r-i.html#kuupäevad"><i class="fa fa-check"></i><b>2.2.4</b> Kuupäevad</a></li>
<li class="chapter" data-level="2.2.5" data-path="sissejuhatus-r-i.html"><a href="sissejuhatus-r-i.html#tekstilised-tunnused"><i class="fa fa-check"></i><b>2.2.5</b> Tekstilised tunnused</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="sissejuhatus-r-i.html"><a href="sissejuhatus-r-i.html#r-markdown"><i class="fa fa-check"></i><b>2.3</b> R markdown</a></li>
<li class="chapter" data-level="2.4" data-path="sissejuhatus-r-i.html"><a href="sissejuhatus-r-i.html#andmegraafika"><i class="fa fa-check"></i><b>2.4</b> Andmegraafika</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="sissejuhatus-r-i.html"><a href="sissejuhatus-r-i.html#ri-baasgraafikud"><i class="fa fa-check"></i><b>2.4.1</b> R’i baasgraafikud</a></li>
<li class="chapter" data-level="2.4.2" data-path="sissejuhatus-r-i.html"><a href="sissejuhatus-r-i.html#ggplot"><i class="fa fa-check"></i><b>2.4.2</b> ggplot</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="sissejuhatus-r-i.html"><a href="sissejuhatus-r-i.html#edasiseks-lugemiseks"><i class="fa fa-check"></i><b>2.5</b> Edasiseks lugemiseks</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html"><i class="fa fa-check"></i><b>3</b> Lineaarne regressioon</a>
<ul>
<li class="chapter" data-level="3.1" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#lihtne-lineaarne-regressioon"><i class="fa fa-check"></i><b>3.1</b> Lihtne lineaarne regressioon</a></li>
<li class="chapter" data-level="3.2" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#regressioon-r-is"><i class="fa fa-check"></i><b>3.2</b> Regressioon R-is</a></li>
<li class="chapter" data-level="3.3" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#regressiooni-jäägid"><i class="fa fa-check"></i><b>3.3</b> Regressiooni jäägid</a></li>
<li class="chapter" data-level="3.4" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#regressioonimudeli-sobitumine"><i class="fa fa-check"></i><b>3.4</b> Regressioonimudeli sobitumine</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#jääkide-jaotus"><i class="fa fa-check"></i><b>3.4.1</b> Jääkide jaotus</a></li>
<li class="chapter" data-level="3.4.2" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#regressioonikoefitsiendid-ja-nende-olulisus"><i class="fa fa-check"></i><b>3.4.2</b> Regressioonikoefitsiendid ja nende olulisus</a></li>
<li class="chapter" data-level="3.4.3" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#jääkide-standardviga"><i class="fa fa-check"></i><b>3.4.3</b> Jääkide standardviga</a></li>
<li class="chapter" data-level="3.4.4" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#r-ruut"><i class="fa fa-check"></i><b>3.4.4</b> R ruut</a></li>
<li class="chapter" data-level="3.4.5" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#f-väärtus-ja-f-test"><i class="fa fa-check"></i><b>3.4.5</b> F-väärtus ja F-test</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#kategoriaalsed-tunnused-regressioonis"><i class="fa fa-check"></i><b>3.5</b> Kategoriaalsed tunnused regressioonis</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#üks-binaarne-sõltumatu-tunnus"><i class="fa fa-check"></i><b>3.5.1</b> Üks binaarne sõltumatu tunnus</a></li>
<li class="chapter" data-level="3.5.2" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#kolme-või-enama-kategooriaga-sõltumatu-tunnus"><i class="fa fa-check"></i><b>3.5.2</b> Kolme või enama kategooriaga sõltumatu tunnus</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#mitmene-regressioon"><i class="fa fa-check"></i><b>3.6</b> Mitmene regressioon</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#kaks-pidevat-sõltumatut-muutujat"><i class="fa fa-check"></i><b>3.6.1</b> Kaks pidevat sõltumatut muutujat</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#koosmõjud"><i class="fa fa-check"></i><b>3.7</b> Koosmõjud</a>
<ul>
<li class="chapter" data-level="3.7.1" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#koosmõjud-kategoriaalsete-tunnuste-puhul"><i class="fa fa-check"></i><b>3.7.1</b> Koosmõjud kategoriaalsete tunnuste puhul</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#mudelite-võrdlemine"><i class="fa fa-check"></i><b>3.8</b> Mudelite võrdlemine</a></li>
<li class="chapter" data-level="3.9" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#regressioonimudeli-eeldused"><i class="fa fa-check"></i><b>3.9</b> Regressioonimudeli eeldused</a></li>
<li class="chapter" data-level="3.10" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#kuidas-eelduste-täidetust-hinnata"><i class="fa fa-check"></i><b>3.10</b> Kuidas eelduste täidetust hinnata?</a></li>
</ul></li>
<li class="part"><span><b>II Üldistatud lineaarsed mudelid</b></span></li>
<li class="chapter" data-level="4" data-path="logistiline-regressioon.html"><a href="logistiline-regressioon.html"><i class="fa fa-check"></i><b>4</b> Logistiline regressioon</a>
<ul>
<li class="chapter" data-level="4.1" data-path="logistiline-regressioon.html"><a href="logistiline-regressioon.html#šansid"><i class="fa fa-check"></i><b>4.1</b> Šansid</a></li>
<li class="chapter" data-level="4.2" data-path="logistiline-regressioon.html"><a href="logistiline-regressioon.html#logit"><i class="fa fa-check"></i><b>4.2</b> Logit</a></li>
<li class="chapter" data-level="4.3" data-path="logistiline-regressioon.html"><a href="logistiline-regressioon.html#logit-mudel"><i class="fa fa-check"></i><b>4.3</b> Logit mudel</a></li>
<li class="chapter" data-level="4.4" data-path="logistiline-regressioon.html"><a href="logistiline-regressioon.html#mudeli-tõlgendus"><i class="fa fa-check"></i><b>4.4</b> Mudeli tõlgendus</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="logistiline-regressioon.html"><a href="logistiline-regressioon.html#šansside-suhe"><i class="fa fa-check"></i><b>4.4.1</b> Šansside suhe</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="logistiline-regressioon.html"><a href="logistiline-regressioon.html#logistiline-regressioon-r-is"><i class="fa fa-check"></i><b>4.5</b> Logistiline regressioon R-is</a></li>
<li class="chapter" data-level="4.6" data-path="logistiline-regressioon.html"><a href="logistiline-regressioon.html#mudeli-kvaliteet"><i class="fa fa-check"></i><b>4.6</b> Mudeli kvaliteet</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="logistiline-regressioon.html"><a href="logistiline-regressioon.html#mudeli-sobivus"><i class="fa fa-check"></i><b>4.6.1</b> Mudeli sobivus</a></li>
<li class="chapter" data-level="4.6.2" data-path="logistiline-regressioon.html"><a href="logistiline-regressioon.html#mudeli-statistiline-olulisus"><i class="fa fa-check"></i><b>4.6.2</b> Mudeli statistiline olulisus</a></li>
<li class="chapter" data-level="4.6.3" data-path="logistiline-regressioon.html"><a href="logistiline-regressioon.html#pseudo-r2"><i class="fa fa-check"></i><b>4.6.3</b> Pseudo-<span class="math inline">\(R^2\)</span></a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="logistiline-regressioon.html"><a href="logistiline-regressioon.html#predict"><i class="fa fa-check"></i><b>4.7</b> Predict</a>
<ul>
<li class="chapter" data-level="4.7.1" data-path="logistiline-regressioon.html"><a href="logistiline-regressioon.html#broom"><i class="fa fa-check"></i><b>4.7.1</b> Broom</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="logistiline-regressioon.html"><a href="logistiline-regressioon.html#marginaalsed-efektid"><i class="fa fa-check"></i><b>4.8</b> Marginaalsed efektid</a></li>
<li class="chapter" data-level="4.9" data-path="logistiline-regressioon.html"><a href="logistiline-regressioon.html#prognoosi-täpsus"><i class="fa fa-check"></i><b>4.9</b> Prognoosi täpsus</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="poissoni-regressioon.html"><a href="poissoni-regressioon.html"><i class="fa fa-check"></i><b>5</b> Poissoni regressioon</a>
<ul>
<li class="chapter" data-level="5.1" data-path="poissoni-regressioon.html"><a href="poissoni-regressioon.html#mudeli-tõlgendus-1"><i class="fa fa-check"></i><b>5.1</b> Mudeli tõlgendus</a></li>
<li class="chapter" data-level="5.2" data-path="poissoni-regressioon.html"><a href="poissoni-regressioon.html#poissoni-regressiooni-eeldused"><i class="fa fa-check"></i><b>5.2</b> Poissoni regressiooni eeldused</a></li>
<li class="chapter" data-level="5.3" data-path="poissoni-regressioon.html"><a href="poissoni-regressioon.html#mudeli-hindamine-r-is"><i class="fa fa-check"></i><b>5.3</b> Mudeli hindamine R-is</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="poissoni-regressioon.html"><a href="poissoni-regressioon.html#andmete-kirjeldus-ja-ettevalmistus"><i class="fa fa-check"></i><b>5.3.1</b> Andmete kirjeldus ja ettevalmistus</a></li>
<li class="chapter" data-level="5.3.2" data-path="poissoni-regressioon.html"><a href="poissoni-regressioon.html#poissoni-mudeli-defineerimine"><i class="fa fa-check"></i><b>5.3.2</b> Poissoni mudeli defineerimine</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="poissoni-regressioon.html"><a href="poissoni-regressioon.html#mudeli-eelduste-kontroll"><i class="fa fa-check"></i><b>5.4</b> Mudeli eelduste kontroll</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="poissoni-regressioon.html"><a href="poissoni-regressioon.html#üledispersioon"><i class="fa fa-check"></i><b>5.4.1</b> Üledispersioon</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="poissoni-regressioon.html"><a href="poissoni-regressioon.html#mudeli-sobivus-model-fit"><i class="fa fa-check"></i><b>5.5</b> Mudeli sobivus (<em>model fit</em>)</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="poissoni-regressioon.html"><a href="poissoni-regressioon.html#mudeli-statistiline-olulisus-1"><i class="fa fa-check"></i><b>5.5.1</b> Mudeli statistiline olulisus</a></li>
<li class="chapter" data-level="5.5.2" data-path="poissoni-regressioon.html"><a href="poissoni-regressioon.html#jääkide-jaotus-1"><i class="fa fa-check"></i><b>5.5.2</b> Jääkide jaotus</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="viited.html"><a href="viited.html"><i class="fa fa-check"></i>Viited</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Kvantitatiivne andmeanalüüs</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="sissejuhatus-r-i" class="section level1" number="2">
<h1><span class="header-section-number">Peatükk 2</span> Sissejuhatus R-i</h1>
<div id="päris-algus" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> Päris algus</h2>
<p><strong>Mis see R on?</strong></p>
<ul>
<li>Analüüsikeskkond</li>
<li>Programmeerimiskeel</li>
<li>Vabavara</li>
<li>Põhineb kasutajate kirjutatud pakkettidel, ehk siis pidevalt arenev</li>
<li>Andmeanalüüsi seisukohalt praktiliselt piiramatute võimalustega</li>
<li>Järjest enam kasutatav</li>
<li>Publikatsioonitaseme andmegraafika</li>
<li>Suhteliselt järsu õppimiskõveraga, aga kui see ületatud, siis läheb lihtsamaks :)</li>
</ul>
<p><strong>Miks R?</strong></p>
<ul>
<li>Kui on vajadus natukenegi tõsisemalt andmeanalüüsi või andmegraafikaga tegeleda, siis tuleb mingi hetk nii ehk naa R ära õppida (või siis näiteks Python).</li>
<li>Kui vahest harva on vaja mõni analüüs teha, siis ei ole ju mingit mõtet selle jaoks kallist (ja ebaefektiivset) kommertstarkvara soetada. R see-eest on tasuta.</li>
<li>Seega küsimus võiks pigem kõlada, et miks SPSS, Stata, SAS või Mplus?</li>
</ul>
<p><strong>Mida R’i kasutamiseks vaja on?</strong></p>
<p>Baasprogramm<br />
<a href="https://cran.r-project.org/" class="uri">https://cran.r-project.org/</a></p>
<p>RStudio kasutajaliides<br />
<a href="https://www.rstudio.com/" class="uri">https://www.rstudio.com/</a></p>
<p>Saab tegelikult hakkama ka ainult baasprogrammiga. Kuid RStudio teeb töö päris palju mugavamaks ja efektiivsemaks ning lisab võimalusi (näiteks R Markdown analüüside kommunikeerimiseks, projektihaldus jne).<br />
On ka teisi kasutajaliideseid ja scriptide kirjutamise abivahendeid, kuid RStudio on neist kahtlemata kõige populaarsem, funktsionaalsem ja mugavam.</p>
<p><strong>Kuidas R’i ja RStudiot kasutada?</strong></p>
<p>R’is ei ole rippmenüüsid, OK nuppe ega avanevaid aknaid. Kõik käsud tuleb käsureale sisse trükkida. Ühest küljest nõuab see kasutajalt mõnevõrra põhjalikumat arusaamist oma tegevusest, teisalt võimaldab tegevusi kombineerida, neist head ülevaadet saada ning tehtud analüüse lihtsalt korrata (<em>reproducible research</em>)</p>
<ul>
<li><p>Projektide haldamine<br />
RStudio võimaldab erinevaid töid hallata projektidena. Igal projektil on projektikaust (nn juurkataloog), kuhu saab salvestada kõik antud projektiga seonduvad scriptid, andmed jne. Uue projekti loomiseks klikkige <em>File -&gt; New Project</em>, misjärel saab valida kataloogi, kuhu projekt (ja seega kõik projektiga seotud matejalid) salvestub.</p></li>
<li><p>Skriptide loomine<br />
Kõik, mida me andmetega teeme, tuleks salvestada skripti (tegelikult on tegemist kõige tavalisema tekstifailiga). Uue skripti saab teha valides RStudios <em>File -&gt; New File -&gt; R Script</em><br />
Skriptide kaudu on meil ülevaade kõigest, mida me andmetega teinud oleme (andmeteisendused, analüüsikäik jne) ning samas saame iga hetk oma analüüsi korrata.<br />
Skriptis olevat koodi saame jooksutada kui märgime vajaliku koodi ära ja vajutame <em>Cntr+Enter</em> või kasutame scriptiakna üleval paremas servas asuvat nuppu <em>Run</em>.</p></li>
</ul>
<p><strong>R kui kalkulaator</strong></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="sissejuhatus-r-i.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="sc">+</span> <span class="dv">3</span></span></code></pre></div>
<pre><code>## [1] 5</code></pre>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="sissejuhatus-r-i.html#cb3-1" aria-hidden="true" tabindex="-1"></a>(<span class="dv">4</span> <span class="sc">-</span> <span class="dv">2</span>) <span class="sc">/</span> <span class="dv">2</span> <span class="co"># sulud toimivad nii nagu nad toimima peavad</span></span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="sissejuhatus-r-i.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> <span class="sc">*</span> <span class="dv">10</span> <span class="co"># korrutamine</span></span></code></pre></div>
<pre><code>## [1] 100</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="sissejuhatus-r-i.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> <span class="sc">/</span> <span class="dv">5</span> <span class="co"># jagamine</span></span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="sissejuhatus-r-i.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span><span class="sc">^</span><span class="dv">2</span> <span class="co">#astendamine</span></span></code></pre></div>
<pre><code>## [1] 9</code></pre>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="sissejuhatus-r-i.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span><span class="sc">**</span><span class="dv">2</span> <span class="co"># ka nii saab astendada</span></span></code></pre></div>
<pre><code>## [1] 9</code></pre>
<p><strong>Loogilised tehted</strong></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="sissejuhatus-r-i.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="sc">==</span> <span class="dv">2</span> <span class="co"># võrdub</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="sissejuhatus-r-i.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">!=</span> <span class="dv">2</span> <span class="co"># ei võrdu</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="sissejuhatus-r-i.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="sc">&gt;=</span> <span class="dv">2</span> <span class="co"># suurem kui või võrdne</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="sissejuhatus-r-i.html#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">&lt;</span> <span class="dv">2</span>  <span class="co"># väiksem kui</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="sissejuhatus-r-i.html#cb21-1" aria-hidden="true" tabindex="-1"></a>(<span class="dv">3</span><span class="sc">&lt;</span><span class="dv">6</span>) <span class="sc">|</span> (<span class="dv">6</span><span class="sc">&lt;</span><span class="dv">3</span>) <span class="co"># loogiline või</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="sissejuhatus-r-i.html#cb23-1" aria-hidden="true" tabindex="-1"></a>(<span class="dv">3</span><span class="sc">&lt;</span><span class="dv">6</span>) <span class="sc">&amp;</span> (<span class="dv">6</span><span class="sc">&lt;</span><span class="dv">3</span>) <span class="co"># loogiline ja</span></span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p><strong>Andmeobjektid</strong></p>
<p>R töötab andmeobjektidega ehk andmetega, mis on salvestatud mingisse objekti. Andmeobjekt võib sisaldada üksikut numbrilist väärtust (või ka näiteks sõna), aga ka mitut üksiväärtus koondavat vektorit (seega tunnus) või hoopis mitut andmevektorit koondavat andmestikku.<br />
Andmeobjektile väärtuse omistamine toimub “&lt;-” märgiga.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="sissejuhatus-r-i.html#cb25-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span></span></code></pre></div>
<p>Omistasime objektile <em>x</em> väärtuse 1. Nüüd käsitleb R <em>x</em>’i kui 1’te ja me saame sellega näiteks tehteid teha.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="sissejuhatus-r-i.html#cb26-1" aria-hidden="true" tabindex="-1"></a>x <span class="sc">+</span> <span class="dv">1</span></span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="sissejuhatus-r-i.html#cb28-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb28-2"><a href="sissejuhatus-r-i.html#cb28-2" aria-hidden="true" tabindex="-1"></a>a</span></code></pre></div>
<pre><code>## [1] 10</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="sissejuhatus-r-i.html#cb30-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> a <span class="sc">+</span> <span class="dv">10</span> <span class="co"># kirjutame algse a üle ja omistame talle uue väärtuse</span></span>
<span id="cb30-2"><a href="sissejuhatus-r-i.html#cb30-2" aria-hidden="true" tabindex="-1"></a>a</span></code></pre></div>
<pre><code>## [1] 20</code></pre>
<p>Andmeobjektide nimed ei tohi sisaldada tehtemärke või tühikut ega alata numbriga. Sõnu võib vajadusel eristada näiteks punkti või alakriipsuga: a.1, a_1 . Ei ole ka soovitatav kasutada ka täpitähti (kuigi üldjuhul R neid tunnistab).<br />
R eristab suuri ja väikeseid tähti. R ei võrdu r’iga.</p>
<p>Andmeobjektid võivad sisaldada ka sõnu, lauseid või terveid lõike.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="sissejuhatus-r-i.html#cb32-1" aria-hidden="true" tabindex="-1"></a>linn <span class="ot">&lt;-</span> <span class="st">&quot;Tallinn&quot;</span></span>
<span id="cb32-2"><a href="sissejuhatus-r-i.html#cb32-2" aria-hidden="true" tabindex="-1"></a>linn</span></code></pre></div>
<pre><code>## [1] &quot;Tallinn&quot;</code></pre>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="sissejuhatus-r-i.html#cb34-1" aria-hidden="true" tabindex="-1"></a>kool <span class="ot">&lt;-</span> <span class="st">&quot;Tallinna Ülikool&quot;</span></span>
<span id="cb34-2"><a href="sissejuhatus-r-i.html#cb34-2" aria-hidden="true" tabindex="-1"></a>kool</span></code></pre></div>
<pre><code>## [1] &quot;Tallinna Ülikool&quot;</code></pre>
<p>Jutumärgid annavad R’ile teada, et tegemist on tekstiga ja mitte teise andmeobjekti või funktsiooniga.</p>
<p><strong>Loogilised andmed (TRUE või FALSE)</strong></p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="sissejuhatus-r-i.html#cb36-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="cn">TRUE</span></span>
<span id="cb36-2"><a href="sissejuhatus-r-i.html#cb36-2" aria-hidden="true" tabindex="-1"></a>a</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="sissejuhatus-r-i.html#cb38-1" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="cn">FALSE</span></span>
<span id="cb38-2"><a href="sissejuhatus-r-i.html#cb38-2" aria-hidden="true" tabindex="-1"></a>b</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>Loogilisi väärtused on tulemuseks loogilistele tehetele.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="sissejuhatus-r-i.html#cb40-1" aria-hidden="true" tabindex="-1"></a>c <span class="ot">&lt;-</span> <span class="dv">3</span> <span class="sc">&gt;</span> <span class="dv">2</span></span>
<span id="cb40-2"><a href="sissejuhatus-r-i.html#cb40-2" aria-hidden="true" tabindex="-1"></a>c</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>R käsitleb loogilisi väärtusi sisemiselt 1 ja 0’ina, seega saame ka nendega tehteid teha:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="sissejuhatus-r-i.html#cb42-1" aria-hidden="true" tabindex="-1"></a>a</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="sissejuhatus-r-i.html#cb44-1" aria-hidden="true" tabindex="-1"></a>b</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="sissejuhatus-r-i.html#cb46-1" aria-hidden="true" tabindex="-1"></a>a <span class="sc">+</span> b</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<p><strong>Puuduvad väärtused</strong></p>
<p>Puuduvate väärtuste jaoks on tähis NA.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="sissejuhatus-r-i.html#cb48-1" aria-hidden="true" tabindex="-1"></a>c <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb48-2"><a href="sissejuhatus-r-i.html#cb48-2" aria-hidden="true" tabindex="-1"></a>c</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="sissejuhatus-r-i.html#cb50-1" aria-hidden="true" tabindex="-1"></a>a</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="sissejuhatus-r-i.html#cb52-1" aria-hidden="true" tabindex="-1"></a>c <span class="sc">+</span> a</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<p>Miks on tulemuseks <em>NA</em>? Kui me liidame mingi arvu millelegi, mida me ei tea, siis me ju ei tea ka vastust.</p>
<div class="teie-kord" style="color: red;">
<p>Ülesanne!</p>
<ol style="list-style-type: decimal">
<li>tehke andmeobjekt <em>synniaasta</em>, mille väärtuseks on Teie sünniaasta</li>
<li>tehke andmeobjekt <em>aasta</em>, mille väärtuseks on 2017</li>
<li>arvutage kui vana te olete?</li>
<li>kontrollige looglise tehtega, kas Teie sünniaasta ikka on väiksem kui 2019</li>
<li>tehke andmeobjekt <em>nimi</em>, mille väärtuseks on Teie nimi</li>
</ol>
</div>
<p><strong>Funktsioonid</strong></p>
<p>Enamik toimingutest toimub R’is funktsioonide abil.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="sissejuhatus-r-i.html#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="dv">4</span>) <span class="co"># ruutjuure funktsioon</span></span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<p>Funktsioonile järgnevad alati sulud, milles tuleb määrata funktsiooni argument (antud juhul 4, ehk number millest tahame ruutjuurt võtta). Argumente võib olla ka rohkem kui üks (ja üldjuhul ongi). Sellisel juhul on nad eraldatud komaga. Funktsioonil <code>log()</code> on kaks argumenti: <code>x</code>, ehk arv millest me tahame logaritmi võtta ja <code>base</code> ehk logaritmi alus.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="sissejuhatus-r-i.html#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span>(<span class="at">x =</span> <span class="dv">100</span>, <span class="at">base =</span> <span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<p>Kui me teame argumentide järjekorda, siis me ei pea nende tähiseid eksplitsiitselt välja kirjutama.</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="sissejuhatus-r-i.html#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span>(<span class="dv">100</span>, <span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<p>Osadel argumentidel on vaikeväärtused ( näit <code>log()</code> funktsiooni puhul <code>base</code> argumendi vaikeväärtuseks <em>e</em> ehk 2.7) Kui me vaikeväärtusega argumenti välja ei kirjuta, kasutatakse vaikeväärtust.</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="sissejuhatus-r-i.html#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span>(<span class="at">x=</span><span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] 4.60517</code></pre>
<p>See kehtib muidugi ainult sellisel juhul kui teisel argumendil on vaikeväärtus. Kuidas me seda aga teadma peaksime? Kõige lihtsam on vaadata funktsiooni abilehte, kus on kõik selle argumendid loetletud.</p>
<p><strong>Kuidas abi saada?</strong></p>
<p>Iga funktsiooni kohta on R’is abileht millele pääseb ligi kirjutade funktsiooni nime ette <code>?</code>.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="sissejuhatus-r-i.html#cb62-1" aria-hidden="true" tabindex="-1"></a>?log</span>
<span id="cb62-2"><a href="sissejuhatus-r-i.html#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(log) <span class="co"># saab ka nii</span></span></code></pre></div>
<p>Kui on spetsiifilisemad probleemid, saab alati googeldada. Erinevaid materjale, tutoriale, foorumeid jne on väga palju.</p>
<p><strong>Vektorid</strong></p>
<p>Üldiselt ei tööta me üksikväärtustega (skalaaridega) vaid andmejadade ehk vektoritega. Vektori loomine ehk mitmest väärtusest andmeobjekti loomine käib <code>c()</code> funktsiooniga.</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="sissejuhatus-r-i.html#cb63-1" aria-hidden="true" tabindex="-1"></a>see <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">6</span>,<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">10</span>)</span>
<span id="cb63-2"><a href="sissejuhatus-r-i.html#cb63-2" aria-hidden="true" tabindex="-1"></a>see</span></code></pre></div>
<pre><code>## [1]  3  6  1  4 10</code></pre>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="sissejuhatus-r-i.html#cb65-1" aria-hidden="true" tabindex="-1"></a>too <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>) <span class="co"># vektor võib sisaldada ka teksti</span></span>
<span id="cb65-2"><a href="sissejuhatus-r-i.html#cb65-2" aria-hidden="true" tabindex="-1"></a>too</span></code></pre></div>
<pre><code>## [1] &quot;a&quot; &quot;b&quot; &quot;c&quot;</code></pre>
<p>Sarnaselt üksikväärtustega saab ka vektoritega tehteid teha.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="sissejuhatus-r-i.html#cb67-1" aria-hidden="true" tabindex="-1"></a>see</span></code></pre></div>
<pre><code>## [1]  3  6  1  4 10</code></pre>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="sissejuhatus-r-i.html#cb69-1" aria-hidden="true" tabindex="-1"></a>too <span class="ot">&lt;-</span> see <span class="sc">*</span> <span class="dv">2</span></span>
<span id="cb69-2"><a href="sissejuhatus-r-i.html#cb69-2" aria-hidden="true" tabindex="-1"></a>too</span></code></pre></div>
<pre><code>## [1]  6 12  2  8 20</code></pre>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="sissejuhatus-r-i.html#cb71-1" aria-hidden="true" tabindex="-1"></a>see <span class="sc">+</span> too</span></code></pre></div>
<pre><code>## [1]  9 18  3 12 30</code></pre>
<p>Kui üks vektor on teisest lühem, siis R taaskasutab lühema vektori väärtusi.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="sissejuhatus-r-i.html#cb73-1" aria-hidden="true" tabindex="-1"></a>pikk <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">3</span>)</span>
<span id="cb73-2"><a href="sissejuhatus-r-i.html#cb73-2" aria-hidden="true" tabindex="-1"></a>lyhike <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">100</span>)</span>
<span id="cb73-3"><a href="sissejuhatus-r-i.html#cb73-3" aria-hidden="true" tabindex="-1"></a>pikk <span class="sc">*</span> lyhike</span></code></pre></div>
<pre><code>## [1]  10 100  20 200  30 300</code></pre>
<p>See juhtub ka siis, kui lühem vektor ei ole pikema täisarvuline jagatis:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="sissejuhatus-r-i.html#cb75-1" aria-hidden="true" tabindex="-1"></a>pikk <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">3</span>, <span class="dv">4</span>)</span>
<span id="cb75-2"><a href="sissejuhatus-r-i.html#cb75-2" aria-hidden="true" tabindex="-1"></a>lyhike <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">100</span>)</span>
<span id="cb75-3"><a href="sissejuhatus-r-i.html#cb75-3" aria-hidden="true" tabindex="-1"></a>pikk <span class="sc">*</span> lyhike</span></code></pre></div>
<pre><code>## [1]  10 100  20 200  30 300  40</code></pre>
<p>Üldiselt me sellist asja teha ei taha. Õnneks antakse taolisest olukorrast meile ka hoiatusteatega märku. Aga miks taoline vektoriseeritus üldse vajalik peaks olema? Asi on selles, et R käsitleb kõiki objekte vektoritena. Ka üksik number on vektor, mille pikkus on 1. Ehk siis just vektoriseeritus võimaldab meil teha nii:</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="sissejuhatus-r-i.html#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>) <span class="sc">*</span> <span class="dv">2</span></span></code></pre></div>
<pre><code>## [1] 2 4 6 8</code></pre>
<p>Ja midagi taolist tahame me teha päris tihti.</p>
<p>Vektori elementidele saab ka nimesi anda (ja üksikväärtustele muidugi ka)</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="sissejuhatus-r-i.html#cb79-1" aria-hidden="true" tabindex="-1"></a>see2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">a=</span><span class="dv">1</span>, <span class="at">b=</span><span class="dv">2</span>, <span class="at">c=</span><span class="dv">3</span>)</span>
<span id="cb79-2"><a href="sissejuhatus-r-i.html#cb79-2" aria-hidden="true" tabindex="-1"></a>see2</span></code></pre></div>
<pre><code>## a b c 
## 1 2 3</code></pre>
<p><strong>Indekseerimine</strong></p>
<p>Kuidas üksikuid väärtusi vektorist kätte saada? Neile saab ligi kasutades [ ] funktsiooni koos soovitava väärtuse indeksiga (positsiooninumbriga).</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="sissejuhatus-r-i.html#cb81-1" aria-hidden="true" tabindex="-1"></a>see <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">6</span>,<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">10</span>)</span>
<span id="cb81-2"><a href="sissejuhatus-r-i.html#cb81-2" aria-hidden="true" tabindex="-1"></a>see[<span class="dv">2</span>] <span class="co"># tahame teada vektori teist väärtust</span></span></code></pre></div>
<pre><code>## [1] 6</code></pre>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="sissejuhatus-r-i.html#cb83-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> see[<span class="dv">2</span>] <span class="co"># tahame selle kirjutada uude andmeobjekti</span></span>
<span id="cb83-2"><a href="sissejuhatus-r-i.html#cb83-2" aria-hidden="true" tabindex="-1"></a>a</span></code></pre></div>
<pre><code>## [1] 6</code></pre>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="sissejuhatus-r-i.html#cb85-1" aria-hidden="true" tabindex="-1"></a>see[<span class="dv">3</span><span class="sc">:</span><span class="dv">4</span>] <span class="co"># saame välja võtta mitu väärtust. &quot;:&quot; on &quot;kuni&quot; märk (teine kuni kolmas positsioon)</span></span></code></pre></div>
<pre><code>## [1] 1 4</code></pre>
<p>Andmeobjekti elemnte saab ka välja jätta.</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="sissejuhatus-r-i.html#cb87-1" aria-hidden="true" tabindex="-1"></a>see[<span class="sc">-</span><span class="dv">2</span>] <span class="co"># kõik elemendid välja arvatud teine</span></span></code></pre></div>
<pre><code>## [1]  3  1  4 10</code></pre>
<p>Indekseerida saab ka nimega.</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="sissejuhatus-r-i.html#cb89-1" aria-hidden="true" tabindex="-1"></a>see2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">a=</span><span class="dv">1</span>, <span class="at">b=</span><span class="dv">2</span>, <span class="at">c=</span><span class="dv">3</span>) <span class="co"># teeme nimedega vektori</span></span>
<span id="cb89-2"><a href="sissejuhatus-r-i.html#cb89-2" aria-hidden="true" tabindex="-1"></a>see2[<span class="st">&quot;a&quot;</span>] <span class="co"># jällegi peame kasutama jutumärke, kuna ei viita mitte andmeobjektile, </span></span></code></pre></div>
<pre><code>## a 
## 1</code></pre>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="sissejuhatus-r-i.html#cb91-1" aria-hidden="true" tabindex="-1"></a>          <span class="co"># vaid selle väärtusele</span></span></code></pre></div>
<p>Kui tahame nimega indekseerida mitut väärtust, peame kasutama indeksite vektorit, mille teeme <code>c()</code> funktsiooniga. Viitame indeksite vektoriga andmevektorile.</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="sissejuhatus-r-i.html#cb92-1" aria-hidden="true" tabindex="-1"></a>see2</span></code></pre></div>
<pre><code>## a b c 
## 1 2 3</code></pre>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="sissejuhatus-r-i.html#cb94-1" aria-hidden="true" tabindex="-1"></a>see2[<span class="fu">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;b&quot;</span>)]</span></code></pre></div>
<pre><code>## a b 
## 1 2</code></pre>
<p>Viidata saab ka loogiliste tehete või loogiliste vektoritega. Saame loogilise tehtega luua loogilise vektori, mida siis saab kasutada väärtuste väljavõtmiseks.</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="sissejuhatus-r-i.html#cb96-1" aria-hidden="true" tabindex="-1"></a>see <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">6</span>,<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">10</span>)</span>
<span id="cb96-2"><a href="sissejuhatus-r-i.html#cb96-2" aria-hidden="true" tabindex="-1"></a>see <span class="sc">&gt;</span> <span class="dv">5</span> <span class="co"># loogiline vektor</span></span></code></pre></div>
<pre><code>## [1] FALSE  TRUE FALSE FALSE  TRUE</code></pre>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="sissejuhatus-r-i.html#cb98-1" aria-hidden="true" tabindex="-1"></a>see[see <span class="sc">&gt;</span> <span class="dv">5</span>] <span class="co"># kasutame loogilist vektorit indekseerimiseks</span></span></code></pre></div>
<pre><code>## [1]  6 10</code></pre>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="sissejuhatus-r-i.html#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="co"># see[c(F,T,F,F,T)] # kui me kirjutaks loogilise vektori välja</span></span></code></pre></div>
<div class="teie-kord" style="color: red;">
<p>Ülesanne!</p>
<ol style="list-style-type: decimal">
<li>looge vektor <em>a</em> milles sisalduvad numbrid 2 8 3 6 7</li>
<li>looge vektor <em>b</em> milles sisalduvad numbrid 3 4 5 7 2</li>
<li>looge vektor <em>c</em>, mis on kahe eelmise summa</li>
<li>looge andmeobjekt <em>d</em>, mis sisaldab <em>c</em> esimest väärtust</li>
<li>looge vektor <em>e</em>, kus on <em>c</em> väärtuseid, mis on suuremad kui 10</li>
</ol>
</div>
<p><strong>Maatriksid</strong></p>
<p>Andmevektoreid saab omakorda ühendada.</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="sissejuhatus-r-i.html#cb101-1" aria-hidden="true" tabindex="-1"></a>see <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">12</span>,<span class="dv">5</span>)</span>
<span id="cb101-2"><a href="sissejuhatus-r-i.html#cb101-2" aria-hidden="true" tabindex="-1"></a>too <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">6</span>,<span class="dv">9</span>)</span>
<span id="cb101-3"><a href="sissejuhatus-r-i.html#cb101-3" aria-hidden="true" tabindex="-1"></a>loo <span class="ot">&lt;-</span> <span class="fu">cbind</span>(see, too) <span class="co"># cbind ühendab vektorid veergude kaupa, </span></span>
<span id="cb101-4"><a href="sissejuhatus-r-i.html#cb101-4" aria-hidden="true" tabindex="-1"></a>                       <span class="co"># ridade kaupa ühendamiseks on funktsioon rbind()</span></span>
<span id="cb101-5"><a href="sissejuhatus-r-i.html#cb101-5" aria-hidden="true" tabindex="-1"></a>loo</span></code></pre></div>
<pre><code>##      see too
## [1,]  12   6
## [2,]   5   9</code></pre>
<p>Tulemuseks on uus andmeobjekt, mis kuulub klassi <em>matrix</em>.</p>
<p>Saame ka <code>matrix()</code> funktsiooniga maatrikseid teha:</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="sissejuhatus-r-i.html#cb103-1" aria-hidden="true" tabindex="-1"></a>loo <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">12</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">9</span>), <span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">byrow =</span> T)</span>
<span id="cb103-2"><a href="sissejuhatus-r-i.html#cb103-2" aria-hidden="true" tabindex="-1"></a>loo</span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]   12    5
## [2,]    6    9</code></pre>
<p>Maatriksi veergudele ja ridadele saame nimesid anda:</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="sissejuhatus-r-i.html#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(loo) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;esimene_veerg&quot;</span>, <span class="st">&quot;teine_veerg&quot;</span>)</span>
<span id="cb105-2"><a href="sissejuhatus-r-i.html#cb105-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(loo) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;esimene_rida&quot;</span>, <span class="st">&quot;teine_rida&quot;</span>)</span>
<span id="cb105-3"><a href="sissejuhatus-r-i.html#cb105-3" aria-hidden="true" tabindex="-1"></a>loo</span></code></pre></div>
<pre><code>##              esimene_veerg teine_veerg
## esimene_rida            12           5
## teine_rida               6           9</code></pre>
<p><strong>Andmeobjektide klassid</strong></p>
<p>Erinevatel andmeobjektidel on erinevad klassid. Klassid tulenevad sellest, millist tüüpi andmed selles andmeobjektis on (numbrilised, tekstilised, loogilised jne).</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="sissejuhatus-r-i.html#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(see)</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="sissejuhatus-r-i.html#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(loo)</span></code></pre></div>
<pre><code>## [1] &quot;matrix&quot; &quot;array&quot;</code></pre>
<p>Enamikes andmeobjektides saab olla vaid ühte tüüpi elemente. Kui numbrilises vektoris on näiteks üks tekstiline väärtus, siis arvestab R seda vektorit kui tekstilist (kuna numrit on võimalik tekstiliseks teha, kuid teksti numbriks mitte). Näiteks maatriksis võivad olla vaid numbrilised väärtused.</p>
<p>Üks andmeobjekt on siinkohal erandlik. Selleks on “list,” kus võib korraga olla erinevat tüüpi andmeid.</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="sissejuhatus-r-i.html#cb111-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span>, <span class="fu">c</span>(<span class="st">&quot;b&quot;</span>, <span class="st">&quot;d&quot;</span>))</span>
<span id="cb111-2"><a href="sissejuhatus-r-i.html#cb111-2" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## [[1]]
## [1] 1
## 
## [[2]]
## [1] &quot;b&quot; &quot;d&quot;</code></pre>
<div class="teie-kord" style="color: red;">
<p>Ülesanne!</p>
<ol style="list-style-type: decimal">
<li>teil on andmevektorid <em>a, b, c</em>. Ühendage need veergupidi andmestikuks <em>koos</em></li>
<li>mis on selle andmeobjekti klass?</li>
</ol>
</div>
<p><strong>Data frame (andmestik)</strong></p>
<p>Kui meil on mingi andmestik, siis üldjuhul on seal erinevat liiki tunnuseid, nii arvtunnuseid kui kategoriaalseid ehk faktortunnuseid jne. Sellise andmebaasi jaoks on R’is eraldi andmeobjekti formaat - <em>data.frame</em>.<br />
<em>data.frame</em> on iseenesest list, aga omapärane selles mõttes, et tema read peavad olema ühepikkused ja veerud peavad olema ühepikkused. Põhimõtteliselt on data.frame siis selline andmeobjekt, kus ridadeks on vaatlused ja veergudeks tunnused.</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="sissejuhatus-r-i.html#cb113-1" aria-hidden="true" tabindex="-1"></a>nimi <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Jaan&quot;</span>, <span class="st">&quot;Mari&quot;</span>, <span class="st">&quot;Kadri&quot;</span>, <span class="st">&quot;Mati&quot;</span>)</span>
<span id="cb113-2"><a href="sissejuhatus-r-i.html#cb113-2" aria-hidden="true" tabindex="-1"></a>vanus <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">29</span>, <span class="dv">42</span>, <span class="dv">35</span>, <span class="dv">52</span>)</span>
<span id="cb113-3"><a href="sissejuhatus-r-i.html#cb113-3" aria-hidden="true" tabindex="-1"></a>hinnang <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">1.438</span>, <span class="fl">2.763</span>, <span class="fl">1.548</span>, <span class="dv">2</span>)</span>
<span id="cb113-4"><a href="sissejuhatus-r-i.html#cb113-4" aria-hidden="true" tabindex="-1"></a>see <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(nimi, vanus, hinnang) <span class="co"># ühendame tunnused andmestikuks</span></span>
<span id="cb113-5"><a href="sissejuhatus-r-i.html#cb113-5" aria-hidden="true" tabindex="-1"></a>see</span></code></pre></div>
<pre><code>##    nimi vanus hinnang
## 1  Jaan    29   1.438
## 2  Mari    42   2.763
## 3 Kadri    35   1.548
## 4  Mati    52   2.000</code></pre>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="sissejuhatus-r-i.html#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="co"># saab ka nii (siin peame kasutama võrdusmärki)</span></span>
<span id="cb115-2"><a href="sissejuhatus-r-i.html#cb115-2" aria-hidden="true" tabindex="-1"></a>see <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">nimi =</span> <span class="fu">c</span>(<span class="st">&quot;Jaan&quot;</span>, <span class="st">&quot;Mari&quot;</span>, <span class="st">&quot;Kadri&quot;</span>, <span class="st">&quot;Mati&quot;</span>),</span>
<span id="cb115-3"><a href="sissejuhatus-r-i.html#cb115-3" aria-hidden="true" tabindex="-1"></a>                  <span class="at">vanus =</span> <span class="fu">c</span>(<span class="dv">29</span>, <span class="dv">42</span>, <span class="dv">35</span>, <span class="dv">52</span>),</span>
<span id="cb115-4"><a href="sissejuhatus-r-i.html#cb115-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">hinnang =</span> <span class="fu">c</span>(<span class="fl">1.438</span>, <span class="fl">2.763</span>, <span class="fl">1.548</span>, <span class="dv">2</span>))</span></code></pre></div>
<p>Kui meil juba on mingi andmetabel, näiteks maatriks, saame selle muuta data.frameiks funktsiooniga <code>as.data.frame()</code></p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="sissejuhatus-r-i.html#cb116-1" aria-hidden="true" tabindex="-1"></a>loo <span class="ot">&lt;-</span> <span class="fu">cbind</span>(<span class="fu">c</span>(<span class="dv">12</span>,<span class="dv">5</span>), <span class="fu">c</span>(<span class="dv">6</span>,<span class="dv">9</span>))</span>
<span id="cb116-2"><a href="sissejuhatus-r-i.html#cb116-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-3"><a href="sissejuhatus-r-i.html#cb116-3" aria-hidden="true" tabindex="-1"></a><span class="fu">as.data.frame</span>(loo)</span></code></pre></div>
<p>Sarnaselt vektoritele saame indekseerida ka data.frame’i (maatrikseid samuti). Kuna aga data.frame on kahedimensionaalne, peame kasutama kahte indeksit. Esiteks rea ja teiseks veeru indeks.
Tahame teada Kadri vanust, seega 3 rida ja 2 veerg:</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="sissejuhatus-r-i.html#cb117-1" aria-hidden="true" tabindex="-1"></a>see[<span class="dv">2</span>,<span class="dv">3</span>]</span></code></pre></div>
<pre><code>## [1] 2.763</code></pre>
<p>Kui jätame veeru koha tühjaks, valitakse kõik veerud.</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="sissejuhatus-r-i.html#cb119-1" aria-hidden="true" tabindex="-1"></a>see[<span class="dv">2</span>,]</span></code></pre></div>
<pre><code>##   nimi vanus hinnang
## 2 Mari    42   2.763</code></pre>
<p>Kui jätame rea koha tühjaks, valitakse kõik read</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="sissejuhatus-r-i.html#cb121-1" aria-hidden="true" tabindex="-1"></a>see[,<span class="dv">3</span>]</span></code></pre></div>
<pre><code>## [1] 1.438 2.763 1.548 2.000</code></pre>
<p>Kui tahame valida mingit tunnust (veergu) siis võime kasutada selle numbrilist või nimelist indeksit</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="sissejuhatus-r-i.html#cb123-1" aria-hidden="true" tabindex="-1"></a>see[,<span class="st">&quot;nimi&quot;</span>] <span class="co"># tahame nime veeru kõiki ridu, seega jätame indekseerimisel rea koha tühjaks </span></span></code></pre></div>
<pre><code>## [1] &quot;Jaan&quot;  &quot;Mari&quot;  &quot;Kadri&quot; &quot;Mati&quot;</code></pre>
<p>Võime valida ka mitu veergu või rida korraga.</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="sissejuhatus-r-i.html#cb125-1" aria-hidden="true" tabindex="-1"></a>see[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>]</span></code></pre></div>
<pre><code>##   nimi vanus
## 1 Jaan    29
## 2 Mari    42</code></pre>
<p>Seega saame valida ainult mingi, meile vajaliku osa datasetist</p>
<p>Teine viis veeru ehk tunnuse valimiseks on $ märk</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="sissejuhatus-r-i.html#cb127-1" aria-hidden="true" tabindex="-1"></a>see<span class="sc">$</span>nimi</span></code></pre></div>
<pre><code>## [1] &quot;Jaan&quot;  &quot;Mari&quot;  &quot;Kadri&quot; &quot;Mati&quot;</code></pre>
<div class="teie-kord" style="color: red;">
<p>Ülesanne!</p>
<ol style="list-style-type: decimal">
<li>Teil on andmestik <em>koos</em>. Tehke see data.frameiks</li>
<li>Võtke sealt välja esimene rida</li>
<li>Võtke sealt välja veerg <em>c</em> ja salvestage see eraldi andmeobjektina</li>
<li>Kasutades alternatiivset viisi, võtke välja veerg <em>b</em></li>
</ol>
</div>
<p><strong>Data frame’i modifitseerimine</strong></p>
<p>Data.frame’i väärtuste muutmisel saame jälle indekseid kasutada:</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="sissejuhatus-r-i.html#cb129-1" aria-hidden="true" tabindex="-1"></a>see<span class="sc">$</span>hinnang[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="co"># muudame hinnangu tunnuse esimese väärtuse 1-ks</span></span>
<span id="cb129-2"><a href="sissejuhatus-r-i.html#cb129-2" aria-hidden="true" tabindex="-1"></a>see[<span class="dv">1</span>, <span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="co"># sama mis eelmine</span></span>
<span id="cb129-3"><a href="sissejuhatus-r-i.html#cb129-3" aria-hidden="true" tabindex="-1"></a>see</span></code></pre></div>
<pre><code>##    nimi vanus hinnang
## 1  Jaan    29   1.000
## 2  Mari    42   2.763
## 3 Kadri    35   1.548
## 4  Mati    52   2.000</code></pre>
<p>Data.frame’i uute tunnuste lisamine:</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="sissejuhatus-r-i.html#cb131-1" aria-hidden="true" tabindex="-1"></a>see<span class="sc">$</span>rahulolu <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">5</span>)</span>
<span id="cb131-2"><a href="sissejuhatus-r-i.html#cb131-2" aria-hidden="true" tabindex="-1"></a>see<span class="sc">$</span>sugu <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;m&quot;</span>, <span class="st">&quot;n&quot;</span>, <span class="st">&quot;n&quot;</span>, <span class="st">&quot;m&quot;</span>)</span>
<span id="cb131-3"><a href="sissejuhatus-r-i.html#cb131-3" aria-hidden="true" tabindex="-1"></a>see</span></code></pre></div>
<pre><code>##    nimi vanus hinnang rahulolu sugu
## 1  Jaan    29   1.000        2    m
## 2  Mari    42   2.763        4    n
## 3 Kadri    35   1.548        3    n
## 4  Mati    52   2.000        5    m</code></pre>
<p>Data.frame’i tunnuste kustutamine:</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="sissejuhatus-r-i.html#cb133-1" aria-hidden="true" tabindex="-1"></a>see<span class="sc">$</span>rahulolu <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb133-2"><a href="sissejuhatus-r-i.html#cb133-2" aria-hidden="true" tabindex="-1"></a>see</span></code></pre></div>
<pre><code>##    nimi vanus hinnang sugu
## 1  Jaan    29   1.000    m
## 2  Mari    42   2.763    n
## 3 Kadri    35   1.548    n
## 4  Mati    52   2.000    m</code></pre>
<p>Saame ridade valimiseks (indekseerimiseks) kasutada loogilisi tehteid ja seega välja võtta just need vaatlused mida vajame.</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="sissejuhatus-r-i.html#cb135-1" aria-hidden="true" tabindex="-1"></a>see[see<span class="sc">$</span>vanus <span class="sc">&lt;</span> <span class="dv">40</span>, ]</span></code></pre></div>
<pre><code>##    nimi vanus hinnang sugu
## 1  Jaan    29   1.000    m
## 3 Kadri    35   1.548    n</code></pre>
<p>Samal ajal saame saame võtta ka ainult vajalikud veerud:</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="sissejuhatus-r-i.html#cb137-1" aria-hidden="true" tabindex="-1"></a>see[see<span class="sc">$</span>vanus <span class="sc">&lt;</span> <span class="dv">40</span>, <span class="fu">c</span>(<span class="st">&quot;nimi&quot;</span>, <span class="st">&quot;vanus&quot;</span>)]</span></code></pre></div>
<pre><code>##    nimi vanus
## 1  Jaan    29
## 3 Kadri    35</code></pre>
<p>Nii saame teha andmestikust alamandmestiku, is vastab konkreetsetele tingimustele (subseti loomine):</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="sissejuhatus-r-i.html#cb139-1" aria-hidden="true" tabindex="-1"></a>uus <span class="ot">&lt;-</span> see[see<span class="sc">$</span>sugu <span class="sc">==</span> <span class="st">&quot;n&quot;</span>, <span class="fu">c</span>(<span class="st">&quot;nimi&quot;</span>, <span class="st">&quot;hinnang&quot;</span>)]</span>
<span id="cb139-2"><a href="sissejuhatus-r-i.html#cb139-2" aria-hidden="true" tabindex="-1"></a>uus</span></code></pre></div>
<pre><code>##    nimi hinnang
## 2  Mari   2.763
## 3 Kadri   1.548</code></pre>
<p>Selleks saab kasutada ka <code>subset()</code> funktsiooni:</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="sissejuhatus-r-i.html#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="fu">subset</span>(see, sugu <span class="sc">==</span> <span class="st">&quot;n&quot;</span>, <span class="at">select =</span> <span class="fu">c</span>(<span class="st">&quot;nimi&quot;</span>, <span class="st">&quot;hinnang&quot;</span>))</span></code></pre></div>
<pre><code>##    nimi hinnang
## 2  Mari   2.763
## 3 Kadri   1.548</code></pre>
<div class="teie-kord" style="color: red;">
<p>Ülesanne!</p>
<ol style="list-style-type: decimal">
<li>Lisage oma andmeobjektile <em>koos</em> uus tunnus <em>f</em>, milles sisalduvad tähed a i a i a</li>
<li>Looge uus data.frame, mis sisaldab tunnuseid <em>a, b</em> ja ainult ridu, mille väärtus tunnuses <em>f</em> on a</li>
</ol>
</div>
<p><strong>Faktorid</strong></p>
<p>Faktorid on R’i kategoriaalsed tunnused. Mõned meetodid vajavad sisendiks faktoreid. Võime tekstilise tunnuse (või ka numbrilise) muuta faktoriks funktsiooniga <code>as.factor()</code>.</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="sissejuhatus-r-i.html#cb143-1" aria-hidden="true" tabindex="-1"></a>x1 <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(<span class="fu">c</span>(<span class="st">&quot;punane&quot;</span>, <span class="st">&quot;roheline&quot;</span>, <span class="st">&quot;sinine&quot;</span>, <span class="st">&quot;sinine&quot;</span>))</span>
<span id="cb143-2"><a href="sissejuhatus-r-i.html#cb143-2" aria-hidden="true" tabindex="-1"></a>x1</span></code></pre></div>
<pre><code>## [1] punane   roheline sinine   sinine  
## Levels: punane roheline sinine</code></pre>
<p>Aga faktortasemed on järjestatud tähestiku järgi. Üldjuhul on meil ikkagi mingi oma järjekord. Peaksime selle määrama nii:</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="sissejuhatus-r-i.html#cb145-1" aria-hidden="true" tabindex="-1"></a>x1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;punane&quot;</span>, <span class="st">&quot;roheline&quot;</span>, <span class="st">&quot;sinine&quot;</span>, <span class="st">&quot;sinine&quot;</span>)</span>
<span id="cb145-2"><a href="sissejuhatus-r-i.html#cb145-2" aria-hidden="true" tabindex="-1"></a>x1 <span class="ot">&lt;-</span> <span class="fu">factor</span>(x1, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;sinine&quot;</span>, <span class="st">&quot;roheline&quot;</span>, <span class="st">&quot;punane&quot;</span>))</span>
<span id="cb145-3"><a href="sissejuhatus-r-i.html#cb145-3" aria-hidden="true" tabindex="-1"></a>x1</span></code></pre></div>
<pre><code>## [1] punane   roheline sinine   sinine  
## Levels: sinine roheline punane</code></pre>
<p>Mis aga juhtub kui me ühe taseme kogemata ära unustame:</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="sissejuhatus-r-i.html#cb147-1" aria-hidden="true" tabindex="-1"></a>x1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;punane&quot;</span>, <span class="st">&quot;roheline&quot;</span>, <span class="st">&quot;sinine&quot;</span>, <span class="st">&quot;sinine&quot;</span>)</span>
<span id="cb147-2"><a href="sissejuhatus-r-i.html#cb147-2" aria-hidden="true" tabindex="-1"></a>x1 <span class="ot">&lt;-</span> <span class="fu">factor</span>(x1, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;sinine&quot;</span>, <span class="st">&quot;roheline&quot;</span>))</span>
<span id="cb147-3"><a href="sissejuhatus-r-i.html#cb147-3" aria-hidden="true" tabindex="-1"></a>x1</span></code></pre></div>
<pre><code>## [1] &lt;NA&gt;     roheline sinine   sinine  
## Levels: sinine roheline</code></pre>
<p>Seega faktorid võivad teatud kohtades natukene ohtlikud olla ning nende kasutamisel peab tähelepanelik olema.</p>
<div class="teie-kord" style="color: red;">
<p>Ülesanne!</p>
<ol style="list-style-type: decimal">
<li>looge oma andmestikku <em>koos</em> juurde faktortunnus <em>g</em>, milles sisalduvad tähed r t r t r</li>
</ol>
</div>
<p><strong>Andmeobjektide kustutamine</strong></p>
<p>R jätab kõik konkreetse sessiooni ajal loodud või imporditud andmeobjektid mällu.
Andmeobjektide kustutamine käib funktsiooniga <code>rm()</code>.</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="sissejuhatus-r-i.html#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(x)</span></code></pre></div>
<p>Kui tahame kustutada kõik mälus olevad andmeobjektid, siis …</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="sissejuhatus-r-i.html#cb150-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list=</span><span class="fu">ls</span>())</span></code></pre></div>
<p><strong>R’i paketid</strong></p>
<p>Paljud funktsioonid on kaasas “baas”R’iga. Lisaks neile on aga suur hulk funktsioone, mida on võimalik pakettidena juurde installida.<br />
Paketid on kasutajate eneste poolt kirjutatud. Mõned neist on väga spetsiifilised, teised jällegi väga laialdaselt kasutatavad. Hetkel on ligi 13 700 paketti (kaks aastat tagasi oli neid veel 10 000).<br />
Et paketti kasutada, tuleb see esmalt installida.</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="sissejuhatus-r-i.html#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;ggplot2&quot;</span>) <span class="co"># jutumärgid on vajalikud</span></span></code></pre></div>
<p>Kui pakett on installitud, tuleb see R’i mällu laadida (igaks sessiooniks uuesti).</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="sissejuhatus-r-i.html#cb152-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2) <span class="co"># jutumärgid ei ole vajalikud</span></span></code></pre></div>
<p>Miks peab enne igat sessiooni paketi uuesti laadima?<br />
Kuna pakette on väga palju ja neis funktsioone veelgi rohkem, siis hakkavad funktsioonide nimed korduma. Et seda vältida, ongi mõistlik laadida vaid need paketid, mida konkreetse sessiooni ajal otseselt vaja on.<br />
Funktsioonide nimed võivad kattuda isegi väheste laaditud pakettide korral. Sellisel juhul kasutab R viimati laetud paketi funktsiooni.</p>
</div>
<div id="andmetega-töötamine" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> Andmetega töötamine</h2>
<p><strong>Andmete sisselugemine</strong></p>
<p>Andmete sisselugemiseks on mitmeid erinevaid funktsioone, mille valik sõltub sellest mis formaadis meie andmed on.<br />
Kõige mõistlikum viis andmeid hoida on .csv fail (<em>comma separated value</em>). Näiteks Excelis saab andmetabeli csv’ks salvestada (save as). Samuti Statas, SPSS’is jne. Olenevalt sellest mida me numbri komakohana kasutame (“.” või “,”), saab csv faili laadida funktsiooniga <code>read.csv()</code> või <code>read.csv2</code>.</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="sissejuhatus-r-i.html#cb153-1" aria-hidden="true" tabindex="-1"></a>andmed <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;C:/Users/Mina/Kvant analüüsi meetodid II (2019)/Andmed/andmed.csv&quot;</span>)</span></code></pre></div>
<p>Kindlasti tuleb andmed kuhugi andmeobjekti (data.frame’i) sisse lugeda, muidu kuvatakse nad lihtsalt konsooli.<br />
<em>faili path</em> peab olema jutumärkides. Kaldkriipsud on teistpidi kui folderi käsujoonel.</p>
<p>Aegajalt juhtub, et loete täiesti korralikud andmed sisse, kuid kui neid R-is vaatate, siis on ü-de, ä-de ö-de või õ-de asemel mingid imelikud krõnksud. Sellisel puhul on üldjuhul tegemist <em>encoding</em>’u probleemiga, st R ei saa aru kuidas arvutikeelt (see kuidas kõik tekstid ja andmed jne arvutisiseselt salvestatud on) inimkeelde tõlkida. Maailmas kasutatakse selleks erinevaid kodeeringuid, mis lähtuvad erinevatest tähestikest ja sümbolitest. Üks univesaalseid kodeeringuid, mis tuleb toime praktiliselt kõikvõimalike sümolite ja tähestikega on <em>UTF-8</em>. Kui nüüd juhtub, et teie sissetõmmatud andmete puhul esineb taoline <em>encoding</em>’u probleem, siis <code>read.csv()</code> funktsioonil on vastav parameeter, millega saate sobiliku <em>encoding</em>’u määrata.</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="sissejuhatus-r-i.html#cb154-1" aria-hidden="true" tabindex="-1"></a>andmed <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;C:/Users/Mina/Kvant analüüsi meetodid II (2019)/Andmed/andmed.csv&quot;</span>,</span>
<span id="cb154-2"><a href="sissejuhatus-r-i.html#cb154-2" aria-hidden="true" tabindex="-1"></a>                   <span class="at">fileEncoding =</span> <span class="st">&quot;UTF-8&quot;</span>)</span></code></pre></div>
<p>On ka üks mugav pakett <em>csv</em> failide sissetõmbamiseks, kus see <em>encoding</em> on juba automaatselt määratud - <em>readr</em> ja selle funktsioon <code>read_csv()</code> (või <code>read_csv2()</code>).</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="sissejuhatus-r-i.html#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;readr&quot;</span>)</span>
<span id="cb155-2"><a href="sissejuhatus-r-i.html#cb155-2" aria-hidden="true" tabindex="-1"></a>andmed <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;C:/Users/Mina/Kvant analüüsi meetodid II (2019)/Andmed/andmed.csv&quot;</span></span></code></pre></div>
<p>Kui andmed on näiteks SPSS faili kujul (ja teil ei ole SPSS’i, et neid ümber salvestada) aitab pakett <em>haven</em> ja funktsioon <code>read_spss()</code> (Stata faili puhul <code>read_dta()</code>). Exceli faile saab sisse tõmmata paketi <em>readxl</em> funktsiooniga <code>read_excel()</code>.</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="sissejuhatus-r-i.html#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;haven&quot;</span>)</span>
<span id="cb156-2"><a href="sissejuhatus-r-i.html#cb156-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>)</span>
<span id="cb156-3"><a href="sissejuhatus-r-i.html#cb156-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(haven)</span>
<span id="cb156-4"><a href="sissejuhatus-r-i.html#cb156-4" aria-hidden="true" tabindex="-1"></a>andmed <span class="ot">&lt;-</span> <span class="fu">read_spss</span>(<span class="st">&quot;andmed.sav&quot;</span>)</span></code></pre></div>
<p>Viimase funktsiooniga ei kasutanud ma faili pathi. Kui me oleme määranud <em>working directory</em>’ks ehk Ri konkreetse sessiooni töökataloogiks selle kataloogi, kus andmed parajasti on, siis ei ole seda vaja teha. <em>working directory</em> saab määrata ka funktsiooniga <code>setwd()</code>.</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="sissejuhatus-r-i.html#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">&quot;C:/Users/Mina/Kvant analüüsi meetodid II (2019)/Andmed/andmed.csv&quot;</span>)</span></code></pre></div>
<p><em>Working directory</em>’sse salvestuvad ka kõik asjad mida me R’is salvestame (graafikud, andmed jne). Kui Kasutame R’i projekti, siis on wd automaatselt projektikataloog.</p>
<p><strong>Andmete salvestamine</strong></p>
<p>Andmete salvestamine .csv formaati käib <code>write.csv()</code> funktsiooniga (ja üldiselt me tahame neid sellesse formaati salvestada).</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="sissejuhatus-r-i.html#cb158-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(andmed, <span class="at">file=</span><span class="st">&quot;C:/Users/Mina/Kvant analüüsi meetodid II/Andmed/andmed.csv&quot;</span>)</span></code></pre></div>
<p>Teine (ja tegelikult eelistatum) salvestamisviis on <em>readr</em> funktsioon <code>write_csv()</code>.</p>
<p>R’il on ka oma salvestusformaat. Kui on aga plaanis andmeid pikemalt salvestada, teise arvutiga kasutada või kellegagi jagada, siis ei ole mõistlik Rdata salvestusvisi kasutada, kuna RData fail on konkreetse Ri konfiguratsiooni spetsiifiline.</p>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="sissejuhatus-r-i.html#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(see, <span class="at">file =</span> <span class="st">&quot;see.RData&quot;</span>) <span class="co">#salvestamine</span></span>
<span id="cb159-2"><a href="sissejuhatus-r-i.html#cb159-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(see)</span>
<span id="cb159-3"><a href="sissejuhatus-r-i.html#cb159-3" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;see.RData&quot;</span>) <span class="co"># sisse laadimine</span></span></code></pre></div>
<p><strong>Andestikust ülevaate saamine</strong></p>
<p>R’is on mitmeid näidisandmestikke. Võtame neist ühe ja salvestame eraldi andmeobjekti.</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="sissejuhatus-r-i.html#cb160-1" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> iris</span></code></pre></div>
<p>Vaatame andmestiku struktuuri</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="sissejuhatus-r-i.html#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dat)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    150 obs. of  5 variables:
##  $ Sepal.Length: num  5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...
##  $ Sepal.Width : num  3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ...
##  $ Petal.Length: num  1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...
##  $ Petal.Width : num  0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ...
##  $ Species     : Factor w/ 3 levels &quot;setosa&quot;,&quot;versicolor&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...</code></pre>
<p>Mitu rida ja mitu veergu andmestikus on (ehk siis dimensioonid)?</p>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="sissejuhatus-r-i.html#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(dat)</span></code></pre></div>
<pre><code>## [1] 150   5</code></pre>
<p>Tunnuste nimed</p>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="sissejuhatus-r-i.html#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(dat)</span></code></pre></div>
<pre><code>## [1] &quot;Sepal.Length&quot; &quot;Sepal.Width&quot;  &quot;Petal.Length&quot; &quot;Petal.Width&quot;  &quot;Species&quot;</code></pre>
<p>Andmestiku esimesed read</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="sissejuhatus-r-i.html#cb167-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dat)</span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
## 4          4.6         3.1          1.5         0.2  setosa
## 5          5.0         3.6          1.4         0.2  setosa
## 6          5.4         3.9          1.7         0.4  setosa</code></pre>
<p>Kuna R eristab suuri ja väikesi tähti, siis oleks lihtsam kui kõik tunnuste nimed olekid väikestes tähtedes. Kasutame funktsiooni <code>tolower()</code>:</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="sissejuhatus-r-i.html#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(dat) <span class="ot">&lt;-</span> <span class="fu">tolower</span>(<span class="fu">names</span>(dat))</span></code></pre></div>
<p>Vaatame, mis klassist on tunnus <em>species</em>:</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="sissejuhatus-r-i.html#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(dat<span class="sc">$</span>species)</span></code></pre></div>
<pre><code>## [1] &quot;factor&quot;</code></pre>
<p>Mhh. Faktor. Mis faktorlevelid on?</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="sissejuhatus-r-i.html#cb172-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(dat<span class="sc">$</span>species)</span></code></pre></div>
<pre><code>## [1] &quot;setosa&quot;     &quot;versicolor&quot; &quot;virginica&quot;</code></pre>
<p>Ülevaade kõikidest tunnustest (kui on suur andmebaas, siis oleks mõistlik valida ainult mõned tunnused (indeksitega siis)):</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="sissejuhatus-r-i.html#cb174-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(dat)</span></code></pre></div>
<pre><code>##   sepal.length    sepal.width     petal.length    petal.width   
##  Min.   :4.300   Min.   :2.000   Min.   :1.000   Min.   :0.100  
##  1st Qu.:5.100   1st Qu.:2.800   1st Qu.:1.600   1st Qu.:0.300  
##  Median :5.800   Median :3.000   Median :4.350   Median :1.300  
##  Mean   :5.843   Mean   :3.057   Mean   :3.758   Mean   :1.199  
##  3rd Qu.:6.400   3rd Qu.:3.300   3rd Qu.:5.100   3rd Qu.:1.800  
##  Max.   :7.900   Max.   :4.400   Max.   :6.900   Max.   :2.500  
##        species  
##  setosa    :50  
##  versicolor:50  
##  virginica :50  
##                 
##                 
## </code></pre>
<p><strong>Kirjeldav statistika</strong></p>
<p>Mõned olulisemad funktsioonid</p>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="sissejuhatus-r-i.html#cb176-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(dat<span class="sc">$</span>sepal.length) <span class="co">#aritmeetiline keskmine</span></span></code></pre></div>
<pre><code>## [1] 5.843333</code></pre>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="sissejuhatus-r-i.html#cb178-1" aria-hidden="true" tabindex="-1"></a><span class="fu">median</span>(dat<span class="sc">$</span>sepal.length) <span class="co"># mediaan</span></span></code></pre></div>
<pre><code>## [1] 5.8</code></pre>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="sissejuhatus-r-i.html#cb180-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sd</span>(dat<span class="sc">$</span>sepal.length) <span class="co"># standardhälve</span></span></code></pre></div>
<pre><code>## [1] 0.8280661</code></pre>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="sissejuhatus-r-i.html#cb182-1" aria-hidden="true" tabindex="-1"></a><span class="fu">var</span>(dat<span class="sc">$</span>sepal.length) <span class="co">#dispersioon</span></span></code></pre></div>
<pre><code>## [1] 0.6856935</code></pre>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="sissejuhatus-r-i.html#cb184-1" aria-hidden="true" tabindex="-1"></a><span class="fu">max</span>(dat<span class="sc">$</span>sepal.length) <span class="co">#maksimaalne väärtus</span></span></code></pre></div>
<pre><code>## [1] 7.9</code></pre>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="sissejuhatus-r-i.html#cb186-1" aria-hidden="true" tabindex="-1"></a><span class="fu">min</span>(dat<span class="sc">$</span>sepal.length) <span class="co">#minimaalne väärtus</span></span></code></pre></div>
<pre><code>## [1] 4.3</code></pre>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="sissejuhatus-r-i.html#cb188-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(dat<span class="sc">$</span>sepal.length) <span class="co">#vaatluste arv, tunnuse pikkus</span></span></code></pre></div>
<pre><code>## [1] 150</code></pre>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="sissejuhatus-r-i.html#cb190-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(dat<span class="sc">$</span>sepal.length) <span class="co">#summa</span></span></code></pre></div>
<pre><code>## [1] 876.5</code></pre>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="sissejuhatus-r-i.html#cb192-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(dat<span class="sc">$</span>sepal.length, dat<span class="sc">$</span>sepal.width) <span class="co">#korrelatsioon</span></span></code></pre></div>
<pre><code>## [1] -0.1175698</code></pre>
<p>Kui tunnuses on puuduvad väärtused, siis paljud funktsioonid ei tööta</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="sissejuhatus-r-i.html#cb194-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> dat<span class="sc">$</span>sepal.length</span>
<span id="cb194-2"><a href="sissejuhatus-r-i.html#cb194-2" aria-hidden="true" tabindex="-1"></a>x[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span> <span class="co"># muudame ühe väärtuse puuduolevaks</span></span>
<span id="cb194-3"><a href="sissejuhatus-r-i.html#cb194-3" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(x)</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<p>Et puuduvaid väärtusi mitte arvestada, kasutame <code>na.rm</code> argumenti (mõnedel funktsioonidel on teistsugused missingute argumendid, vaadake help’i)</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="sissejuhatus-r-i.html#cb196-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(x, <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## [1] 5.851007</code></pre>
<div class="teie-kord" style="color: red;">
<p>Ülesanne!</p>
<ol style="list-style-type: decimal">
<li>Leidke tunnuse <em>sepal.width</em> keskmine ilma funktsiooni <code>mean()</code> kasutamata</li>
<li>Tegime tunnusest <em>sepal.length</em> uue andmeobjekti <em>x</em> (kus on üks puuduv väärtus). Leidke <em>x</em>’i korrelatsioon <em>sepal.width</em>’iga (vajadusel kasutage helpi)</li>
</ol>
</div>
<p><strong>Tabelid</strong></p>
<p>Kategoriaalsetele tunnustele tabelid</p>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="sissejuhatus-r-i.html#cb198-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(dat<span class="sc">$</span>species)</span></code></pre></div>
<pre><code>## 
##     setosa versicolor  virginica 
##         50         50         50</code></pre>
<p>Risttabeli jaoks on meil ka teist faktortunnust (või tekstilist tunnust) vaja. Teeme ise ühe</p>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="sissejuhatus-r-i.html#cb200-1" aria-hidden="true" tabindex="-1"></a>dat<span class="sc">$</span>kat <span class="ot">&lt;-</span> <span class="fu">cut</span>(dat<span class="sc">$</span>sepal.length, <span class="at">breaks =</span> <span class="dv">3</span>, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;L&quot;</span>, <span class="st">&quot;K&quot;</span>, <span class="st">&quot;P&quot;</span>)) <span class="co"># funktsioon cut() lõikab arvtunnuse kategooriateks, breaks argumendiga saab määrata mitmeks kategooriaks (võib ka cut-pointid ette anda, nt breaks=c(2,3,4))</span></span></code></pre></div>
<p>Risttabel</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="sissejuhatus-r-i.html#cb201-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(dat<span class="sc">$</span>species, dat<span class="sc">$</span>kat)</span></code></pre></div>
<pre><code>##             
##               L  K  P
##   setosa     47  3  0
##   versicolor 11 36  3
##   virginica   1 32 17</code></pre>
<p>Saame juurde panna rea ja veeru summad (selleks peab tabel enne olemas olema)</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="sissejuhatus-r-i.html#cb203-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">table</span>(dat<span class="sc">$</span>species, dat<span class="sc">$</span>kat)</span>
<span id="cb203-2"><a href="sissejuhatus-r-i.html#cb203-2" aria-hidden="true" tabindex="-1"></a><span class="fu">addmargins</span>(x)</span></code></pre></div>
<pre><code>##             
##                L   K   P Sum
##   setosa      47   3   0  50
##   versicolor  11  36   3  50
##   virginica    1  32  17  50
##   Sum         59  71  20 150</code></pre>
<p><em>Margin</em>’eid võib lisada ka ainult veerule või ainult reale, samuti võivad need midagi muud kui summa olla (vaata funktsiooni helpi)</p>
<p>Proportsioonide tabel</p>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="sissejuhatus-r-i.html#cb205-1" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.table</span>(x)</span></code></pre></div>
<pre><code>##             
##                        L           K           P
##   setosa     0.313333333 0.020000000 0.000000000
##   versicolor 0.073333333 0.240000000 0.020000000
##   virginica  0.006666667 0.213333333 0.113333333</code></pre>
<p><em>Default</em> on proportsioon kogusummast. Aga võime ka argumendiga 1 määrata rea proportsiooni või argumendiga 2 veeru proportsiooni.</p>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="sissejuhatus-r-i.html#cb207-1" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.table</span>(x, <span class="dv">1</span>)</span>
<span id="cb207-2"><a href="sissejuhatus-r-i.html#cb207-2" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.table</span>(x, <span class="dv">2</span>)</span></code></pre></div>
<div id="dplyr" class="section level3" number="2.2.1">
<h3><span class="header-section-number">2.2.1</span> dplyr</h3>
<p><em>Dplyr</em> on väga funktsionaalne pakett data.frame’is olevate andmete töötlemiseks, kirjeldamiseks ja transformeerimiseks.<br />
Praktiliselt kogu andmetöötluse saab <em>dplyr</em>’i abil ära teha.<br />
<em>Dplyr</em> põhineb viiel peamisel funktsioonil:<br />
- <code>filter()</code> - vaatluste filtreerimine mingite kriteeriumite alusel<br />
- <code>select()</code> - tunnuste valimine<br />
- <code>arrange()</code> - andmete järjestamine mingi tunnuse põhjal<br />
- <code>mutate()</code> - uue tunnuse tegemine<br />
- <code>summarise()</code> - tunnuste summeerimine</p>
<p>Lisaks veel funktsioon <code>group_by()</code>, millega saab andmestiku mingi tunnuse alusel gruppideks jaotada ja siis igale grupile näiteks summarise() funktsiooni rakendada.</p>
<p>Kõigepealt installime ja laadime dplyr’i ja ühe näidisandmestiku</p>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="sissejuhatus-r-i.html#cb208-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;dplyr&quot;</span>)</span>
<span id="cb208-2"><a href="sissejuhatus-r-i.html#cb208-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;nycflights13&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="sissejuhatus-r-i.html#cb209-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code></pre></div>
<pre><code>## 
## Attaching package: &#39;dplyr&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     filter, lag</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     intersect, setdiff, setequal, union</code></pre>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="sissejuhatus-r-i.html#cb213-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(nycflights13)</span></code></pre></div>
<p>Salvestame paketist <em>nycflights13</em> andmestiku <em>flights</em> käepärasema nimega :</p>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="sissejuhatus-r-i.html#cb214-1" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> flights</span></code></pre></div>
<p>Vaatame, mis andmestikuga tegu on</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="sissejuhatus-r-i.html#cb215-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dat)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 19
##    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
## 1  2013     1     1      517            515         2      830            819
## 2  2013     1     1      533            529         4      850            830
## 3  2013     1     1      542            540         2      923            850
## 4  2013     1     1      544            545        -1     1004           1022
## 5  2013     1     1      554            600        -6      812            837
## 6  2013     1     1      554            558        -4      740            728
## # ... with 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
## #   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
## #   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="sissejuhatus-r-i.html#cb217-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(dat)</span></code></pre></div>
<pre><code>##  [1] &quot;year&quot;           &quot;month&quot;          &quot;day&quot;            &quot;dep_time&quot;      
##  [5] &quot;sched_dep_time&quot; &quot;dep_delay&quot;      &quot;arr_time&quot;       &quot;sched_arr_time&quot;
##  [9] &quot;arr_delay&quot;      &quot;carrier&quot;        &quot;flight&quot;         &quot;tailnum&quot;       
## [13] &quot;origin&quot;         &quot;dest&quot;           &quot;air_time&quot;       &quot;distance&quot;      
## [17] &quot;hour&quot;           &quot;minute&quot;         &quot;time_hour&quot;</code></pre>
<p><strong>dplyr: filter</strong></p>
<p>Valime ainult need vaatlused, kus lennufirmaks on AA (tunnus <em>carrier</em>) ja mis toimusid jaanuari- või veebruarikuus (<em>dplyr</em>’i funktsioonides on andmestik alati esimeseks argumeniks)</p>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="sissejuhatus-r-i.html#cb219-1" aria-hidden="true" tabindex="-1"></a>dat.aa <span class="ot">&lt;-</span> <span class="fu">filter</span>(dat, carrier<span class="sc">==</span><span class="st">&quot;AA&quot;</span> <span class="sc">&amp;</span> (month<span class="sc">==</span><span class="dv">1</span> <span class="sc">|</span> month<span class="sc">==</span><span class="dv">2</span>))</span>
<span id="cb219-2"><a href="sissejuhatus-r-i.html#cb219-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(dat.aa<span class="sc">$</span>month)</span></code></pre></div>
<pre><code>## 
##    1    2 
## 2794 2517</code></pre>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="sissejuhatus-r-i.html#cb221-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(dat.aa<span class="sc">$</span>carrier)</span></code></pre></div>
<pre><code>## 
##   AA 
## 5311</code></pre>
<p><strong>dplyr: select</strong></p>
<p>Valime <em>dat.aa</em> andmestikust tunnused <em>month</em>, <em>arr_delay</em> ja <em>tailnum</em></p>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="sissejuhatus-r-i.html#cb223-1" aria-hidden="true" tabindex="-1"></a>dat.aa1 <span class="ot">&lt;-</span> <span class="fu">select</span>(dat.aa, month, arr_delay, tailnum)</span>
<span id="cb223-2"><a href="sissejuhatus-r-i.html#cb223-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dat.aa1)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##   month arr_delay tailnum
##   &lt;int&gt;     &lt;dbl&gt; &lt;chr&gt;  
## 1     1        33 N619AA 
## 2     1         8 N3ALAA 
## 3     1        31 N3DUAA 
## 4     1       -12 N633AA 
## 5     1         5 N3EMAA 
## 6     1        -3 N3BAAA</code></pre>
<p>Küllaltki kasulikud on <code>select()</code>’i lisavõimalused, mis lasevad valida tunnuseid vastavalt sellele, mis tähekombinatsiooniga tunnusenimi algab, lõpeb või mida sisaldab (täpsemalt vaata <code>select()</code> helpi).</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="sissejuhatus-r-i.html#cb225-1" aria-hidden="true" tabindex="-1"></a>dat.aa2 <span class="ot">&lt;-</span> <span class="fu">select</span>(dat.aa, <span class="fu">contains</span>(<span class="st">&quot;arr&quot;</span>))</span></code></pre></div>
<p><strong>dplyr: arrange</strong></p>
<p>Järjestame <em>dat.aa1</em> andmedtiku <em>arr_delay</em> tunnuse järgi</p>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb226-1"><a href="sissejuhatus-r-i.html#cb226-1" aria-hidden="true" tabindex="-1"></a>dat.aa1 <span class="ot">&lt;-</span> <span class="fu">arrange</span>(dat.aa1, arr_delay)</span>
<span id="cb226-2"><a href="sissejuhatus-r-i.html#cb226-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dat.aa1)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##   month arr_delay tailnum
##   &lt;int&gt;     &lt;dbl&gt; &lt;chr&gt;  
## 1     2       -69 N3EAAA 
## 2     2       -65 N320AA 
## 3     2       -60 N3FAAA 
## 4     1       -54 N335AA 
## 5     2       -54 N4UBAA 
## 6     2       -54 N350AA</code></pre>
<p>Suuremast väiksemaks järjestamieks tuleb kasutada <code>desc()</code> lisavõimalust</p>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb228-1"><a href="sissejuhatus-r-i.html#cb228-1" aria-hidden="true" tabindex="-1"></a>dat.aa1 <span class="ot">&lt;-</span> <span class="fu">arrange</span>(dat.aa1, <span class="fu">desc</span>(arr_delay))</span></code></pre></div>
<p><strong>dplyr: mutate</strong></p>
<p>Teeme uue tunnuse, kus hilinemise aeg oleks tundides.</p>
<div class="sourceCode" id="cb229"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb229-1"><a href="sissejuhatus-r-i.html#cb229-1" aria-hidden="true" tabindex="-1"></a>dat.aa1 <span class="ot">&lt;-</span> <span class="fu">mutate</span>(dat.aa1, <span class="at">tunnid=</span>arr_delay<span class="sc">/</span><span class="dv">60</span>)</span>
<span id="cb229-2"><a href="sissejuhatus-r-i.html#cb229-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dat.aa1)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 4
##   month arr_delay tailnum tunnid
##   &lt;int&gt;     &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt;
## 1     2       -69 N3EAAA   -1.15
## 2     2       -65 N320AA   -1.08
## 3     2       -60 N3FAAA   -1   
## 4     1       -54 N335AA   -0.9 
## 5     2       -54 N4UBAA   -0.9 
## 6     2       -54 N350AA   -0.9</code></pre>
<p>Saab luua ka funktsioonide alusel uusi tunnuseid, näiteks kui tahame mingil põhjusel tunnust, kus oleks kõikide hilinemiste keskmine.</p>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb231-1"><a href="sissejuhatus-r-i.html#cb231-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(dat.aa1, <span class="at">keskmine=</span><span class="fu">mean</span>(arr_delay, <span class="at">na.rm=</span>T))</span></code></pre></div>
<p><strong>dplyr: summarise</strong></p>
<p>Tahame summeerida hilinemised keskmise, standardhälbe, maksimumi ja miinimumi alusel.</p>
<div class="sourceCode" id="cb232"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb232-1"><a href="sissejuhatus-r-i.html#cb232-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summarise</span>(dat.aa1, </span>
<span id="cb232-2"><a href="sissejuhatus-r-i.html#cb232-2" aria-hidden="true" tabindex="-1"></a>          <span class="at">keskmine=</span><span class="fu">mean</span>(arr_delay, <span class="at">na.rm=</span>T),</span>
<span id="cb232-3"><a href="sissejuhatus-r-i.html#cb232-3" aria-hidden="true" tabindex="-1"></a>          <span class="at">sdh=</span><span class="fu">sd</span>(arr_delay, <span class="at">na.rm=</span>T),</span>
<span id="cb232-4"><a href="sissejuhatus-r-i.html#cb232-4" aria-hidden="true" tabindex="-1"></a>          <span class="at">maks=</span><span class="fu">max</span>(arr_delay, <span class="at">na.rm=</span>T),</span>
<span id="cb232-5"><a href="sissejuhatus-r-i.html#cb232-5" aria-hidden="true" tabindex="-1"></a>          <span class="at">min=</span><span class="fu">min</span>(arr_delay, <span class="at">na.rm=</span>T))</span></code></pre></div>
<pre><code>## # A tibble: 1 x 4
##   keskmine   sdh  maks   min
##      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1     1.03  34.1   368   -69</code></pre>
<p><strong>dplyr: group_by</strong></p>
<p>Tahame teada keskmist hilinemist kuude lõikes.</p>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb234-1"><a href="sissejuhatus-r-i.html#cb234-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summarise</span>(<span class="fu">group_by</span>(dat.aa1, month), <span class="at">keskmine=</span><span class="fu">mean</span>(tunnid, <span class="at">na.rm=</span>T))</span></code></pre></div>
<pre><code>## # A tibble: 2 x 2
##   month keskmine
##   &lt;int&gt;    &lt;dbl&gt;
## 1     1   0.0164
## 2     2   0.0182</code></pre>
<p><strong>dplyr: piping</strong></p>
<p>dplyr toetab nn piping’ut. Kombinatsiooniga %&gt;% saab saab ühe funktsiooni tulemuse võtta sisendiks järgmisele funktsioonile. Seega saame kõik vajalikud toimingud ühes reas ära teha. Kõikide dplyr’i funktsioonide puhul on esimene argument <em>data</em>. Kui kasutame %&gt;%, ei pea me enam <em>data</em>’t defineerima ja dplyr saab ise aru, et andmeteks on eelmise funktsiooni tulemused.<br />
Nii saame kõik eelnevad käsud panna ühte jadasse:</p>
<div class="sourceCode" id="cb236"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb236-1"><a href="sissejuhatus-r-i.html#cb236-1" aria-hidden="true" tabindex="-1"></a>dat <span class="sc">%&gt;%</span> <span class="co">#algsed andmed</span></span>
<span id="cb236-2"><a href="sissejuhatus-r-i.html#cb236-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(carrier<span class="sc">==</span><span class="st">&quot;AA&quot;</span>, month<span class="sc">==</span><span class="dv">1</span> <span class="sc">|</span> month<span class="sc">==</span><span class="dv">2</span>) <span class="sc">%&gt;%</span></span>
<span id="cb236-3"><a href="sissejuhatus-r-i.html#cb236-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(month, arr_delay, tailnum) <span class="sc">%&gt;%</span></span>
<span id="cb236-4"><a href="sissejuhatus-r-i.html#cb236-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(arr_delay) <span class="sc">%&gt;%</span></span>
<span id="cb236-5"><a href="sissejuhatus-r-i.html#cb236-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">tunnid=</span>arr_delay<span class="sc">/</span><span class="dv">60</span>) <span class="sc">%&gt;%</span></span>
<span id="cb236-6"><a href="sissejuhatus-r-i.html#cb236-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(month) <span class="sc">%&gt;%</span></span>
<span id="cb236-7"><a href="sissejuhatus-r-i.html#cb236-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">keskmine=</span><span class="fu">mean</span>(tunnid, <span class="at">na.rm=</span>T))</span></code></pre></div>
<pre><code>## # A tibble: 2 x 2
##   month keskmine
##   &lt;int&gt;    &lt;dbl&gt;
## 1     1   0.0164
## 2     2   0.0182</code></pre>
<p>Kui me tahame tulemusi kuhugi salvestada, peame uue andmeobjekti alguses määrama.</p>
<div class="sourceCode" id="cb238"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb238-1"><a href="sissejuhatus-r-i.html#cb238-1" aria-hidden="true" tabindex="-1"></a>dat1 <span class="ot">&lt;-</span> dat <span class="sc">%&gt;%</span></span>
<span id="cb238-2"><a href="sissejuhatus-r-i.html#cb238-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(month, arr_delay, tailnum)</span></code></pre></div>
<p>Tänu piping’ule saab küllaltki keerulisi andmeteisendusi teha väga lihtsalt ja elegantselt (puhta ja arusaadava koodiga). Näiteks tunnus, milles on kõikide lennufirmade keskmine hilinemine kõikide kuude lõikes:</p>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb239-1"><a href="sissejuhatus-r-i.html#cb239-1" aria-hidden="true" tabindex="-1"></a>dat1 <span class="ot">&lt;-</span> dat<span class="sc">%&gt;%</span></span>
<span id="cb239-2"><a href="sissejuhatus-r-i.html#cb239-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(carrier, month) <span class="sc">%&gt;%</span> <span class="co"># saame grupeerida ka mitme tunnuse lõikes</span></span>
<span id="cb239-3"><a href="sissejuhatus-r-i.html#cb239-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">keskmine =</span> <span class="fu">mean</span>(arr_delay, <span class="at">na.rm=</span>T))</span></code></pre></div>
<p><strong>Veel mõned kasulikud funktsioonid</strong></p>
<p>Kui on vaja välja jätta dubleerivad vaatlused:</p>
<div class="sourceCode" id="cb240"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb240-1"><a href="sissejuhatus-r-i.html#cb240-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb240-2"><a href="sissejuhatus-r-i.html#cb240-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(carrier, flight)</span></code></pre></div>
<pre><code>## # A tibble: 5,725 x 2
##    carrier flight
##    &lt;chr&gt;    &lt;int&gt;
##  1 UA        1545
##  2 UA        1714
##  3 AA        1141
##  4 B6         725
##  5 DL         461
##  6 UA        1696
##  7 B6         507
##  8 EV        5708
##  9 B6          79
## 10 AA         301
## # ... with 5,715 more rows</code></pre>
<p>Kui on vaja vaatluste arvu:</p>
<div class="sourceCode" id="cb242"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb242-1"><a href="sissejuhatus-r-i.html#cb242-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb242-2"><a href="sissejuhatus-r-i.html#cb242-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">n</span>())</span></code></pre></div>
<pre><code>## # A tibble: 1 x 1
##    `n()`
##    &lt;int&gt;
## 1 336776</code></pre>
<div class="sourceCode" id="cb244"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb244-1"><a href="sissejuhatus-r-i.html#cb244-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Või vaatluste arv gruppide lõikes</span></span>
<span id="cb244-2"><a href="sissejuhatus-r-i.html#cb244-2" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb244-3"><a href="sissejuhatus-r-i.html#cb244-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(carrier) <span class="sc">%&gt;%</span> </span>
<span id="cb244-4"><a href="sissejuhatus-r-i.html#cb244-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">kokku =</span> <span class="fu">n</span>())</span></code></pre></div>
<pre><code>## # A tibble: 16 x 2
##    carrier kokku
##    &lt;chr&gt;   &lt;int&gt;
##  1 9E      18460
##  2 AA      32729
##  3 AS        714
##  4 B6      54635
##  5 DL      48110
##  6 EV      54173
##  7 F9        685
##  8 FL       3260
##  9 HA        342
## 10 MQ      26397
## 11 OO         32
## 12 UA      58665
## 13 US      20536
## 14 VX       5162
## 15 WN      12275
## 16 YV        601</code></pre>
<p>Kui tahame välja võtta juhuvalimi:</p>
<div class="sourceCode" id="cb246"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb246-1"><a href="sissejuhatus-r-i.html#cb246-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Võtame välja 10 juhuslikku rida</span></span>
<span id="cb246-2"><a href="sissejuhatus-r-i.html#cb246-2" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb246-3"><a href="sissejuhatus-r-i.html#cb246-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sample_n</span>(<span class="dv">10</span>)</span></code></pre></div>
<pre><code>## # A tibble: 10 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
##  1  2013     6     1      945            955       -10     1103           1140
##  2  2013     4    13     1245           1250        -5     1552           1548
##  3  2013    10    13     1836           1830         6     2036           2035
##  4  2013     2    14     1549           1530        19     1914           1835
##  5  2013     5     7     1456           1457        -1     1804           1751
##  6  2013    11     5      821            822        -1     1143           1141
##  7  2013     3    25     1831           1829         2     2051           2114
##  8  2013    11    18      636            625        11      752            750
##  9  2013     4     2     1926           1930        -4     2037           2105
## 10  2013     4     8     1745           1735        10     2052           2003
## # ... with 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
## #   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
## #   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<p>Kui tahame välja võtta konkreetsed read:</p>
<div class="sourceCode" id="cb248"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb248-1"><a href="sissejuhatus-r-i.html#cb248-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Võtame välja esimesed 5 rida</span></span>
<span id="cb248-2"><a href="sissejuhatus-r-i.html#cb248-2" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb248-3"><a href="sissejuhatus-r-i.html#cb248-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span></code></pre></div>
<pre><code>## # A tibble: 5 x 19
##    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
## 1  2013     1     1      517            515         2      830            819
## 2  2013     1     1      533            529         4      850            830
## 3  2013     1     1      542            540         2      923            850
## 4  2013     1     1      544            545        -1     1004           1022
## 5  2013     1     1      554            600        -6      812            837
## # ... with 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
## #   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
## #   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
</div>
<div id="andmete-ühendamine" class="section level3" number="2.2.2">
<h3><span class="header-section-number">2.2.2</span> Andmete ühendamine</h3>
<p>Andmestike ühendamisel võib olla kaks eesmärki: tahame lisada ridu või tahame lisada tunnuseid (veergusid).</p>
<p>Ridade lisamiseks on dplyr’is funktsioon <code>bind_row()</code>:</p>
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb250-1"><a href="sissejuhatus-r-i.html#cb250-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Teeme kaks andmestikku</span></span>
<span id="cb250-2"><a href="sissejuhatus-r-i.html#cb250-2" aria-hidden="true" tabindex="-1"></a>dt1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">a =</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;e&quot;</span>), <span class="at">b =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb250-3"><a href="sissejuhatus-r-i.html#cb250-3" aria-hidden="true" tabindex="-1"></a>dt1</span></code></pre></div>
<pre><code>##   a b
## 1 a 1
## 2 b 2
## 3 c 3
## 4 d 4
## 5 e 5</code></pre>
<div class="sourceCode" id="cb252"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb252-1"><a href="sissejuhatus-r-i.html#cb252-1" aria-hidden="true" tabindex="-1"></a>dt2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">a =</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;f&quot;</span>), <span class="at">c =</span> <span class="dv">6</span><span class="sc">:</span><span class="dv">9</span>)</span>
<span id="cb252-2"><a href="sissejuhatus-r-i.html#cb252-2" aria-hidden="true" tabindex="-1"></a>dt2</span></code></pre></div>
<pre><code>##   a c
## 1 a 6
## 2 b 7
## 3 e 8
## 4 f 9</code></pre>
<div class="sourceCode" id="cb254"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb254-1"><a href="sissejuhatus-r-i.html#cb254-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ühendame andmestikud ridadena</span></span>
<span id="cb254-2"><a href="sissejuhatus-r-i.html#cb254-2" aria-hidden="true" tabindex="-1"></a><span class="fu">bind_rows</span>(dt1, dt2)</span></code></pre></div>
<pre><code>##   a  b  c
## 1 a  1 NA
## 2 b  2 NA
## 3 c  3 NA
## 4 d  4 NA
## 5 e  5 NA
## 6 a NA  6
## 7 b NA  7
## 8 e NA  8
## 9 f NA  9</code></pre>
<p>Andmestike tunnuste kaupa ühendamiseks on meil vaja ID-tunnust või tunnuseid, mis identifitseeriks unikaalsed vaatlused. Antud juhul on meil selleks tunnus “a.”</p>
<div class="sourceCode" id="cb256"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb256-1"><a href="sissejuhatus-r-i.html#cb256-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ühendame teise andmestiku esimese külge </span></span>
<span id="cb256-2"><a href="sissejuhatus-r-i.html#cb256-2" aria-hidden="true" tabindex="-1"></a><span class="co"># (ehk siis alles jäävad kõik esimese andmestiku vaatlused)</span></span>
<span id="cb256-3"><a href="sissejuhatus-r-i.html#cb256-3" aria-hidden="true" tabindex="-1"></a><span class="fu">left_join</span>(dt1, dt2, <span class="at">by =</span> <span class="st">&quot;a&quot;</span>)</span></code></pre></div>
<pre><code>##   a b  c
## 1 a 1  6
## 2 b 2  7
## 3 c 3 NA
## 4 d 4 NA
## 5 e 5  8</code></pre>
<div class="sourceCode" id="cb258"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb258-1"><a href="sissejuhatus-r-i.html#cb258-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ühendame esimese andmestiku teise külge </span></span>
<span id="cb258-2"><a href="sissejuhatus-r-i.html#cb258-2" aria-hidden="true" tabindex="-1"></a><span class="co"># (ehk siis alles jäävad kõik teise andmestiku vaatlused)</span></span>
<span id="cb258-3"><a href="sissejuhatus-r-i.html#cb258-3" aria-hidden="true" tabindex="-1"></a><span class="fu">right_join</span>(dt1, dt2, <span class="at">by =</span> <span class="st">&quot;a&quot;</span>)</span></code></pre></div>
<pre><code>##   a  b c
## 1 a  1 6
## 2 b  2 7
## 3 e  5 8
## 4 f NA 9</code></pre>
<div class="sourceCode" id="cb260"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb260-1"><a href="sissejuhatus-r-i.html#cb260-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ühendame andmestikud nii, et alles jäävad kõik vaatlused mõlemast andmestikust</span></span>
<span id="cb260-2"><a href="sissejuhatus-r-i.html#cb260-2" aria-hidden="true" tabindex="-1"></a><span class="fu">full_join</span>(dt1, dt2)</span></code></pre></div>
<pre><code>## Joining, by = &quot;a&quot;</code></pre>
<pre><code>##   a  b  c
## 1 a  1  6
## 2 b  2  7
## 3 c  3 NA
## 4 d  4 NA
## 5 e  5  8
## 6 f NA  9</code></pre>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb263-1"><a href="sissejuhatus-r-i.html#cb263-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ühendame andmestikud nii, et alles jäävad need vaatlused, mis mõlemas andmestikus olemas on</span></span>
<span id="cb263-2"><a href="sissejuhatus-r-i.html#cb263-2" aria-hidden="true" tabindex="-1"></a><span class="fu">inner_join</span>(dt1, dt2)</span></code></pre></div>
<pre><code>## Joining, by = &quot;a&quot;</code></pre>
<pre><code>##   a b c
## 1 a 1 6
## 2 b 2 7
## 3 e 5 8</code></pre>
<div class="sourceCode" id="cb266"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb266-1"><a href="sissejuhatus-r-i.html#cb266-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ühendame andmestikud nii, et alles jäävad need vaatlused, mida ei ole kummaski andmestikus</span></span>
<span id="cb266-2"><a href="sissejuhatus-r-i.html#cb266-2" aria-hidden="true" tabindex="-1"></a><span class="fu">anti_join</span>(dt1, dt2)</span></code></pre></div>
<pre><code>## Joining, by = &quot;a&quot;</code></pre>
<pre><code>##   a b
## 1 c 3
## 2 d 4</code></pre>
</div>
<div id="andmestiku-kuju-muutmine" class="section level3" number="2.2.3">
<h3><span class="header-section-number">2.2.3</span> Andmestiku kuju muutmine</h3>
<p>Andmestik võib olla nn “pikal kujul” või “laial kujul.” Pikad andmed on sellised, mille puhul kõik muutujad on kirjeldatud tunnustena. Laial kujul andmed on sellised, mille puhul mõni muutuja on jaotatad erinevateks tunnusteks. <em>tidyr</em> pakett võimaldab mugavalt andmestiku ühelt kujult teise tranformeerimist:</p>
<div class="sourceCode" id="cb269"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb269-1"><a href="sissejuhatus-r-i.html#cb269-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb269-2"><a href="sissejuhatus-r-i.html#cb269-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb269-3"><a href="sissejuhatus-r-i.html#cb269-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Teeme &quot;laia&quot; näidisandmestiku</span></span>
<span id="cb269-4"><a href="sissejuhatus-r-i.html#cb269-4" aria-hidden="true" tabindex="-1"></a>lai <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">nimi =</span> <span class="fu">c</span>(<span class="st">&quot;Jüri&quot;</span>, <span class="st">&quot;Mari&quot;</span>, <span class="st">&quot;Jaan&quot;</span>), </span>
<span id="cb269-5"><a href="sissejuhatus-r-i.html#cb269-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">test_1 =</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">5</span>,<span class="dv">2</span>), </span>
<span id="cb269-6"><a href="sissejuhatus-r-i.html#cb269-6" aria-hidden="true" tabindex="-1"></a>                 <span class="at">test_2 =</span> <span class="fu">c</span>(<span class="dv">8</span>,<span class="dv">4</span>,<span class="dv">5</span>),</span>
<span id="cb269-7"><a href="sissejuhatus-r-i.html#cb269-7" aria-hidden="true" tabindex="-1"></a>                 <span class="at">test_3 =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">4</span>))</span>
<span id="cb269-8"><a href="sissejuhatus-r-i.html#cb269-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb269-9"><a href="sissejuhatus-r-i.html#cb269-9" aria-hidden="true" tabindex="-1"></a>lai</span></code></pre></div>
<pre><code>##   nimi test_1 test_2 test_3
## 1 Jüri      3      8      2
## 2 Mari      5      4      5
## 3 Jaan      2      5      4</code></pre>
<div class="sourceCode" id="cb271"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb271-1"><a href="sissejuhatus-r-i.html#cb271-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Antud andmestikus on erinevad testid eri tunnustena. </span></span>
<span id="cb271-2"><a href="sissejuhatus-r-i.html#cb271-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Aga kui me tahaksime, et test oleks tunnus. </span></span>
<span id="cb271-3"><a href="sissejuhatus-r-i.html#cb271-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Keerame andmestiku pikale kujule</span></span>
<span id="cb271-4"><a href="sissejuhatus-r-i.html#cb271-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb271-5"><a href="sissejuhatus-r-i.html#cb271-5" aria-hidden="true" tabindex="-1"></a>pikk <span class="ot">&lt;-</span> lai <span class="sc">%&gt;%</span></span>
<span id="cb271-6"><a href="sissejuhatus-r-i.html#cb271-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">starts_with</span>(<span class="st">&quot;test_&quot;</span>), </span>
<span id="cb271-7"><a href="sissejuhatus-r-i.html#cb271-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">&quot;test&quot;</span>, </span>
<span id="cb271-8"><a href="sissejuhatus-r-i.html#cb271-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&quot;tulemus&quot;</span>,</span>
<span id="cb271-9"><a href="sissejuhatus-r-i.html#cb271-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_prefix =</span> <span class="st">&quot;test_&quot;</span>)</span>
<span id="cb271-10"><a href="sissejuhatus-r-i.html#cb271-10" aria-hidden="true" tabindex="-1"></a>pikk</span></code></pre></div>
<pre><code>## # A tibble: 9 x 3
##   nimi  test  tulemus
##   &lt;chr&gt; &lt;chr&gt;   &lt;dbl&gt;
## 1 Jüri  1           3
## 2 Jüri  2           8
## 3 Jüri  3           2
## 4 Mari  1           5
## 5 Mari  2           4
## 6 Mari  3           5
## 7 Jaan  1           2
## 8 Jaan  2           5
## 9 Jaan  3           4</code></pre>
<div class="sourceCode" id="cb273"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb273-1"><a href="sissejuhatus-r-i.html#cb273-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Keerame tagasi laiale kujule</span></span>
<span id="cb273-2"><a href="sissejuhatus-r-i.html#cb273-2" aria-hidden="true" tabindex="-1"></a>lai <span class="ot">&lt;-</span> pikk <span class="sc">%&gt;%</span> </span>
<span id="cb273-3"><a href="sissejuhatus-r-i.html#cb273-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">&quot;test&quot;</span>, <span class="at">values_from =</span> <span class="st">&quot;tulemus&quot;</span>, <span class="at">names_prefix =</span> <span class="st">&quot;test_&quot;</span>)</span>
<span id="cb273-4"><a href="sissejuhatus-r-i.html#cb273-4" aria-hidden="true" tabindex="-1"></a>lai</span></code></pre></div>
<pre><code>## # A tibble: 3 x 4
##   nimi  test_1 test_2 test_3
##   &lt;chr&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1 Jüri       3      8      2
## 2 Mari       5      4      5
## 3 Jaan       2      5      4</code></pre>
</div>
<div id="kuupäevad" class="section level3" number="2.2.4">
<h3><span class="header-section-number">2.2.4</span> Kuupäevad</h3>
<p>Ris käsitletakse kuupevi ja kellaaegu eraldi “Date” klassina. See tagab, et kupäevad ja kellaajad on alati ühtses formaadis ning võimaldab nendega tehteid teha. Aja tunnustega tegelemiseks on mugav kasutada paketti <em>lubridate</em>.</p>
<p>Numbriliste või tekstiliste tunnuste kuupäevadeks muutmine:</p>
<div class="sourceCode" id="cb275"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb275-1"><a href="sissejuhatus-r-i.html#cb275-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span></code></pre></div>
<pre><code>## 
## Attaching package: &#39;lubridate&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     date, intersect, setdiff, union</code></pre>
<div class="sourceCode" id="cb278"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb278-1"><a href="sissejuhatus-r-i.html#cb278-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Kui kuupäeva järjekord on kuupäev (d), kuu (m), aasta (y), siis:</span></span>
<span id="cb278-2"><a href="sissejuhatus-r-i.html#cb278-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dmy</span>(<span class="st">&#39;24.03.2017&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2017-03-24&quot;</code></pre>
<div class="sourceCode" id="cb280"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb280-1"><a href="sissejuhatus-r-i.html#cb280-1" aria-hidden="true" tabindex="-1"></a><span class="co"># või</span></span>
<span id="cb280-2"><a href="sissejuhatus-r-i.html#cb280-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dmy</span>(<span class="dv">24032017</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2017-03-24&quot;</code></pre>
<div class="sourceCode" id="cb282"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb282-1"><a href="sissejuhatus-r-i.html#cb282-1" aria-hidden="true" tabindex="-1"></a><span class="co"># või</span></span>
<span id="cb282-2"><a href="sissejuhatus-r-i.html#cb282-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dmy</span>(<span class="st">&#39;24-03-2017&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2017-03-24&quot;</code></pre>
<div class="sourceCode" id="cb284"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb284-1"><a href="sissejuhatus-r-i.html#cb284-1" aria-hidden="true" tabindex="-1"></a><span class="co"># või</span></span>
<span id="cb284-2"><a href="sissejuhatus-r-i.html#cb284-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dmy</span>(<span class="st">&#39;24/03/2017&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2017-03-24&quot;</code></pre>
<div class="sourceCode" id="cb286"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb286-1"><a href="sissejuhatus-r-i.html#cb286-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Kui järjekord on teine, siis tuleb lihtsalt tähed funktsiooninimes vastavalt vahetada</span></span>
<span id="cb286-2"><a href="sissejuhatus-r-i.html#cb286-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mdy</span>(<span class="st">&#39;03-24-2017&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2017-03-24&quot;</code></pre>
<div class="sourceCode" id="cb288"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb288-1"><a href="sissejuhatus-r-i.html#cb288-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ymd</span>(<span class="st">&#39;2017/03/24&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2017-03-24&quot;</code></pre>
<div class="sourceCode" id="cb290"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb290-1"><a href="sissejuhatus-r-i.html#cb290-1" aria-hidden="true" tabindex="-1"></a><span class="co"># jne</span></span></code></pre></div>
<p>Kui tahame kuupevast aastat, kuud, päeva vms:</p>
<div class="sourceCode" id="cb291"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb291-1"><a href="sissejuhatus-r-i.html#cb291-1" aria-hidden="true" tabindex="-1"></a>kp <span class="ot">&lt;-</span> <span class="fu">dmy</span>(<span class="dv">24032017</span>)</span>
<span id="cb291-2"><a href="sissejuhatus-r-i.html#cb291-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb291-3"><a href="sissejuhatus-r-i.html#cb291-3" aria-hidden="true" tabindex="-1"></a><span class="fu">year</span>(kp)</span></code></pre></div>
<pre><code>## [1] 2017</code></pre>
<div class="sourceCode" id="cb293"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb293-1"><a href="sissejuhatus-r-i.html#cb293-1" aria-hidden="true" tabindex="-1"></a><span class="fu">month</span>(kp)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb295"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb295-1"><a href="sissejuhatus-r-i.html#cb295-1" aria-hidden="true" tabindex="-1"></a><span class="fu">week</span>(kp)</span></code></pre></div>
<pre><code>## [1] 12</code></pre>
<div class="sourceCode" id="cb297"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb297-1"><a href="sissejuhatus-r-i.html#cb297-1" aria-hidden="true" tabindex="-1"></a><span class="fu">day</span>(kp)</span></code></pre></div>
<pre><code>## [1] 24</code></pre>
<div class="sourceCode" id="cb299"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb299-1"><a href="sissejuhatus-r-i.html#cb299-1" aria-hidden="true" tabindex="-1"></a><span class="fu">wday</span>(kp)</span></code></pre></div>
<pre><code>## [1] 6</code></pre>
<div class="sourceCode" id="cb301"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb301-1"><a href="sissejuhatus-r-i.html#cb301-1" aria-hidden="true" tabindex="-1"></a><span class="co"># või</span></span>
<span id="cb301-2"><a href="sissejuhatus-r-i.html#cb301-2" aria-hidden="true" tabindex="-1"></a><span class="fu">wday</span>(kp, <span class="at">label =</span> T)</span></code></pre></div>
<pre><code>## [1] Fri
## Levels: Sun &lt; Mon &lt; Tue &lt; Wed &lt; Thu &lt; Fri &lt; Sat</code></pre>
<p>Praegune aeg:</p>
<div class="sourceCode" id="cb303"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb303-1"><a href="sissejuhatus-r-i.html#cb303-1" aria-hidden="true" tabindex="-1"></a><span class="fu">today</span>()</span></code></pre></div>
<pre><code>## [1] &quot;2022-02-18&quot;</code></pre>
<div class="sourceCode" id="cb305"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb305-1"><a href="sissejuhatus-r-i.html#cb305-1" aria-hidden="true" tabindex="-1"></a><span class="fu">now</span>()</span></code></pre></div>
<pre><code>## [1] &quot;2022-02-18 10:28:56 EET&quot;</code></pre>
<p>Kestus:</p>
<div class="sourceCode" id="cb307"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb307-1"><a href="sissejuhatus-r-i.html#cb307-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Mitu sekundit kestab päev</span></span>
<span id="cb307-2"><a href="sissejuhatus-r-i.html#cb307-2" aria-hidden="true" tabindex="-1"></a><span class="fu">duration</span>(<span class="at">day =</span> <span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] &quot;86400s (~1 days)&quot;</code></pre>
<div class="sourceCode" id="cb309"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb309-1"><a href="sissejuhatus-r-i.html#cb309-1" aria-hidden="true" tabindex="-1"></a><span class="co"># mitu sekundit kestab nädal</span></span>
<span id="cb309-2"><a href="sissejuhatus-r-i.html#cb309-2" aria-hidden="true" tabindex="-1"></a><span class="fu">duration</span>(<span class="at">week =</span> <span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] &quot;604800s (~1 weeks)&quot;</code></pre>
<div class="sourceCode" id="cb311"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb311-1"><a href="sissejuhatus-r-i.html#cb311-1" aria-hidden="true" tabindex="-1"></a><span class="co"># aasta</span></span>
<span id="cb311-2"><a href="sissejuhatus-r-i.html#cb311-2" aria-hidden="true" tabindex="-1"></a><span class="fu">duration</span>(<span class="dv">1</span>, <span class="st">&quot;year&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;31557600s (~1 years)&quot;</code></pre>
<p>Interval:</p>
<div class="sourceCode" id="cb313"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb313-1"><a href="sissejuhatus-r-i.html#cb313-1" aria-hidden="true" tabindex="-1"></a>kp1 <span class="ot">&lt;-</span> <span class="fu">dmy</span>(<span class="dv">24032017</span>)</span>
<span id="cb313-2"><a href="sissejuhatus-r-i.html#cb313-2" aria-hidden="true" tabindex="-1"></a>kp2 <span class="ot">&lt;-</span> <span class="fu">dmy</span>(<span class="dv">26062017</span>)</span>
<span id="cb313-3"><a href="sissejuhatus-r-i.html#cb313-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb313-4"><a href="sissejuhatus-r-i.html#cb313-4" aria-hidden="true" tabindex="-1"></a><span class="fu">interval</span>(kp1, kp2)</span></code></pre></div>
<pre><code>## [1] 2017-03-24 UTC--2017-06-26 UTC</code></pre>
<div class="sourceCode" id="cb315"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb315-1"><a href="sissejuhatus-r-i.html#cb315-1" aria-hidden="true" tabindex="-1"></a><span class="co"># või</span></span>
<span id="cb315-2"><a href="sissejuhatus-r-i.html#cb315-2" aria-hidden="true" tabindex="-1"></a>kp1 <span class="sc">%--%</span> kp2</span></code></pre></div>
<pre><code>## [1] 2017-03-24 UTC--2017-06-26 UTC</code></pre>
<div class="sourceCode" id="cb317"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb317-1"><a href="sissejuhatus-r-i.html#cb317-1" aria-hidden="true" tabindex="-1"></a><span class="co"># mitu päeva interval kestab</span></span>
<span id="cb317-2"><a href="sissejuhatus-r-i.html#cb317-2" aria-hidden="true" tabindex="-1"></a>kp1 <span class="sc">%--%</span> kp2 <span class="sc">%/%</span> <span class="fu">days</span>(<span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] 94</code></pre>
<div class="sourceCode" id="cb319"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb319-1"><a href="sissejuhatus-r-i.html#cb319-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Kas mingi kuupäev jääb intervalli sisse</span></span>
<span id="cb319-2"><a href="sissejuhatus-r-i.html#cb319-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dmy</span>(<span class="dv">23032017</span>) <span class="sc">%within%</span> <span class="fu">interval</span>(kp1, kp2)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb321"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb321-1"><a href="sissejuhatus-r-i.html#cb321-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dmy</span>(<span class="dv">25032017</span>) <span class="sc">%within%</span> <span class="fu">interval</span>(kp1, kp2)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
</div>
<div id="tekstilised-tunnused" class="section level3" number="2.2.5">
<h3><span class="header-section-number">2.2.5</span> Tekstilised tunnused</h3>
<p>Tekstiliste tunnuste jaoks on pakett <em>stringr</em></p>
<div class="sourceCode" id="cb323"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb323-1"><a href="sissejuhatus-r-i.html#cb323-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb323-2"><a href="sissejuhatus-r-i.html#cb323-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb323-3"><a href="sissejuhatus-r-i.html#cb323-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Teeme vektori tekstidega (stringidega)</span></span>
<span id="cb323-4"><a href="sissejuhatus-r-i.html#cb323-4" aria-hidden="true" tabindex="-1"></a>tekst <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Tekstiliste&quot;</span>, <span class="st">&quot;tunnuste&quot;</span>, <span class="st">&quot;jaoks&quot;</span>, <span class="st">&quot;on&quot;</span>, <span class="st">&quot;pakett&quot;</span>, <span class="st">&quot;stringr&quot;</span>)</span>
<span id="cb323-5"><a href="sissejuhatus-r-i.html#cb323-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb323-6"><a href="sissejuhatus-r-i.html#cb323-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Mitu tähemärki on igas sõnas</span></span>
<span id="cb323-7"><a href="sissejuhatus-r-i.html#cb323-7" aria-hidden="true" tabindex="-1"></a><span class="fu">str_length</span>(tekst) </span></code></pre></div>
<pre><code>## [1] 11  8  5  2  6  7</code></pre>
<div class="sourceCode" id="cb325"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb325-1"><a href="sissejuhatus-r-i.html#cb325-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Paneme erinevad sõnad kokku</span></span>
<span id="cb325-2"><a href="sissejuhatus-r-i.html#cb325-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(tekst, <span class="at">collapse =</span> <span class="st">&quot; &quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Tekstiliste tunnuste jaoks on pakett stringr&quot;</code></pre>
<div class="sourceCode" id="cb327"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb327-1"><a href="sissejuhatus-r-i.html#cb327-1" aria-hidden="true" tabindex="-1"></a><span class="co"># võtame välja iga sõna esimese ja teise tähemärgi</span></span>
<span id="cb327-2"><a href="sissejuhatus-r-i.html#cb327-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sub</span>(tekst, <span class="at">start =</span> <span class="dv">1</span>, <span class="at">end =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Te&quot; &quot;tu&quot; &quot;ja&quot; &quot;on&quot; &quot;pa&quot; &quot;st&quot;</code></pre>
<div class="sourceCode" id="cb329"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb329-1"><a href="sissejuhatus-r-i.html#cb329-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Võtame välja sõnad, mis sisaldavad &quot;t&quot; tähte</span></span>
<span id="cb329-2"><a href="sissejuhatus-r-i.html#cb329-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_subset</span>(tekst, <span class="st">&quot;t&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Tekstiliste&quot; &quot;tunnuste&quot;    &quot;pakett&quot;      &quot;stringr&quot;</code></pre>
<div class="sourceCode" id="cb331"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb331-1"><a href="sissejuhatus-r-i.html#cb331-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Võtame välja sõnad, mis sisaldavad &quot;a&quot; või &quot;o&quot; tähte</span></span>
<span id="cb331-2"><a href="sissejuhatus-r-i.html#cb331-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_subset</span>(tekst, <span class="st">&quot;[ao]&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;jaoks&quot;  &quot;on&quot;     &quot;pakett&quot;</code></pre>
<div class="sourceCode" id="cb333"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb333-1"><a href="sissejuhatus-r-i.html#cb333-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Kas sõnas on &quot;a&quot; või &quot;o&quot; täht</span></span>
<span id="cb333-2"><a href="sissejuhatus-r-i.html#cb333-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(tekst, <span class="st">&quot;[ao]&quot;</span>)</span></code></pre></div>
<pre><code>## [1] FALSE FALSE  TRUE  TRUE  TRUE FALSE</code></pre>
<div class="sourceCode" id="cb335"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb335-1"><a href="sissejuhatus-r-i.html#cb335-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Võtame sõnadest välja &quot;te&quot; tähekombinatsioonid</span></span>
<span id="cb335-2"><a href="sissejuhatus-r-i.html#cb335-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_extract</span>(tekst, <span class="st">&quot;te&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;te&quot; &quot;te&quot; NA   NA   NA   NA</code></pre>
<div class="sourceCode" id="cb337"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb337-1"><a href="sissejuhatus-r-i.html#cb337-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Mitu &quot;t&quot; tähte igas sõnas on</span></span>
<span id="cb337-2"><a href="sissejuhatus-r-i.html#cb337-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_count</span>(tekst, <span class="st">&quot;t&quot;</span>)</span></code></pre></div>
<pre><code>## [1] 2 2 0 0 2 1</code></pre>
<div class="sourceCode" id="cb339"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb339-1"><a href="sissejuhatus-r-i.html#cb339-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Asendame kõik &quot;t&quot; tähed &quot;T&quot; tähega</span></span>
<span id="cb339-2"><a href="sissejuhatus-r-i.html#cb339-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace</span>(tekst, <span class="st">&quot;t&quot;</span>, <span class="st">&quot;T&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;TeksTiliste&quot; &quot;Tunnuste&quot;    &quot;jaoks&quot;       &quot;on&quot;          &quot;pakeTt&quot;     
## [6] &quot;sTringr&quot;</code></pre>
<div class="sourceCode" id="cb341"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb341-1"><a href="sissejuhatus-r-i.html#cb341-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Nagu näha, siis asendati ainult sõna esimene &quot;t&quot; täht</span></span>
<span id="cb341-2"><a href="sissejuhatus-r-i.html#cb341-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Kui tahame kõik &quot;t&quot; tähed asendada, siis:</span></span>
<span id="cb341-3"><a href="sissejuhatus-r-i.html#cb341-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace_all</span>(tekst, <span class="st">&quot;t&quot;</span>, <span class="st">&quot;T&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;TeksTilisTe&quot; &quot;TunnusTe&quot;    &quot;jaoks&quot;       &quot;on&quot;          &quot;pakeTT&quot;     
## [6] &quot;sTringr&quot;</code></pre>
</div>
</div>
<div id="r-markdown" class="section level2" number="2.3">
<h2><span class="header-section-number">2.3</span> R markdown</h2>
<p>R markdown teeb tulemuste esitamise (koos koodiga) või raporti tegemise väga lihtsaks. Kõigepealt on vaja installida pakett “rmarkdown” (RStudio’ga tuleb see defaultis kaasa). Seejärel saame scriptifaili asemel valida <em>markdown</em>’i dokumendi: File &gt; New File &gt; R Markdown. Saab valida formaadi, mida väljundina tahame saada (html, pdf, word). Avaneb markdown’i dokument, millesse saab kirjutada nii tavalist teksti kui ka R’i koodi, ning mille väljundis sisalduvad (kui me seda muidugi tahame) ka analüüsitulemused. Väljundi loomiseks tuleb vajutada Knit nuppu.</p>
<p>Lisainfo jaoks võite vaadata:<br />
Help &gt; Markdown Quick Reference<br />
<a href="http://rmarkdown.rstudio.com/" class="uri">http://rmarkdown.rstudio.com/</a></p>
</div>
<div id="andmegraafika" class="section level2" number="2.4">
<h2><span class="header-section-number">2.4</span> Andmegraafika</h2>
<p>Edward Tufte, üks andmegraafika legende, kirjeldab oma raamatutes <em>Beautiful Evidence</em> ja <em>The Visual Display of Quantitative Information</em> peamisi andmegraafika põhialuseid:</p>
<ul>
<li>Graafikul esitatud tunnuste representatsioonid peavad olema proportsionaalsed mõõdetud tunnustega reaalses maailmas</li>
<li>Graafikul esitatule peab olema selge, detailne ja läbiv tähistus ning selgitus</li>
<li>Esita andmete varieerumist, mitte graafiku disainist tulenevat varieerumist</li>
<li>Informatsiooni edastavaid dimensioone ei tohiks esitada rohkem kui andmed seda võimaldavad (3D tulpdiagrammid on saatanast)</li>
<li>Graafik peab edastama ainult andmetest lähtuvat informatsiooni (mida saaks graafikul kustudada, ilma et selle infoedastusvõime kannataks?)</li>
<li>Võrdlusmoment
<ul>
<li>Mingi kvantiteet (keskmine, sagedus, hajuvusnäitaja jne) omab mõtet vaid suhestudes mingi teise kvantiteedi või referentsiga</li>
<li>Sisukas hüpotees võrdluses nullhüpoteesiga</li>
</ul></li>
<li>Mitmemõõtmelisus
<ul>
<li>Maailma on alati mitmemõõtmeline</li>
<li>Näita võimalikult palju andmeid (aga mitte rohkem kui võimalik)</li>
</ul></li>
<li>Esitatud andmed peavad olema olulised (mõttekad)</li>
</ul>
<p>Millekes üldse graafikud?</p>
<ul>
<li>Andmete mõistmine</li>
<li>Mustrite leidmine</li>
<li>Vigade leidmine</li>
<li><strong>Tulemuste kommunikeerimine</strong></li>
</ul>
<div id="ri-baasgraafikud" class="section level3" number="2.4.1">
<h3><span class="header-section-number">2.4.1</span> R’i baasgraafikud</h3>
<p>Baas-R’is on väga võimekas graafikamootor, millega on võimalik väga ilusaid ja sisukaid graafikuid teha. Tänapäeval kasutab aga enamik andmeanalüütikuid baas-R’i asemel paketti “ggplot2,” kus on jooniste tegemine muudetud mõnevõrra lihtsamaks, loogilisemaks ja võimalusterohkemaks. Kuid, et oleksite vähemalt tuttav ka baas-R’i võimalustega, vaatame kiirelt üle ka selles leiduvad võimalused.</p>
<div class="sourceCode" id="cb343"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb343-1"><a href="sissejuhatus-r-i.html#cb343-1" aria-hidden="true" tabindex="-1"></a>dt <span class="ot">&lt;-</span> iris <span class="co">#Kasutame Iris&#39;e näidisandmestikku</span></span>
<span id="cb343-2"><a href="sissejuhatus-r-i.html#cb343-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(dt) <span class="ot">&lt;-</span> <span class="fu">tolower</span>(<span class="fu">names</span>(dt))</span></code></pre></div>
<p><strong>Scatterplot</strong></p>
<div class="sourceCode" id="cb344"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb344-1"><a href="sissejuhatus-r-i.html#cb344-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">x =</span> dt<span class="sc">$</span>sepal.length, <span class="at">y =</span> dt<span class="sc">$</span>sepal.width)</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-110-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Saab kasutada ka ainult ühte argumenti.</p>
<div class="sourceCode" id="cb345"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb345-1"><a href="sissejuhatus-r-i.html#cb345-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">x =</span> dt<span class="sc">$</span>sepal.length)</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-111-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Argumendiga <em>type=</em> saab määrata graafiku tüübi. Näiteks “l” joongraafik, “b” jooned ja sümolid koos jne (vaata ?plot).</p>
<div class="sourceCode" id="cb346"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb346-1"><a href="sissejuhatus-r-i.html#cb346-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(dt<span class="sc">$</span>sepal.length, <span class="at">type=</span> <span class="st">&quot;b&quot;</span>)</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-112-1.png" width="480" style="display: block; margin: auto;" /></p>
<p><strong>Histogram</strong></p>
<div class="sourceCode" id="cb347"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb347-1"><a href="sissejuhatus-r-i.html#cb347-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(<span class="at">x =</span> dt<span class="sc">$</span>sepal.length)</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-113-1.png" width="480" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb348"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb348-1"><a href="sissejuhatus-r-i.html#cb348-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(<span class="at">x =</span> dt<span class="sc">$</span>sepal.length, <span class="at">breaks =</span> <span class="dv">20</span>)</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-114-1.png" width="480" style="display: block; margin: auto;" /></p>
<p><strong>Boxplot</strong></p>
<p>Ühele grupile</p>
<div class="sourceCode" id="cb349"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb349-1"><a href="sissejuhatus-r-i.html#cb349-1" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(dt<span class="sc">$</span>sepal.length)</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-115-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Mitme grupi lõikes peab kasutama <em>formula</em> märki (~)</p>
<div class="sourceCode" id="cb350"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb350-1"><a href="sissejuhatus-r-i.html#cb350-1" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(dt<span class="sc">$</span>sepal.length <span class="sc">~</span> dt<span class="sc">$</span>species)</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-116-1.png" width="480" style="display: block; margin: auto;" /></p>
<p><strong>Barplot</strong></p>
<p>Barplot’i jaoks on sisendiks vaja tabelit</p>
<div class="sourceCode" id="cb351"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb351-1"><a href="sissejuhatus-r-i.html#cb351-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb351-2"><a href="sissejuhatus-r-i.html#cb351-2" aria-hidden="true" tabindex="-1"></a>d_bar <span class="ot">&lt;-</span> dt<span class="sc">%&gt;%</span></span>
<span id="cb351-3"><a href="sissejuhatus-r-i.html#cb351-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(sepal.length<span class="sc">&gt;</span><span class="fl">5.5</span>)<span class="sc">%&gt;%</span></span>
<span id="cb351-4"><a href="sissejuhatus-r-i.html#cb351-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(species)<span class="sc">%&gt;%</span></span>
<span id="cb351-5"><a href="sissejuhatus-r-i.html#cb351-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">table</span>()</span>
<span id="cb351-6"><a href="sissejuhatus-r-i.html#cb351-6" aria-hidden="true" tabindex="-1"></a>d_bar</span></code></pre></div>
<pre><code>## .
##     setosa versicolor  virginica 
##          3         39         49</code></pre>
<div class="sourceCode" id="cb353"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb353-1"><a href="sissejuhatus-r-i.html#cb353-1" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(d_bar)</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-118-1.png" width="480" style="display: block; margin: auto;" /></p>
<p><strong>Baasgraafikute parameetrid</strong></p>
<ul>
<li>pch: graafikul esitatv sümbol (vaikimisi ring)</li>
<li>lty: joone tüüp (vaikimisi tavaline)</li>
<li>ldw: joone laius (numbriline vaikimisi 1)</li>
<li>col: värv (colors() funktsiooniga näeb võimalikke värve)</li>
<li>xlab ja ylab: telgede nimed (tekstiline väärtus)</li>
<li>xlim ja ylim: telgede limiidid (kui on vaja neid suurenda või vähendada)</li>
</ul>
<div class="sourceCode" id="cb354"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb354-1"><a href="sissejuhatus-r-i.html#cb354-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">x =</span> dt<span class="sc">$</span>sepal.length, <span class="at">y =</span> dt<span class="sc">$</span>sepal.width,</span>
<span id="cb354-2"><a href="sissejuhatus-r-i.html#cb354-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">pch=</span><span class="dv">2</span>,</span>
<span id="cb354-3"><a href="sissejuhatus-r-i.html#cb354-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">col=</span><span class="st">&quot;red&quot;</span>,</span>
<span id="cb354-4"><a href="sissejuhatus-r-i.html#cb354-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab=</span><span class="st">&quot;Sepal length&quot;</span>,</span>
<span id="cb354-5"><a href="sissejuhatus-r-i.html#cb354-5" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylab=</span><span class="st">&quot;Sepal width&quot;</span>)</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-119-1.png" width="480" style="display: block; margin: auto;" /></p>
<p><code>par()</code> funktsiooniga saab seada <em>globaalseid</em> parameetrieid. Näiteks saab panna mitu graafikut üksteise kõrvale:</p>
<div class="sourceCode" id="cb355"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb355-1"><a href="sissejuhatus-r-i.html#cb355-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span></code></pre></div>
<p>Mis värviparameeter on vaikimisi <em>globaalselt</em> määratletud?</p>
<div class="sourceCode" id="cb356"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb356-1"><a href="sissejuhatus-r-i.html#cb356-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="st">&quot;col&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;black&quot;</code></pre>
<p><strong>Baasgraafikute ehitamine</strong></p>
<p>Graafikutele saab lisada erinevaid komponente või ka teisi graafikuid. nii on võimalik vajalik graafik kokku ehitada. Mõned võimalused:</p>
<ul>
<li>lines() joonte lisamine</li>
<li>points() punktide lisamine</li>
<li>text() teksti lisamine</li>
<li>title() palkirja lisamine</li>
<li>legend() legendi lisamine</li>
</ul>
<div class="sourceCode" id="cb358"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb358-1"><a href="sissejuhatus-r-i.html#cb358-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">x =</span> dt<span class="sc">$</span>sepal.length, <span class="at">y =</span> dt<span class="sc">$</span>sepal.width,</span>
<span id="cb358-2"><a href="sissejuhatus-r-i.html#cb358-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab=</span><span class="st">&quot;Sepal length&quot;</span>,</span>
<span id="cb358-3"><a href="sissejuhatus-r-i.html#cb358-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylab=</span><span class="st">&quot;Sepal width&quot;</span>)</span>
<span id="cb358-4"><a href="sissejuhatus-r-i.html#cb358-4" aria-hidden="true" tabindex="-1"></a>dt2 <span class="ot">&lt;-</span> dt <span class="sc">%&gt;%</span></span>
<span id="cb358-5"><a href="sissejuhatus-r-i.html#cb358-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(species<span class="sc">==</span><span class="st">&quot;setosa&quot;</span>)</span>
<span id="cb358-6"><a href="sissejuhatus-r-i.html#cb358-6" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(dt2<span class="sc">$</span>sepal.length, dt2<span class="sc">$</span>sepal.width, <span class="at">col=</span><span class="st">&quot;red&quot;</span>)</span>
<span id="cb358-7"><a href="sissejuhatus-r-i.html#cb358-7" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">&quot;topright&quot;</span>, <span class="at">pch=</span><span class="dv">1</span>, <span class="at">col=</span><span class="fu">c</span>(<span class="st">&quot;black&quot;</span>, <span class="st">&quot;red&quot;</span>),<span class="at">legend =</span> <span class="fu">c</span>(<span class="st">&quot;muu&quot;</span>, <span class="st">&quot;seotsa&quot;</span>))</span>
<span id="cb358-8"><a href="sissejuhatus-r-i.html#cb358-8" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span>(<span class="at">main =</span> <span class="st">&quot;Pealkiri&quot;</span>)</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-122-1.png" width="480" style="display: block; margin: auto;" /></p>
</div>
<div id="ggplot" class="section level3" number="2.4.2">
<h3><span class="header-section-number">2.4.2</span> ggplot</h3>
<p>ggplot’i lähtekohaks on Leland Wilkinsoni <em>graafika grammatika</em>, mis lähtub põhimõttest, et graafiku võib lahutada eraldiseisvateks komponentideks ja neist komponentidest saab saab uusi tervikuid ehitada.
&gt; “… the grammar tells us that a statistical graphic is a <strong>mapping from data</strong> to
&gt; <strong>aesthetic attributes</strong> (colour, shape, size) of <strong>geometric objects</strong> (points,
&gt; lines, bars). The plot may also contain <strong>statistical transformations</strong> of the data
&gt; and is drawn on a specific <strong>coordinate system</strong>. <strong>Facetting</strong> can be used to generate
&gt; the same plot for diferent subsets of the dataset. It is the combination of these
&gt; independent components that make up a graphic.”
&gt; (Hadley Wickham, “ggplot2: Elegant Graphics for Data Analysis”)</p>
<p><strong>ggploti elemendid</strong></p>
<ul>
<li><code>data</code> : andmed. Üldiselt peaks olema dataframe kujul</li>
<li><code>geom</code> : geomeetriline objekt, mille läbi me oma anmdeid esitame (punktid, jooned, tulbad jne)</li>
<li><code>aes</code> : <em>aesthetic</em> ehk siis kuidas ja mille läbi me oma andmeid geomeetriliste objektidega suhestame (mis on x ja y telg, värv, kuju, suurus). Need on joonise objektide visuaalsed omadused</li>
<li><code>facet</code> : tahud ehk kuidas joonist alamosadeks (tahkudeks) jagada</li>
<li><code>stat</code> : milliseid statistilisi transformatsioone on vaja kasutada</li>
<li><code>scales</code> : kuidas andmete reaalsed väärtused joonise väärtusteks tõlgendatakse</li>
<li><code>coord</code> : mis koordinaatsüsteemi kasutada. Üldiselt <code>cartesian</code></li>
<li><code>positsion</code> : andmeobjektide positsioonide nihutamine</li>
<li><code>guides</code> : teljed, legendid jne</li>
<li><code>theme</code> : joonise üldine kujundus (kus asub legend, mis värvi on tagapõhi jne)</li>
</ul>
<p>Installime ggplot’i (kui me seda jua teinud ei ole) ja laadime selleks sessiooniks. Üritame teha regressioonijoontega <em>scatterploti</em>.</p>
<div class="sourceCode" id="cb359"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb359-1"><a href="sissejuhatus-r-i.html#cb359-1" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages(&quot;ggplot2&quot;)</span></span>
<span id="cb359-2"><a href="sissejuhatus-r-i.html#cb359-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb359-3"><a href="sissejuhatus-r-i.html#cb359-3" aria-hidden="true" tabindex="-1"></a>dt <span class="ot">&lt;-</span> iris</span>
<span id="cb359-4"><a href="sissejuhatus-r-i.html#cb359-4" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(dt) <span class="ot">&lt;-</span> <span class="fu">tolower</span>(<span class="fu">names</span>(dt))</span></code></pre></div>
<p><strong>Scatterplot</strong></p>
<p>Kõigepealt <code>ggplot</code>i peafunktsioon, kus märgime andmestiku (tegelikult võime seda teha ka <em>geom</em>’i sees). Seejärel lisame <em>geom</em>’i kihi. Liidame selle peafunktsioonile otsa (kasutatdes <code>+</code> märki). Tahame punktdiagrammi, seega <code>geom_point</code> (et saada aimu erinevatest võimalikest <em>geom</em>’idest, võib uurida ggplot’i kodulehte <a href="https://ggplot2.tidyverse.org/reference/" class="uri">https://ggplot2.tidyverse.org/reference/</a> või <em>cheatsheet</em>’i (Help &gt; Cheatsheets &gt; Data visualization with ggplot2)). Defineerime <code>aes</code><em>thetic</em>’u ehk siis <em>mapime</em> tunnused x ja y teljele.</p>
<div class="sourceCode" id="cb360"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb360-1"><a href="sissejuhatus-r-i.html#cb360-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>dt)<span class="sc">+</span></span>
<span id="cb360-2"><a href="sissejuhatus-r-i.html#cb360-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x=</span>sepal.width, <span class="at">y=</span>sepal.length))</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-124-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Tegelikult ei pea argumente välja kirjutama, vaid järjekord on tähtis. Saab ka nii:</p>
<div class="sourceCode" id="cb361"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb361-1"><a href="sissejuhatus-r-i.html#cb361-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dt)<span class="sc">+</span></span>
<span id="cb361-2"><a href="sissejuhatus-r-i.html#cb361-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(sepal.width, sepal.length))</span></code></pre></div>
<p>Tahame erinevad iirise liigid erinevate värvidega grupeerida. Kuna me tahame määrata seda, kuidas andmeid esitatakse (tunnuseid graafikule <em>mapitakse</em>), peame seda tegema <code>aes</code>’i argumendi sees.</p>
<div class="sourceCode" id="cb362"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb362-1"><a href="sissejuhatus-r-i.html#cb362-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>dt)<span class="sc">+</span></span>
<span id="cb362-2"><a href="sissejuhatus-r-i.html#cb362-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x=</span>sepal.width, <span class="at">y=</span>sepal.length, <span class="at">color=</span>species))</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-126-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Saaksime neid eristada ka näiteks kuju <code>shape=</code> või suuruse <code>size=</code> või ka läbipaistvuse <code>alpha=</code> järgi.</p>
<div class="sourceCode" id="cb363"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb363-1"><a href="sissejuhatus-r-i.html#cb363-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>dt)<span class="sc">+</span></span>
<span id="cb363-2"><a href="sissejuhatus-r-i.html#cb363-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x=</span>sepal.width, <span class="at">y=</span>sepal.length, <span class="at">shape=</span>species))</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-127-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Kui me tahame lihtsalt punktide värvi muuta (ja mitte lähtuda mingist grupeerivast tunnusest), saame seda teha väljaspool <code>aes()</code> argumenti.</p>
<div class="sourceCode" id="cb364"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb364-1"><a href="sissejuhatus-r-i.html#cb364-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>dt)<span class="sc">+</span></span>
<span id="cb364-2"><a href="sissejuhatus-r-i.html#cb364-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x=</span>sepal.width, <span class="at">y=</span>sepal.length), <span class="at">color=</span><span class="st">&quot;green&quot;</span>)</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-128-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Oleks vaja joonisele ka regressioonijooned saada. Selleks lisame lihtsalt järgmise kihi (kasutades <code>+</code> märki).<br />
Regressioonijoone joonistamiseks võime kasutada <code>geom_abline()</code>’i, aga sellisel juhul peame regressioonikoefitsiendid enne välja arvutama (<code>geam_abline()</code> vajab sisendiks <em>intercept</em>’i ning <em>slope</em>’i). Lihtsam on kasutada <code>geom_smooth()</code>’i.</p>
<div class="sourceCode" id="cb365"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb365-1"><a href="sissejuhatus-r-i.html#cb365-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>dt)<span class="sc">+</span></span>
<span id="cb365-2"><a href="sissejuhatus-r-i.html#cb365-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x=</span>sepal.width, <span class="at">y=</span>sepal.length, <span class="at">color=</span>species))<span class="sc">+</span></span>
<span id="cb365-3"><a href="sissejuhatus-r-i.html#cb365-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="fu">aes</span>(<span class="at">x=</span>sepal.width, <span class="at">y=</span>sepal.length))</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-129-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Mhh, joon ei meenuta regressioonijoont. Asi on selles, et tegemist on küll regressioonijoonega, kuid mitte harjumuspärase lineaarse regressioonijoonega. <code>geom_smooth</code> kasutab vaikimisi nn <em>Local Polynomial Regression Fitting</em>’ut, mis üritab <em>predictida</em> y väärtuse sõltuvust x’i väärtusest võimalikult täpselt ja lähtudes x’i lähiümbrusest. Aga saame tellida ka tavalise lineaarse regressioonijoone, kasutades argumenti <code>method="lm"</code>.</p>
<div class="sourceCode" id="cb367"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb367-1"><a href="sissejuhatus-r-i.html#cb367-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>dt)<span class="sc">+</span></span>
<span id="cb367-2"><a href="sissejuhatus-r-i.html#cb367-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x=</span>sepal.width, <span class="at">y=</span>sepal.length, <span class="at">color=</span>species))<span class="sc">+</span></span>
<span id="cb367-3"><a href="sissejuhatus-r-i.html#cb367-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="fu">aes</span>(<span class="at">x=</span>sepal.width, <span class="at">y=</span>sepal.length), <span class="at">method=</span><span class="st">&quot;lm&quot;</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-130-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Kõikide iirise liikide kohta eraldi joonte saamiseks tuleb jällegi määrata grupeerimine <code>geom_smooth()</code>’i <code>aes()</code>’i sees (kuna see on eraldi kiht ja eelmise kihi määrangud siin enam ei kehti). Kui me usaldusintervalle mingil põhjusel ei taha, võime need tühistada argumendiga <code>se=F</code>.</p>
<div class="sourceCode" id="cb369"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb369-1"><a href="sissejuhatus-r-i.html#cb369-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>dt)<span class="sc">+</span></span>
<span id="cb369-2"><a href="sissejuhatus-r-i.html#cb369-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x=</span>sepal.width, <span class="at">y=</span>sepal.length, <span class="at">color=</span>species))<span class="sc">+</span></span>
<span id="cb369-3"><a href="sissejuhatus-r-i.html#cb369-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="fu">aes</span>(<span class="at">x=</span>sepal.width, <span class="at">y=</span>sepal.length, <span class="at">color=</span>species), <span class="at">method=</span><span class="st">&quot;lm&quot;</span>, <span class="at">se=</span>F)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-131-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Pidime <code>aes()</code> argumendi määrangud kaks korda järjest välja kirjutama, kuigi nad on identsed. Ei tundu väga mõistlik. Õnneks saab ka lihtsamalt. Võime need määrata ka <code>ggplot()</code> funktsiooni enda sees. Sellisel juhul kehtivad nad ka kõikide järgenvate kihtide kohta (välja arvatud juhul kui järgenvates kihtides on teisiti määratud).</p>
<div class="sourceCode" id="cb371"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb371-1"><a href="sissejuhatus-r-i.html#cb371-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dt, <span class="fu">aes</span>(sepal.width, sepal.length, <span class="at">color=</span>species))<span class="sc">+</span></span>
<span id="cb371-2"><a href="sissejuhatus-r-i.html#cb371-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb371-3"><a href="sissejuhatus-r-i.html#cb371-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">&quot;lm&quot;</span>, <span class="at">se=</span>F)</span></code></pre></div>
<p><strong>Facetid</strong></p>
<p>Gruppe saab eristada ka neid erinevatele tahkudele pannes, kasutades selleks <code>facet_wrap()</code>’i või <code>facet_grid</code>’i. <code>facet_wrap()</code> eristab ühe tunnuse lõikes, <code>facet_grid()</code> mitme tunnuse lõikes. Mõlema puhul tuleb kasutada <em>formula</em> määrangut, st. tuleb kasutada ~ märki (tegelikult ggplot’i viimase versiooni puhul saame kasutada ka argumente <code>rows=</code> ja <code>cols=</code>).</p>
<div class="sourceCode" id="cb372"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb372-1"><a href="sissejuhatus-r-i.html#cb372-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dt, <span class="fu">aes</span>(sepal.width, sepal.length))<span class="sc">+</span></span>
<span id="cb372-2"><a href="sissejuhatus-r-i.html#cb372-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb372-3"><a href="sissejuhatus-r-i.html#cb372-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">&quot;lm&quot;</span>, <span class="at">se=</span>F)<span class="sc">+</span></span>
<span id="cb372-4"><a href="sissejuhatus-r-i.html#cb372-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>species)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-133-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Kui tahame tahkusid näiteks ainult kahes tulbas, saame kasutada argumenti <code>nrow=</code> või <code>ncol=</code>.</p>
<div class="sourceCode" id="cb374"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb374-1"><a href="sissejuhatus-r-i.html#cb374-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dt, <span class="fu">aes</span>(sepal.width, sepal.length))<span class="sc">+</span></span>
<span id="cb374-2"><a href="sissejuhatus-r-i.html#cb374-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb374-3"><a href="sissejuhatus-r-i.html#cb374-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">&quot;lm&quot;</span>, <span class="at">se=</span>F)<span class="sc">+</span></span>
<span id="cb374-4"><a href="sissejuhatus-r-i.html#cb374-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>species, <span class="at">ncol=</span><span class="dv">2</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-134-1.png" width="480" style="display: block; margin: auto;" /></p>
<p><code>facet_grid()</code>’i ja kahe tunnuse lõikes tahkude illustreerimiseks meil <em>iris</em>’e andmestikus piisavalt kategoriaalseid tunnuseid ei ole. Aga ggplotiga tuleb kaasa <code>diamonds</code> andmebaas. Vaatame seda:</p>
<div class="sourceCode" id="cb376"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb376-1"><a href="sissejuhatus-r-i.html#cb376-1" aria-hidden="true" tabindex="-1"></a>dt1 <span class="ot">&lt;-</span> diamonds</span>
<span id="cb376-2"><a href="sissejuhatus-r-i.html#cb376-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dt1)</span></code></pre></div>
<pre><code>## tibble [53,940 x 10] (S3: tbl_df/tbl/data.frame)
##  $ carat  : num [1:53940] 0.23 0.21 0.23 0.29 0.31 0.24 0.24 0.26 0.22 0.23 ...
##  $ cut    : Ord.factor w/ 5 levels &quot;Fair&quot;&lt;&quot;Good&quot;&lt;..: 5 4 2 4 2 3 3 3 1 3 ...
##  $ color  : Ord.factor w/ 7 levels &quot;D&quot;&lt;&quot;E&quot;&lt;&quot;F&quot;&lt;&quot;G&quot;&lt;..: 2 2 2 6 7 7 6 5 2 5 ...
##  $ clarity: Ord.factor w/ 8 levels &quot;I1&quot;&lt;&quot;SI2&quot;&lt;&quot;SI1&quot;&lt;..: 2 3 5 4 2 6 7 3 4 5 ...
##  $ depth  : num [1:53940] 61.5 59.8 56.9 62.4 63.3 62.8 62.3 61.9 65.1 59.4 ...
##  $ table  : num [1:53940] 55 61 65 58 58 57 57 55 61 61 ...
##  $ price  : int [1:53940] 326 326 327 334 335 336 336 337 337 338 ...
##  $ x      : num [1:53940] 3.95 3.89 4.05 4.2 4.34 3.94 3.95 4.07 3.87 4 ...
##  $ y      : num [1:53940] 3.98 3.84 4.07 4.23 4.35 3.96 3.98 4.11 3.78 4.05 ...
##  $ z      : num [1:53940] 2.43 2.31 2.31 2.63 2.75 2.48 2.47 2.53 2.49 2.39 ...</code></pre>
<p>Kuidas on seotud teemandite karaadid (<em>carat</em>) ja nende hind (<em>price</em>)?</p>
<div class="sourceCode" id="cb378"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb378-1"><a href="sissejuhatus-r-i.html#cb378-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dt1)<span class="sc">+</span></span>
<span id="cb378-2"><a href="sissejuhatus-r-i.html#cb378-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x=</span>carat, <span class="at">y=</span>price))</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-136-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Kuidas siia suhestub teemandite selgus (<em>clarity</em>)?</p>
<div class="sourceCode" id="cb379"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb379-1"><a href="sissejuhatus-r-i.html#cb379-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dt1)<span class="sc">+</span></span>
<span id="cb379-2"><a href="sissejuhatus-r-i.html#cb379-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x=</span>carat, <span class="at">y=</span>price, <span class="at">color=</span>clarity))</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-137-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Aga nende lõige <em>cut</em>? kasutame selleks <code>facet_grid()</code>’i. Kui tahame <code>facet_grid()</code>’iga ainult ühe tunnuse lõikes tahke tekitada, tuleb teise tunnuse asemel kasuatada punkti. Seda, kas tahud on tulbas või reas, saab määrata sellega, kuhupoole ~ märki punkt panna.</p>
<div class="sourceCode" id="cb380"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb380-1"><a href="sissejuhatus-r-i.html#cb380-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dt1)<span class="sc">+</span></span>
<span id="cb380-2"><a href="sissejuhatus-r-i.html#cb380-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x=</span>carat, <span class="at">y=</span>price, <span class="at">color=</span>clarity))<span class="sc">+</span></span>
<span id="cb380-3"><a href="sissejuhatus-r-i.html#cb380-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(cut <span class="sc">~</span> .)</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-138-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Lisame veel phe tunnuse, mille lõikes teemantide erisusi vaadata, värvi (<em>color</em>).</p>
<div class="sourceCode" id="cb381"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb381-1"><a href="sissejuhatus-r-i.html#cb381-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dt1)<span class="sc">+</span></span>
<span id="cb381-2"><a href="sissejuhatus-r-i.html#cb381-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x=</span>carat, <span class="at">y=</span>price, <span class="at">color=</span>clarity))<span class="sc">+</span></span>
<span id="cb381-3"><a href="sissejuhatus-r-i.html#cb381-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(cut <span class="sc">~</span> color)</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-139-1.png" width="2400" style="display: block; margin: auto;" /></p>
<p><strong>Geomid ja aestetikud</strong></p>
<p>Erinevaid <code>geom</code>’e on päris palju. Kõik nad on üles loetletud ggplot’i kodulehel (koos suure hulga muu infoga): <a href="https://ggplot2.tidyverse.org/reference/" class="uri">https://ggplot2.tidyverse.org/reference/</a>. Aga mõned olulisemad:</p>
<ul>
<li><code>geom_bar()</code></li>
<li><code>geom_histogram()</code> ja <code>geom_freqpoly()</code></li>
<li><code>geom_boxplot()</code> ja <code>geom_violin()</code></li>
<li><code>geom_line()</code> ja <code>geom_path()</code></li>
<li><code>geom_density()</code></li>
<li><code>geom_abline()</code>, <code>geom_hline()</code> ja <code>geom_vline()</code></li>
<li><code>geom_text()</code></li>
</ul>
<p><strong>Barplot</strong></p>
<p>Tavaline <em>barplot</em></p>
<div class="sourceCode" id="cb382"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb382-1"><a href="sissejuhatus-r-i.html#cb382-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dt1)<span class="sc">+</span></span>
<span id="cb382-2"><a href="sissejuhatus-r-i.html#cb382-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(clarity))</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-140-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Kahe tunnuse lõikes tulpdiagrammi jaoks peame kasutama <code>aes()</code> sees argumenti <code>fill=</code>.</p>
<div class="sourceCode" id="cb383"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb383-1"><a href="sissejuhatus-r-i.html#cb383-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dt1)<span class="sc">+</span></span>
<span id="cb383-2"><a href="sissejuhatus-r-i.html#cb383-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(clarity, <span class="at">fill=</span>cut))</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-141-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Mhh, see vist ei ole päris see mida me silmas pidasime. Pigem tahaksime, et gruppide tulbad asuksid kõrvuti. Selleks peame määratlema geomi positsiooni:</p>
<div class="sourceCode" id="cb384"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb384-1"><a href="sissejuhatus-r-i.html#cb384-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dt1)<span class="sc">+</span></span>
<span id="cb384-2"><a href="sissejuhatus-r-i.html#cb384-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(clarity, <span class="at">fill=</span>cut), <span class="at">position=</span><span class="st">&quot;dodge&quot;</span>)</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-142-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Või siis kui tahame 100% barplot</p>
<div class="sourceCode" id="cb385"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb385-1"><a href="sissejuhatus-r-i.html#cb385-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dt1)<span class="sc">+</span></span>
<span id="cb385-2"><a href="sissejuhatus-r-i.html#cb385-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(clarity, <span class="at">fill=</span>cut), <span class="at">position =</span> <span class="st">&quot;fill&quot;</span>)</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-143-1.png" width="480" style="display: block; margin: auto;" /></p>
<p><strong>Boxplot ja violin plot</strong></p>
<div class="sourceCode" id="cb386"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb386-1"><a href="sissejuhatus-r-i.html#cb386-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dt1)<span class="sc">+</span></span>
<span id="cb386-2"><a href="sissejuhatus-r-i.html#cb386-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>color, <span class="at">y=</span>carat))</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-144-1.png" width="480" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb387"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb387-1"><a href="sissejuhatus-r-i.html#cb387-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dt1)<span class="sc">+</span></span>
<span id="cb387-2"><a href="sissejuhatus-r-i.html#cb387-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="fu">aes</span>(<span class="at">x=</span>color, <span class="at">y=</span>carat))</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-145-1.png" width="480" style="display: block; margin: auto;" /></p>
<p><strong>Histogram ja frequency polygon</strong></p>
<div class="sourceCode" id="cb388"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb388-1"><a href="sissejuhatus-r-i.html#cb388-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dt1)<span class="sc">+</span></span>
<span id="cb388-2"><a href="sissejuhatus-r-i.html#cb388-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x=</span>carat), <span class="at">bins =</span> <span class="dv">50</span>, <span class="at">color=</span><span class="st">&quot;white&quot;</span>)</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-146-1.png" width="480" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb389"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb389-1"><a href="sissejuhatus-r-i.html#cb389-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dt1)<span class="sc">+</span></span>
<span id="cb389-2"><a href="sissejuhatus-r-i.html#cb389-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_freqpoly</span>(<span class="fu">aes</span>(<span class="at">x=</span>carat))</span></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-147-1.png" width="480" style="display: block; margin: auto;" /></p>
<p><strong>Keskmised ja usalduspiirid</strong></p>
<p>Väga tihti on meil vaja esitada keskmiste või proportsioonide punkthinnanguid mingite gruppide lõikes koos usaldusintervallidega. Selleks on meil kõigepealt vaja keskmisi ja usaldusintervalle. ggplot neid ise ei arvuta. Aga <em>dplyr</em>’i abil saab need võrdlemisi lihtsalt kätte. t-jaotuse kvartiilid on leitavad <code>qt(p, df)</code> funktsiooniga (p on siis tõenäosus).<br />
Leiame teemantite keskmised hinnad koos usalduspiiridega teemadite lõiketi (<em>cut</em>):</p>
<div class="sourceCode" id="cb391"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb391-1"><a href="sissejuhatus-r-i.html#cb391-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb391-2"><a href="sissejuhatus-r-i.html#cb391-2" aria-hidden="true" tabindex="-1"></a>keskmised <span class="ot">&lt;-</span> dt1 <span class="sc">%&gt;%</span></span>
<span id="cb391-3"><a href="sissejuhatus-r-i.html#cb391-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(cut)<span class="sc">%&gt;%</span></span>
<span id="cb391-4"><a href="sissejuhatus-r-i.html#cb391-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">keskmine=</span><span class="fu">mean</span>(price),</span>
<span id="cb391-5"><a href="sissejuhatus-r-i.html#cb391-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">se=</span><span class="fu">sd</span>(price)<span class="sc">/</span><span class="fu">sqrt</span>(<span class="fu">length</span>(price)),</span>
<span id="cb391-6"><a href="sissejuhatus-r-i.html#cb391-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">l.ci=</span>keskmine<span class="sc">-</span><span class="fu">qt</span>(<span class="fl">0.975</span>, <span class="fu">length</span>(price)<span class="sc">-</span><span class="dv">1</span>)<span class="sc">*</span>se,</span>
<span id="cb391-7"><a href="sissejuhatus-r-i.html#cb391-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">u.ci=</span>keskmine<span class="sc">+</span><span class="fu">qt</span>(<span class="fl">0.975</span>, <span class="fu">length</span>(price)<span class="sc">-</span><span class="dv">1</span>)<span class="sc">*</span>se)</span>
<span id="cb391-8"><a href="sissejuhatus-r-i.html#cb391-8" aria-hidden="true" tabindex="-1"></a>keskmised</span></code></pre></div>
<pre><code>## # A tibble: 5 x 5
##   cut       keskmine    se  l.ci  u.ci
##   &lt;ord&gt;        &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 Fair         4359.  88.7 4185. 4533.
## 2 Good         3929.  52.6 3826. 4032.
## 3 Very Good    3982.  35.8 3912. 4052.
## 4 Premium      4584.  37.0 4512. 4657.
## 5 Ideal        3458.  25.9 3407. 3508.</code></pre>
<p>Kasutame <code>geom_point()</code>’i keskmiste visualiseerimiseks ja <code>geom_linerange()</code>’i usalduspiiride märkimiseks</p>
<div class="sourceCode" id="cb393"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb393-1"><a href="sissejuhatus-r-i.html#cb393-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(keskmised, <span class="fu">aes</span>(cut, keskmine))<span class="sc">+</span></span>
<span id="cb393-2"><a href="sissejuhatus-r-i.html#cb393-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb393-3"><a href="sissejuhatus-r-i.html#cb393-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_linerange</span>(<span class="fu">aes</span>(<span class="at">ymin=</span>l.ci, <span class="at">ymax=</span>u.ci))<span class="sc">+</span></span>
<span id="cb393-4"><a href="sissejuhatus-r-i.html#cb393-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="co"># saame joonise teljed ära vahetada</span></span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-149-1.png" width="480" style="display: block; margin: auto;" /></p>
<p><strong>Joonise disain</strong></p>
<p>ggplot võimaldab kontrollida praktiliselt kogu joonise väljanägemist. Vaatame mõnda olulisemat võimalust: telgede nimed ja joonise pealkiri</p>
<div class="sourceCode" id="cb394"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb394-1"><a href="sissejuhatus-r-i.html#cb394-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(keskmised, <span class="fu">aes</span>(cut, keskmine))<span class="sc">+</span></span>
<span id="cb394-2"><a href="sissejuhatus-r-i.html#cb394-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb394-3"><a href="sissejuhatus-r-i.html#cb394-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_linerange</span>(<span class="fu">aes</span>(<span class="at">ymin=</span>l.ci, <span class="at">ymax=</span>u.ci))<span class="sc">+</span></span>
<span id="cb394-4"><a href="sissejuhatus-r-i.html#cb394-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb394-5"><a href="sissejuhatus-r-i.html#cb394-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Hind&quot;</span>)<span class="sc">+</span></span>
<span id="cb394-6"><a href="sissejuhatus-r-i.html#cb394-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Lõige&quot;</span>)<span class="sc">+</span></span>
<span id="cb394-7"><a href="sissejuhatus-r-i.html#cb394-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Teemantite hind&quot;</span>)</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-150-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Kui me tahame telgede nimedest lahti saada:</p>
<div class="sourceCode" id="cb395"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb395-1"><a href="sissejuhatus-r-i.html#cb395-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(keskmised, <span class="fu">aes</span>(cut, keskmine))<span class="sc">+</span></span>
<span id="cb395-2"><a href="sissejuhatus-r-i.html#cb395-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb395-3"><a href="sissejuhatus-r-i.html#cb395-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_linerange</span>(<span class="fu">aes</span>(<span class="at">ymin=</span>l.ci, <span class="at">ymax=</span>u.ci))<span class="sc">+</span></span>
<span id="cb395-4"><a href="sissejuhatus-r-i.html#cb395-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb395-5"><a href="sissejuhatus-r-i.html#cb395-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="cn">NULL</span>)<span class="sc">+</span></span>
<span id="cb395-6"><a href="sissejuhatus-r-i.html#cb395-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="cn">NULL</span>)</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-151-1.png" width="480" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb396"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb396-1"><a href="sissejuhatus-r-i.html#cb396-1" aria-hidden="true" tabindex="-1"></a><span class="co"># või ka nii:</span></span>
<span id="cb396-2"><a href="sissejuhatus-r-i.html#cb396-2" aria-hidden="true" tabindex="-1"></a><span class="co"># ggplot(keskmised, aes(cut, keskmine))+</span></span>
<span id="cb396-3"><a href="sissejuhatus-r-i.html#cb396-3" aria-hidden="true" tabindex="-1"></a><span class="co">#   geom_point()+</span></span>
<span id="cb396-4"><a href="sissejuhatus-r-i.html#cb396-4" aria-hidden="true" tabindex="-1"></a><span class="co">#   geom_linerange(aes(ymin=l.ci, ymax=u.ci))+</span></span>
<span id="cb396-5"><a href="sissejuhatus-r-i.html#cb396-5" aria-hidden="true" tabindex="-1"></a><span class="co">#   coord_flip()+</span></span>
<span id="cb396-6"><a href="sissejuhatus-r-i.html#cb396-6" aria-hidden="true" tabindex="-1"></a><span class="co">#   labs(x = NULL, y = NULL)</span></span></code></pre></div>
<p><code>xlab</code> ja <code>ylab</code> on tegelikult mugavdatud variandid <code>scale</code> funktsioonidest. <code>scale</code> funktsioonid kontrollivad seda kuidas andmed mappitakse <code>aes()</code>’i. Võetakse andmed ja teakse neist midagi joonisel nähtavat. Igal <em>aestheticul</em> on oma <code>scale</code>:<br />
- Kui x telg on pidev: <code>scale_x_continuous</code>
- Kui y telg on kategoriaalne: <code>scale_y_discrete</code>
- Kui kasutame <code>fill</code> <code>aes</code>’i: <code>scale_fill_discrete</code></p>
<div class="sourceCode" id="cb397"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb397-1"><a href="sissejuhatus-r-i.html#cb397-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(keskmised, <span class="fu">aes</span>(cut, keskmine))<span class="sc">+</span></span>
<span id="cb397-2"><a href="sissejuhatus-r-i.html#cb397-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb397-3"><a href="sissejuhatus-r-i.html#cb397-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_linerange</span>(<span class="fu">aes</span>(<span class="at">ymin=</span>l.ci, <span class="at">ymax=</span>u.ci))<span class="sc">+</span></span>
<span id="cb397-4"><a href="sissejuhatus-r-i.html#cb397-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb397-5"><a href="sissejuhatus-r-i.html#cb397-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">name=</span><span class="st">&quot;Lõige&quot;</span>)<span class="sc">+</span></span>
<span id="cb397-6"><a href="sissejuhatus-r-i.html#cb397-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name=</span><span class="st">&quot;Hind&quot;</span>)</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-152-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Saame kontrollida ka <em>tick mark</em>’e ja <em>label</em>’eid</p>
<div class="sourceCode" id="cb398"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb398-1"><a href="sissejuhatus-r-i.html#cb398-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(keskmised, <span class="fu">aes</span>(cut, keskmine))<span class="sc">+</span></span>
<span id="cb398-2"><a href="sissejuhatus-r-i.html#cb398-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb398-3"><a href="sissejuhatus-r-i.html#cb398-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_linerange</span>(<span class="fu">aes</span>(<span class="at">ymin=</span>l.ci, <span class="at">ymax=</span>u.ci))<span class="sc">+</span></span>
<span id="cb398-4"><a href="sissejuhatus-r-i.html#cb398-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb398-5"><a href="sissejuhatus-r-i.html#cb398-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">name=</span><span class="st">&quot;Lõige&quot;</span>, <span class="at">labels=</span><span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>))<span class="sc">+</span></span>
<span id="cb398-6"><a href="sissejuhatus-r-i.html#cb398-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name=</span><span class="st">&quot;Hind&quot;</span>, <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">3000</span>,<span class="dv">5000</span>, <span class="at">by=</span><span class="dv">100</span>))</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-153-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Kõige võimsam joonise visuaali tööriist, millega saab kontrollida pea kõike, on <code>theme()</code>. Täpsemalt saab selle kohta lugeda <a href="https://ggplot2.tidyverse.org/reference/theme.html" class="uri">https://ggplot2.tidyverse.org/reference/theme.html</a>. Vaatame näiteks, kuidas <code>theme()</code> abil muula legendi asukohta ning kustutada x-telje skaala:</p>
<div class="sourceCode" id="cb399"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb399-1"><a href="sissejuhatus-r-i.html#cb399-1" aria-hidden="true" tabindex="-1"></a>dt <span class="ot">&lt;-</span> iris</span>
<span id="cb399-2"><a href="sissejuhatus-r-i.html#cb399-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(dt) <span class="ot">&lt;-</span> <span class="fu">tolower</span>(<span class="fu">names</span>(dt))</span>
<span id="cb399-3"><a href="sissejuhatus-r-i.html#cb399-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dt, <span class="fu">aes</span>(sepal.width, sepal.length, <span class="at">color=</span>species))<span class="sc">+</span></span>
<span id="cb399-4"><a href="sissejuhatus-r-i.html#cb399-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb399-5"><a href="sissejuhatus-r-i.html#cb399-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;bottom&quot;</span>,</span>
<span id="cb399-6"><a href="sissejuhatus-r-i.html#cb399-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_blank</span>())</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-154-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Saame üksikasjalikult muuta praktiliselt kogu joonise väljanägemist. Saame kasutada ka juba mõningaid valmistehtud <code>theme()</code>’ide <em>template</em>’e. Näiteks <code>theme_bw()</code>.</p>
<div class="sourceCode" id="cb400"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb400-1"><a href="sissejuhatus-r-i.html#cb400-1" aria-hidden="true" tabindex="-1"></a>dt <span class="ot">&lt;-</span> iris</span>
<span id="cb400-2"><a href="sissejuhatus-r-i.html#cb400-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(dt) <span class="ot">&lt;-</span> <span class="fu">tolower</span>(<span class="fu">names</span>(dt))</span>
<span id="cb400-3"><a href="sissejuhatus-r-i.html#cb400-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dt, <span class="fu">aes</span>(sepal.width, sepal.length, <span class="at">color=</span>species))<span class="sc">+</span></span>
<span id="cb400-4"><a href="sissejuhatus-r-i.html#cb400-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb400-5"><a href="sissejuhatus-r-i.html#cb400-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-155-1.png" width="480" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="edasiseks-lugemiseks" class="section level2" number="2.5">
<h2><span class="header-section-number">2.5</span> Edasiseks lugemiseks</h2>
<ul>
<li>R’i baasteadmised
<ul>
<li>Daniel Navarro, “Learning statistics with R: A tutorial for psychology students and other beginners,” peatükid 3, 4, 5, 7<br />
</li>
</ul></li>
<li>dplyr
<ul>
<li><a href="https://cran.r-project.org/web/packages/dplyr/vignettes/dplyr.html" class="uri">https://cran.r-project.org/web/packages/dplyr/vignettes/dplyr.html</a></li>
</ul></li>
<li>ggplot
<ul>
<li>Grolemund, G., Wickham, H., “R for Data Science.” peatükk 3 “Data visualisation” <a href="http://r4ds.had.co.nz/" class="uri">http://r4ds.had.co.nz/</a></li>
</ul></li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="lineaarne-regressioon.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
