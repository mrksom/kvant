<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Peatükk 40 ggplot2 | Kvantitatiivne andmeanalüüs</title>
  <meta name="description" content="Peatükk 40 ggplot2 | Kvantitatiivne andmeanalüüs" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Peatükk 40 ggplot2 | Kvantitatiivne andmeanalüüs" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Peatükk 40 ggplot2 | Kvantitatiivne andmeanalüüs" />
  
  
  

<meta name="author" content="Marko Sõmer" />


<meta name="date" content="2022-02-18" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="ri-baasgraafikud.html"/>
<link rel="next" href="lugemiseks.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Kvant II</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Sissejuhatus</a></li>
<li class="chapter" data-level="2" data-path="sissejuhatus-r-i.html"><a href="sissejuhatus-r-i.html"><i class="fa fa-check"></i><b>2</b> Sissejuhatus R-i</a></li>
<li class="chapter" data-level="3" data-path="mis-see-r-on.html"><a href="mis-see-r-on.html"><i class="fa fa-check"></i><b>3</b> Mis see R on?</a></li>
<li class="chapter" data-level="4" data-path="miks-r.html"><a href="miks-r.html"><i class="fa fa-check"></i><b>4</b> Miks R?</a></li>
<li class="chapter" data-level="5" data-path="mida-ri-kasutamiseks-vaja-on.html"><a href="mida-ri-kasutamiseks-vaja-on.html"><i class="fa fa-check"></i><b>5</b> Mida R’i kasutamiseks vaja on?</a></li>
<li class="chapter" data-level="6" data-path="kuidas-ri-ja-rstudiot-kasutada.html"><a href="kuidas-ri-ja-rstudiot-kasutada.html"><i class="fa fa-check"></i><b>6</b> Kuidas R’i ja RStudiot kasutada?</a></li>
<li class="chapter" data-level="7" data-path="r-kui-kalkulaator.html"><a href="r-kui-kalkulaator.html"><i class="fa fa-check"></i><b>7</b> R kui kalkulaator</a></li>
<li class="chapter" data-level="8" data-path="loogilised-tehted.html"><a href="loogilised-tehted.html"><i class="fa fa-check"></i><b>8</b> Loogilised tehted</a></li>
<li class="chapter" data-level="9" data-path="andmeobjektid.html"><a href="andmeobjektid.html"><i class="fa fa-check"></i><b>9</b> Andmeobjektid</a>
<ul>
<li class="chapter" data-level="9.1" data-path="andmeobjektid.html"><a href="andmeobjektid.html#loogilised-andmed-true-või-false"><i class="fa fa-check"></i><b>9.1</b> Loogilised andmed (TRUE või FALSE)</a></li>
<li class="chapter" data-level="9.2" data-path="andmeobjektid.html"><a href="andmeobjektid.html#puuduvad-väärtused"><i class="fa fa-check"></i><b>9.2</b> Puuduvad väärtused</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="ülesanne.html"><a href="ülesanne.html"><i class="fa fa-check"></i><b>10</b> Ülesanne</a></li>
<li class="chapter" data-level="11" data-path="funktsioonid.html"><a href="funktsioonid.html"><i class="fa fa-check"></i><b>11</b> Funktsioonid</a></li>
<li class="chapter" data-level="12" data-path="kuidas-abi-saada.html"><a href="kuidas-abi-saada.html"><i class="fa fa-check"></i><b>12</b> Kuidas abi saada?</a></li>
<li class="chapter" data-level="13" data-path="vektorid.html"><a href="vektorid.html"><i class="fa fa-check"></i><b>13</b> Vektorid</a>
<ul>
<li class="chapter" data-level="13.1" data-path="vektorid.html"><a href="vektorid.html#indekseerimine"><i class="fa fa-check"></i><b>13.1</b> Indekseerimine</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="ülesanne-1.html"><a href="ülesanne-1.html"><i class="fa fa-check"></i><b>14</b> Ülesanne</a></li>
<li class="chapter" data-level="15" data-path="maatriksid.html"><a href="maatriksid.html"><i class="fa fa-check"></i><b>15</b> Maatriksid</a></li>
<li class="chapter" data-level="16" data-path="andmeobjektide-klassid.html"><a href="andmeobjektide-klassid.html"><i class="fa fa-check"></i><b>16</b> Andmeobjektide klassid</a></li>
<li class="chapter" data-level="17" data-path="ülesanne-2.html"><a href="ülesanne-2.html"><i class="fa fa-check"></i><b>17</b> Ülesanne</a></li>
<li class="chapter" data-level="18" data-path="data-frame-andmestik.html"><a href="data-frame-andmestik.html"><i class="fa fa-check"></i><b>18</b> Data frame (andmestik)</a></li>
<li class="chapter" data-level="19" data-path="ülesanne-3.html"><a href="ülesanne-3.html"><i class="fa fa-check"></i><b>19</b> Ülesanne</a></li>
<li class="chapter" data-level="20" data-path="data-framei-modifitseerimine.html"><a href="data-framei-modifitseerimine.html"><i class="fa fa-check"></i><b>20</b> Data frame’i modifitseerimine</a></li>
<li class="chapter" data-level="21" data-path="ülesanne-4.html"><a href="ülesanne-4.html"><i class="fa fa-check"></i><b>21</b> Ülesanne</a></li>
<li class="chapter" data-level="22" data-path="faktorid.html"><a href="faktorid.html"><i class="fa fa-check"></i><b>22</b> Faktorid</a></li>
<li class="chapter" data-level="23" data-path="ülesanne-5.html"><a href="ülesanne-5.html"><i class="fa fa-check"></i><b>23</b> Ülesanne</a></li>
<li class="chapter" data-level="24" data-path="andmeobjektide-kustutamine.html"><a href="andmeobjektide-kustutamine.html"><i class="fa fa-check"></i><b>24</b> Andmeobjektide kustutamine</a></li>
<li class="chapter" data-level="25" data-path="ri-paketid.html"><a href="ri-paketid.html"><i class="fa fa-check"></i><b>25</b> R’i paketid</a></li>
<li class="chapter" data-level="26" data-path="andmete-sisselugemine.html"><a href="andmete-sisselugemine.html"><i class="fa fa-check"></i><b>26</b> Andmete sisselugemine</a></li>
<li class="chapter" data-level="27" data-path="andmete-salvestamine.html"><a href="andmete-salvestamine.html"><i class="fa fa-check"></i><b>27</b> Andmete salvestamine</a></li>
<li class="chapter" data-level="28" data-path="andestikust-ülevaate-saamine.html"><a href="andestikust-ülevaate-saamine.html"><i class="fa fa-check"></i><b>28</b> Andestikust ülevaate saamine</a></li>
<li class="chapter" data-level="29" data-path="kirjeldav-statistika.html"><a href="kirjeldav-statistika.html"><i class="fa fa-check"></i><b>29</b> Kirjeldav statistika</a></li>
<li class="chapter" data-level="30" data-path="ülesanne-6.html"><a href="ülesanne-6.html"><i class="fa fa-check"></i><b>30</b> Ülesanne</a></li>
<li class="chapter" data-level="31" data-path="tabelid.html"><a href="tabelid.html"><i class="fa fa-check"></i><b>31</b> Tabelid</a></li>
<li class="chapter" data-level="32" data-path="pakett-dplyr.html"><a href="pakett-dplyr.html"><i class="fa fa-check"></i><b>32</b> Pakett dplyr</a>
<ul>
<li class="chapter" data-level="32.1" data-path="pakett-dplyr.html"><a href="pakett-dplyr.html#dplyr-filter"><i class="fa fa-check"></i><b>32.1</b> dplyr: filter</a></li>
<li class="chapter" data-level="32.2" data-path="pakett-dplyr.html"><a href="pakett-dplyr.html#dplyr-select"><i class="fa fa-check"></i><b>32.2</b> dplyr: select</a></li>
<li class="chapter" data-level="32.3" data-path="pakett-dplyr.html"><a href="pakett-dplyr.html#dplyr-arrange"><i class="fa fa-check"></i><b>32.3</b> dplyr: arrange</a></li>
<li class="chapter" data-level="32.4" data-path="pakett-dplyr.html"><a href="pakett-dplyr.html#dplyr-mutate"><i class="fa fa-check"></i><b>32.4</b> dplyr: mutate</a></li>
<li class="chapter" data-level="32.5" data-path="pakett-dplyr.html"><a href="pakett-dplyr.html#dplyr-summarise"><i class="fa fa-check"></i><b>32.5</b> dplyr: summarise</a></li>
<li class="chapter" data-level="32.6" data-path="pakett-dplyr.html"><a href="pakett-dplyr.html#dplyr-group_by"><i class="fa fa-check"></i><b>32.6</b> dplyr: group_by</a></li>
<li class="chapter" data-level="32.7" data-path="pakett-dplyr.html"><a href="pakett-dplyr.html#dplyr-piping"><i class="fa fa-check"></i><b>32.7</b> dplyr: piping</a></li>
<li class="chapter" data-level="32.8" data-path="pakett-dplyr.html"><a href="pakett-dplyr.html#veel-mõned-kasulikud-funktsioonid"><i class="fa fa-check"></i><b>32.8</b> Veel mõned kasulikud funktsioonid</a></li>
</ul></li>
<li class="chapter" data-level="33" data-path="andmete-ühendamine.html"><a href="andmete-ühendamine.html"><i class="fa fa-check"></i><b>33</b> Andmete ühendamine</a></li>
<li class="chapter" data-level="34" data-path="andmestiku-kuju-muutmine.html"><a href="andmestiku-kuju-muutmine.html"><i class="fa fa-check"></i><b>34</b> Andmestiku kuju muutmine</a></li>
<li class="chapter" data-level="35" data-path="kuupäevad.html"><a href="kuupäevad.html"><i class="fa fa-check"></i><b>35</b> Kuupäevad</a></li>
<li class="chapter" data-level="36" data-path="tekstilised-tunnused.html"><a href="tekstilised-tunnused.html"><i class="fa fa-check"></i><b>36</b> Tekstilised tunnused</a></li>
<li class="chapter" data-level="37" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>37</b> R markdown</a></li>
<li class="chapter" data-level="38" data-path="andmegraafika-põhimõtted.html"><a href="andmegraafika-põhimõtted.html"><i class="fa fa-check"></i><b>38</b> Andmegraafika põhimõtted</a></li>
<li class="chapter" data-level="39" data-path="ri-baasgraafikud.html"><a href="ri-baasgraafikud.html"><i class="fa fa-check"></i><b>39</b> R’i baasgraafikud</a>
<ul>
<li class="chapter" data-level="39.1" data-path="ri-baasgraafikud.html"><a href="ri-baasgraafikud.html#scatterplot"><i class="fa fa-check"></i><b>39.1</b> Scatterplot</a></li>
<li class="chapter" data-level="39.2" data-path="ri-baasgraafikud.html"><a href="ri-baasgraafikud.html#histogram"><i class="fa fa-check"></i><b>39.2</b> Histogram</a></li>
<li class="chapter" data-level="39.3" data-path="ri-baasgraafikud.html"><a href="ri-baasgraafikud.html#boxplot"><i class="fa fa-check"></i><b>39.3</b> Boxplot</a></li>
<li class="chapter" data-level="39.4" data-path="ri-baasgraafikud.html"><a href="ri-baasgraafikud.html#barplot"><i class="fa fa-check"></i><b>39.4</b> Barplot</a></li>
<li class="chapter" data-level="39.5" data-path="ri-baasgraafikud.html"><a href="ri-baasgraafikud.html#baasgraafikute-parameetrid"><i class="fa fa-check"></i><b>39.5</b> Baasgraafikute parameetrid</a></li>
<li class="chapter" data-level="39.6" data-path="ri-baasgraafikud.html"><a href="ri-baasgraafikud.html#baasgraafikute-ehitamine"><i class="fa fa-check"></i><b>39.6</b> Baasgraafikute ehitamine</a></li>
</ul></li>
<li class="chapter" data-level="40" data-path="ggplot2.html"><a href="ggplot2.html"><i class="fa fa-check"></i><b>40</b> ggplot2</a>
<ul>
<li class="chapter" data-level="40.1" data-path="ggplot2.html"><a href="ggplot2.html#ggploti-elemendid"><i class="fa fa-check"></i><b>40.1</b> ggploti elemendid</a></li>
<li class="chapter" data-level="40.2" data-path="ggplot2.html"><a href="ggplot2.html#scatterplot-1"><i class="fa fa-check"></i><b>40.2</b> Scatterplot</a></li>
<li class="chapter" data-level="40.3" data-path="ggplot2.html"><a href="ggplot2.html#facetid"><i class="fa fa-check"></i><b>40.3</b> Facetid</a></li>
<li class="chapter" data-level="40.4" data-path="ggplot2.html"><a href="ggplot2.html#geomid-ja-aestetikud"><i class="fa fa-check"></i><b>40.4</b> Geomid ja aestetikud</a></li>
<li class="chapter" data-level="40.5" data-path="ggplot2.html"><a href="ggplot2.html#barplot-1"><i class="fa fa-check"></i><b>40.5</b> Barplot</a></li>
<li class="chapter" data-level="40.6" data-path="ggplot2.html"><a href="ggplot2.html#boxplot-ja-violin-plot"><i class="fa fa-check"></i><b>40.6</b> Boxplot ja violin plot</a></li>
<li class="chapter" data-level="40.7" data-path="ggplot2.html"><a href="ggplot2.html#histogram-ja-frequency-polygon"><i class="fa fa-check"></i><b>40.7</b> Histogram ja frequency polygon</a></li>
<li class="chapter" data-level="40.8" data-path="ggplot2.html"><a href="ggplot2.html#keskmised-ja-usalduspiirid"><i class="fa fa-check"></i><b>40.8</b> Keskmised ja usalduspiirid</a></li>
<li class="chapter" data-level="40.9" data-path="ggplot2.html"><a href="ggplot2.html#joonise-disain"><i class="fa fa-check"></i><b>40.9</b> Joonise disain</a></li>
</ul></li>
<li class="chapter" data-level="41" data-path="lugemiseks.html"><a href="lugemiseks.html"><i class="fa fa-check"></i><b>41</b> Lugemiseks</a></li>
<li class="chapter" data-level="42" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html"><i class="fa fa-check"></i><b>42</b> Lineaarne regressioon</a>
<ul>
<li class="chapter" data-level="42.1" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#lihtne-lineaarne-regressioon"><i class="fa fa-check"></i><b>42.1</b> Lihtne lineaarne regressioon</a></li>
<li class="chapter" data-level="42.2" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#regressioon-r-is"><i class="fa fa-check"></i><b>42.2</b> Regressioon R-is</a></li>
<li class="chapter" data-level="42.3" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#regressiooni-jäägid"><i class="fa fa-check"></i><b>42.3</b> Regressiooni jäägid</a></li>
<li class="chapter" data-level="42.4" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#regressioonimudeli-sobitumine"><i class="fa fa-check"></i><b>42.4</b> Regressioonimudeli sobitumine</a>
<ul>
<li class="chapter" data-level="42.4.1" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#jääkide-jaotus"><i class="fa fa-check"></i><b>42.4.1</b> Jääkide jaotus</a></li>
<li class="chapter" data-level="42.4.2" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#regressioonikoefitsiendid-ja-nende-olulisus"><i class="fa fa-check"></i><b>42.4.2</b> Regressioonikoefitsiendid ja nende olulisus</a></li>
<li class="chapter" data-level="42.4.3" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#jääkide-standardviga"><i class="fa fa-check"></i><b>42.4.3</b> Jääkide standardviga</a></li>
<li class="chapter" data-level="42.4.4" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#r-ruut"><i class="fa fa-check"></i><b>42.4.4</b> R ruut</a></li>
<li class="chapter" data-level="42.4.5" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#f-väärtus-ja-f-test"><i class="fa fa-check"></i><b>42.4.5</b> F-väärtus ja F-test</a></li>
</ul></li>
<li class="chapter" data-level="42.5" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#kategoriaalsed-tunnused-regressioonis"><i class="fa fa-check"></i><b>42.5</b> Kategoriaalsed tunnused regressioonis</a>
<ul>
<li class="chapter" data-level="42.5.1" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#üks-binaarne-sõltumatu-tunnus"><i class="fa fa-check"></i><b>42.5.1</b> Üks binaarne sõltumatu tunnus</a></li>
<li class="chapter" data-level="42.5.2" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#kolme-või-enama-kategooriaga-sõltumatu-tunnus"><i class="fa fa-check"></i><b>42.5.2</b> Kolme või enama kategooriaga sõltumatu tunnus</a></li>
</ul></li>
<li class="chapter" data-level="42.6" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#mitmene-regressioon"><i class="fa fa-check"></i><b>42.6</b> Mitmene regressioon</a>
<ul>
<li class="chapter" data-level="42.6.1" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#kaks-pidevat-sõltumatut-muutujat"><i class="fa fa-check"></i><b>42.6.1</b> Kaks pidevat sõltumatut muutujat</a></li>
</ul></li>
<li class="chapter" data-level="42.7" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#koosmõjud"><i class="fa fa-check"></i><b>42.7</b> Koosmõjud</a>
<ul>
<li class="chapter" data-level="42.7.1" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#koosmõjud-kategoriaalsete-tunnuste-puhul"><i class="fa fa-check"></i><b>42.7.1</b> Koosmõjud kategoriaalsete tunnuste puhul</a></li>
</ul></li>
<li class="chapter" data-level="42.8" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#mudelite-võrdlemine"><i class="fa fa-check"></i><b>42.8</b> Mudelite võrdlemine</a></li>
<li class="chapter" data-level="42.9" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#regressioonimudeli-eeldused"><i class="fa fa-check"></i><b>42.9</b> Regressioonimudeli eeldused</a></li>
<li class="chapter" data-level="42.10" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#kuidas-eelduste-täidetust-hinnata"><i class="fa fa-check"></i><b>42.10</b> Kuidas eelduste täidetust hinnata?</a></li>
</ul></li>
<li class="chapter" data-level="" data-path=""><a href="#part-üldistatud-lineaarsed-mudelid"><i class="fa fa-check"></i>(PART) Üldistatud lineaarsed mudelid</a>
<ul>
<li class="chapter" data-level="42.11" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#šansid"><i class="fa fa-check"></i><b>42.11</b> Šansid</a></li>
<li class="chapter" data-level="42.12" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#logit"><i class="fa fa-check"></i><b>42.12</b> Logit</a></li>
<li class="chapter" data-level="42.13" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#logit-mudel"><i class="fa fa-check"></i><b>42.13</b> Logit mudel</a></li>
<li class="chapter" data-level="42.14" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#mudeli-tõlgendus"><i class="fa fa-check"></i><b>42.14</b> Mudeli tõlgendus</a>
<ul>
<li class="chapter" data-level="42.14.1" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#šansside-suhe"><i class="fa fa-check"></i><b>42.14.1</b> Šansside suhe</a></li>
</ul></li>
<li class="chapter" data-level="42.15" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#logistiline-regressioon-r-is"><i class="fa fa-check"></i><b>42.15</b> Logistiline regressioon R-is</a></li>
<li class="chapter" data-level="42.16" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#mudeli-kvaliteet"><i class="fa fa-check"></i><b>42.16</b> Mudeli kvaliteet</a>
<ul>
<li class="chapter" data-level="42.16.1" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#mudeli-sobivus"><i class="fa fa-check"></i><b>42.16.1</b> Mudeli sobivus</a></li>
<li class="chapter" data-level="42.16.2" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#mudeli-statistiline-olulisus"><i class="fa fa-check"></i><b>42.16.2</b> Mudeli statistiline olulisus</a></li>
<li class="chapter" data-level="42.16.3" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#pseudo-r2"><i class="fa fa-check"></i><b>42.16.3</b> Pseudo-<span class="math inline">\(R^2\)</span></a></li>
</ul></li>
<li class="chapter" data-level="42.17" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#predict"><i class="fa fa-check"></i><b>42.17</b> Predict</a>
<ul>
<li class="chapter" data-level="42.17.1" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#broom"><i class="fa fa-check"></i><b>42.17.1</b> Broom</a></li>
</ul></li>
<li class="chapter" data-level="42.18" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#marginaalsed-efektid"><i class="fa fa-check"></i><b>42.18</b> Marginaalsed efektid</a></li>
<li class="chapter" data-level="42.19" data-path="lineaarne-regressioon.html"><a href="lineaarne-regressioon.html#prognoosi-täpsus"><i class="fa fa-check"></i><b>42.19</b> Prognoosi täpsus</a></li>
</ul></li>
<li class="chapter" data-level="43" data-path="poissoni-regressioon.html"><a href="poissoni-regressioon.html"><i class="fa fa-check"></i><b>43</b> Poissoni regressioon</a>
<ul>
<li class="chapter" data-level="43.1" data-path="poissoni-regressioon.html"><a href="poissoni-regressioon.html#mudeli-tõlgendus-1"><i class="fa fa-check"></i><b>43.1</b> Mudeli tõlgendus</a></li>
<li class="chapter" data-level="43.2" data-path="poissoni-regressioon.html"><a href="poissoni-regressioon.html#poissoni-regressiooni-eeldused"><i class="fa fa-check"></i><b>43.2</b> Poissoni regressiooni eeldused</a></li>
<li class="chapter" data-level="43.3" data-path="poissoni-regressioon.html"><a href="poissoni-regressioon.html#mudeli-hindamine-r-is"><i class="fa fa-check"></i><b>43.3</b> Mudeli hindamine R-is</a>
<ul>
<li class="chapter" data-level="43.3.1" data-path="poissoni-regressioon.html"><a href="poissoni-regressioon.html#andmete-kirjeldus-ja-ettevalmistus"><i class="fa fa-check"></i><b>43.3.1</b> Andmete kirjeldus ja ettevalmistus</a></li>
<li class="chapter" data-level="43.3.2" data-path="poissoni-regressioon.html"><a href="poissoni-regressioon.html#poissoni-mudeli-defineerimine"><i class="fa fa-check"></i><b>43.3.2</b> Poissoni mudeli defineerimine</a></li>
</ul></li>
<li class="chapter" data-level="43.4" data-path="poissoni-regressioon.html"><a href="poissoni-regressioon.html#mudeli-eelduste-kontroll"><i class="fa fa-check"></i><b>43.4</b> Mudeli eelduste kontroll</a>
<ul>
<li class="chapter" data-level="43.4.1" data-path="poissoni-regressioon.html"><a href="poissoni-regressioon.html#üledispersioon"><i class="fa fa-check"></i><b>43.4.1</b> Üledispersioon</a></li>
</ul></li>
<li class="chapter" data-level="43.5" data-path="poissoni-regressioon.html"><a href="poissoni-regressioon.html#mudeli-sobivus-model-fit"><i class="fa fa-check"></i><b>43.5</b> Mudeli sobivus (<em>model fit</em>)</a>
<ul>
<li class="chapter" data-level="43.5.1" data-path="poissoni-regressioon.html"><a href="poissoni-regressioon.html#mudeli-statistiline-olulisus-1"><i class="fa fa-check"></i><b>43.5.1</b> Mudeli statistiline olulisus</a></li>
<li class="chapter" data-level="43.5.2" data-path="poissoni-regressioon.html"><a href="poissoni-regressioon.html#jääkide-jaotus-1"><i class="fa fa-check"></i><b>43.5.2</b> Jääkide jaotus</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="viited.html"><a href="viited.html"><i class="fa fa-check"></i>Viited</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Kvantitatiivne andmeanalüüs</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="ggplot2" class="section level1" number="40">
<h1><span class="header-section-number">Peatükk 40</span> ggplot2</h1>
<p>ggplot’i lähtekohaks on Leland Wilkinsoni <em>graafika grammatika</em>, mis lähtub põhimõttest, et graafiku võib lahutada eraldiseisvateks komponentideks ja neist komponentidest saab saab uusi tervikuid ehitada.
&gt; “… the grammar tells us that a statistical graphic is a <strong>mapping from data</strong> to
&gt; <strong>aesthetic attributes</strong> (colour, shape, size) of <strong>geometric objects</strong> (points,
&gt; lines, bars). The plot may also contain <strong>statistical transformations</strong> of the data
&gt; and is drawn on a specific <strong>coordinate system</strong>. <strong>Facetting</strong> can be used to generate
&gt; the same plot for diferent subsets of the dataset. It is the combination of these
&gt; independent components that make up a graphic.”
&gt; (Hadley Wickham, “ggplot2: Elegant Graphics for Data Analysis”)</p>
<div id="ggploti-elemendid" class="section level2" number="40.1">
<h2><span class="header-section-number">40.1</span> ggploti elemendid</h2>
<ul>
<li><code>data</code> : andmed. Üldiselt peaks olema dataframe kujul</li>
<li><code>geom</code> : geomeetriline objekt, mille läbi me oma anmdeid esitame (punktid, jooned, tulbad jne)</li>
<li><code>aes</code> : <em>aesthetic</em> ehk siis kuidas ja mille läbi me oma andmeid geomeetriliste objektidega suhestame (mis on x ja y telg, värv, kuju, suurus). Need on joonise objektide visuaalsed omadused</li>
<li><code>facet</code> : tahud ehk kuidas joonist alamosadeks (tahkudeks) jagada</li>
<li><code>stat</code> : milliseid statistilisi transformatsioone on vaja kasutada</li>
<li><code>scales</code> : kuidas andmete reaalsed väärtused joonise väärtusteks tõlgendatakse</li>
<li><code>coord</code> : mis koordinaatsüsteemi kasutada. Üldiselt <code>cartesian</code></li>
<li><code>positsion</code> : andmeobjektide positsioonide nihutamine</li>
<li><code>guides</code> : teljed, legendid jne</li>
<li><code>theme</code> : joonise üldine kujundus (kus asub legend, mis värvi on tagapõhi jne)</li>
</ul>
<p>Installime ggplot’i (kui me seda jua teinud ei ole) ja laadime selleks sessiooniks. Üritame teha regressioonijoontega <em>scatterploti</em>.</p>
<div class="sourceCode" id="cb359"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb359-1"><a href="ggplot2.html#cb359-1" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages(&quot;ggplot2&quot;)</span></span>
<span id="cb359-2"><a href="ggplot2.html#cb359-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb359-3"><a href="ggplot2.html#cb359-3" aria-hidden="true" tabindex="-1"></a>dt <span class="ot">&lt;-</span> iris</span>
<span id="cb359-4"><a href="ggplot2.html#cb359-4" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(dt) <span class="ot">&lt;-</span> <span class="fu">tolower</span>(<span class="fu">names</span>(dt))</span></code></pre></div>
</div>
<div id="scatterplot-1" class="section level2" number="40.2">
<h2><span class="header-section-number">40.2</span> Scatterplot</h2>
<p>Kõigepealt <code>ggplot</code>i peafunktsioon, kus märgime andmestiku (tegelikult võime seda teha ka <em>geom</em>’i sees). Seejärel lisame <em>geom</em>’i kihi. Liidame selle peafunktsioonile otsa (kasutatdes <code>+</code> märki). Tahame punktdiagrammi, seega <code>geom_point</code> (et saada aimu erinevatest võimalikest <em>geom</em>’idest, võib uurida ggplot’i kodulehte <a href="https://ggplot2.tidyverse.org/reference/" class="uri">https://ggplot2.tidyverse.org/reference/</a> või <em>cheatsheet</em>’i (Help &gt; Cheatsheets &gt; Data visualization with ggplot2)). Defineerime <code>aes</code><em>thetic</em>’u ehk siis <em>mapime</em> tunnused x ja y teljele.</p>
<div class="sourceCode" id="cb360"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb360-1"><a href="ggplot2.html#cb360-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>dt)<span class="sc">+</span></span>
<span id="cb360-2"><a href="ggplot2.html#cb360-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x=</span>sepal.width, <span class="at">y=</span>sepal.length))</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-125-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Tegelikult ei pea argumente välja kirjutama, vaid järjekord on tähtis. Saab ka nii:</p>
<div class="sourceCode" id="cb361"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb361-1"><a href="ggplot2.html#cb361-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dt)<span class="sc">+</span></span>
<span id="cb361-2"><a href="ggplot2.html#cb361-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(sepal.width, sepal.length))</span></code></pre></div>
<p>Tahame erinevad iirise liigid erinevate värvidega grupeerida. Kuna me tahame määrata seda, kuidas andmeid esitatakse (tunnuseid graafikule <em>mapitakse</em>), peame seda tegema <code>aes</code>’i argumendi sees.</p>
<div class="sourceCode" id="cb362"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb362-1"><a href="ggplot2.html#cb362-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>dt)<span class="sc">+</span></span>
<span id="cb362-2"><a href="ggplot2.html#cb362-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x=</span>sepal.width, <span class="at">y=</span>sepal.length, <span class="at">color=</span>species))</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-127-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Saaksime neid eristada ka näiteks kuju <code>shape=</code> või suuruse <code>size=</code> või ka läbipaistvuse <code>alpha=</code> järgi.</p>
<div class="sourceCode" id="cb363"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb363-1"><a href="ggplot2.html#cb363-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>dt)<span class="sc">+</span></span>
<span id="cb363-2"><a href="ggplot2.html#cb363-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x=</span>sepal.width, <span class="at">y=</span>sepal.length, <span class="at">shape=</span>species))</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-128-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Kui me tahame lihtsalt punktide värvi muuta (ja mitte lähtuda mingist grupeerivast tunnusest), saame seda teha väljaspool <code>aes()</code> argumenti.</p>
<div class="sourceCode" id="cb364"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb364-1"><a href="ggplot2.html#cb364-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>dt)<span class="sc">+</span></span>
<span id="cb364-2"><a href="ggplot2.html#cb364-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x=</span>sepal.width, <span class="at">y=</span>sepal.length), <span class="at">color=</span><span class="st">&quot;green&quot;</span>)</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-129-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Oleks vaja joonisele ka regressioonijooned saada. Selleks lisame lihtsalt järgmise kihi (kasutades <code>+</code> märki).<br />
Regressioonijoone joonistamiseks võime kasutada <code>geom_abline()</code>’i, aga sellisel juhul peame regressioonikoefitsiendid enne välja arvutama (<code>geam_abline()</code> vajab sisendiks <em>intercept</em>’i ning <em>slope</em>’i). Lihtsam on kasutada <code>geom_smooth()</code>’i.</p>
<div class="sourceCode" id="cb365"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb365-1"><a href="ggplot2.html#cb365-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>dt)<span class="sc">+</span></span>
<span id="cb365-2"><a href="ggplot2.html#cb365-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x=</span>sepal.width, <span class="at">y=</span>sepal.length, <span class="at">color=</span>species))<span class="sc">+</span></span>
<span id="cb365-3"><a href="ggplot2.html#cb365-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="fu">aes</span>(<span class="at">x=</span>sepal.width, <span class="at">y=</span>sepal.length))</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-130-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Mhh, joon ei meenuta regressioonijoont. Asi on selles, et tegemist on küll regressioonijoonega, kuid mitte harjumuspärase lineaarse regressioonijoonega. <code>geom_smooth</code> kasutab vaikimisi nn <em>Local Polynomial Regression Fitting</em>’ut, mis üritab <em>predictida</em> y väärtuse sõltuvust x’i väärtusest võimalikult täpselt ja lähtudes x’i lähiümbrusest. Aga saame tellida ka tavalise lineaarse regressioonijoone, kasutades argumenti <code>method="lm"</code>.</p>
<div class="sourceCode" id="cb367"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb367-1"><a href="ggplot2.html#cb367-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>dt)<span class="sc">+</span></span>
<span id="cb367-2"><a href="ggplot2.html#cb367-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x=</span>sepal.width, <span class="at">y=</span>sepal.length, <span class="at">color=</span>species))<span class="sc">+</span></span>
<span id="cb367-3"><a href="ggplot2.html#cb367-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="fu">aes</span>(<span class="at">x=</span>sepal.width, <span class="at">y=</span>sepal.length), <span class="at">method=</span><span class="st">&quot;lm&quot;</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-131-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Kõikide iirise liikide kohta eraldi joonte saamiseks tuleb jällegi määrata grupeerimine <code>geom_smooth()</code>’i <code>aes()</code>’i sees (kuna see on eraldi kiht ja eelmise kihi määrangud siin enam ei kehti). Kui me usaldusintervalle mingil põhjusel ei taha, võime need tühistada argumendiga <code>se=F</code>.</p>
<div class="sourceCode" id="cb369"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb369-1"><a href="ggplot2.html#cb369-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>dt)<span class="sc">+</span></span>
<span id="cb369-2"><a href="ggplot2.html#cb369-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x=</span>sepal.width, <span class="at">y=</span>sepal.length, <span class="at">color=</span>species))<span class="sc">+</span></span>
<span id="cb369-3"><a href="ggplot2.html#cb369-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="fu">aes</span>(<span class="at">x=</span>sepal.width, <span class="at">y=</span>sepal.length, <span class="at">color=</span>species), <span class="at">method=</span><span class="st">&quot;lm&quot;</span>, <span class="at">se=</span>F)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-132-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Pidime <code>aes()</code> argumendi määrangud kaks korda järjest välja kirjutama, kuigi nad on identsed. Ei tundu väga mõistlik. Õnneks saab ka lihtsamalt. Võime need määrata ka <code>ggplot()</code> funktsiooni enda sees. Sellisel juhul kehtivad nad ka kõikide järgenvate kihtide kohta (välja arvatud juhul kui järgenvates kihtides on teisiti määratud).</p>
<div class="sourceCode" id="cb371"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb371-1"><a href="ggplot2.html#cb371-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dt, <span class="fu">aes</span>(sepal.width, sepal.length, <span class="at">color=</span>species))<span class="sc">+</span></span>
<span id="cb371-2"><a href="ggplot2.html#cb371-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb371-3"><a href="ggplot2.html#cb371-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">&quot;lm&quot;</span>, <span class="at">se=</span>F)</span></code></pre></div>
</div>
<div id="facetid" class="section level2" number="40.3">
<h2><span class="header-section-number">40.3</span> Facetid</h2>
<p>Gruppe saab eristada ka neid erinevatele tahkudele pannes, kasutades selleks <code>facet_wrap()</code>’i või <code>facet_grid</code>’i. <code>facet_wrap()</code> eristab ühe tunnuse lõikes, <code>facet_grid()</code> mitme tunnuse lõikes. Mõlema puhul tuleb kasutada <em>formula</em> määrangut, st. tuleb kasutada ~ märki (tegelikult ggplot’i viimase versiooni puhul saame kasutada ka argumente <code>rows=</code> ja <code>cols=</code>).</p>
<div class="sourceCode" id="cb372"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb372-1"><a href="ggplot2.html#cb372-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dt, <span class="fu">aes</span>(sepal.width, sepal.length))<span class="sc">+</span></span>
<span id="cb372-2"><a href="ggplot2.html#cb372-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb372-3"><a href="ggplot2.html#cb372-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">&quot;lm&quot;</span>, <span class="at">se=</span>F)<span class="sc">+</span></span>
<span id="cb372-4"><a href="ggplot2.html#cb372-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>species)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-134-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Kui tahame tahkusid näiteks ainult kahes tulbas, saame kasutada argumenti <code>nrow=</code> või <code>ncol=</code>.</p>
<div class="sourceCode" id="cb374"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb374-1"><a href="ggplot2.html#cb374-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dt, <span class="fu">aes</span>(sepal.width, sepal.length))<span class="sc">+</span></span>
<span id="cb374-2"><a href="ggplot2.html#cb374-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb374-3"><a href="ggplot2.html#cb374-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">&quot;lm&quot;</span>, <span class="at">se=</span>F)<span class="sc">+</span></span>
<span id="cb374-4"><a href="ggplot2.html#cb374-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>species, <span class="at">ncol=</span><span class="dv">2</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-135-1.png" width="480" style="display: block; margin: auto;" /></p>
<p><code>facet_grid()</code>’i ja kahe tunnuse lõikes tahkude illustreerimiseks meil <em>iris</em>’e andmestikus piisavalt kategoriaalseid tunnuseid ei ole. Aga ggplotiga tuleb kaasa <code>diamonds</code> andmebaas. Vaatame seda:</p>
<div class="sourceCode" id="cb376"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb376-1"><a href="ggplot2.html#cb376-1" aria-hidden="true" tabindex="-1"></a>dt1 <span class="ot">&lt;-</span> diamonds</span>
<span id="cb376-2"><a href="ggplot2.html#cb376-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dt1)</span></code></pre></div>
<pre><code>## tibble [53,940 x 10] (S3: tbl_df/tbl/data.frame)
##  $ carat  : num [1:53940] 0.23 0.21 0.23 0.29 0.31 0.24 0.24 0.26 0.22 0.23 ...
##  $ cut    : Ord.factor w/ 5 levels &quot;Fair&quot;&lt;&quot;Good&quot;&lt;..: 5 4 2 4 2 3 3 3 1 3 ...
##  $ color  : Ord.factor w/ 7 levels &quot;D&quot;&lt;&quot;E&quot;&lt;&quot;F&quot;&lt;&quot;G&quot;&lt;..: 2 2 2 6 7 7 6 5 2 5 ...
##  $ clarity: Ord.factor w/ 8 levels &quot;I1&quot;&lt;&quot;SI2&quot;&lt;&quot;SI1&quot;&lt;..: 2 3 5 4 2 6 7 3 4 5 ...
##  $ depth  : num [1:53940] 61.5 59.8 56.9 62.4 63.3 62.8 62.3 61.9 65.1 59.4 ...
##  $ table  : num [1:53940] 55 61 65 58 58 57 57 55 61 61 ...
##  $ price  : int [1:53940] 326 326 327 334 335 336 336 337 337 338 ...
##  $ x      : num [1:53940] 3.95 3.89 4.05 4.2 4.34 3.94 3.95 4.07 3.87 4 ...
##  $ y      : num [1:53940] 3.98 3.84 4.07 4.23 4.35 3.96 3.98 4.11 3.78 4.05 ...
##  $ z      : num [1:53940] 2.43 2.31 2.31 2.63 2.75 2.48 2.47 2.53 2.49 2.39 ...</code></pre>
<p>Kuidas on seotud teemandite karaadid (<em>carat</em>) ja nende hind (<em>price</em>)?</p>
<div class="sourceCode" id="cb378"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb378-1"><a href="ggplot2.html#cb378-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dt1)<span class="sc">+</span></span>
<span id="cb378-2"><a href="ggplot2.html#cb378-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x=</span>carat, <span class="at">y=</span>price))</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-137-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Kuidas siia suhestub teemandite selgus (<em>clarity</em>)?</p>
<div class="sourceCode" id="cb379"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb379-1"><a href="ggplot2.html#cb379-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dt1)<span class="sc">+</span></span>
<span id="cb379-2"><a href="ggplot2.html#cb379-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x=</span>carat, <span class="at">y=</span>price, <span class="at">color=</span>clarity))</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-138-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Aga nende lõige <em>cut</em>? kasutame selleks <code>facet_grid()</code>’i. Kui tahame <code>facet_grid()</code>’iga ainult ühe tunnuse lõikes tahke tekitada, tuleb teise tunnuse asemel kasuatada punkti. Seda, kas tahud on tulbas või reas, saab määrata sellega, kuhupoole ~ märki punkt panna.</p>
<div class="sourceCode" id="cb380"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb380-1"><a href="ggplot2.html#cb380-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dt1)<span class="sc">+</span></span>
<span id="cb380-2"><a href="ggplot2.html#cb380-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x=</span>carat, <span class="at">y=</span>price, <span class="at">color=</span>clarity))<span class="sc">+</span></span>
<span id="cb380-3"><a href="ggplot2.html#cb380-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(cut <span class="sc">~</span> .)</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-139-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Lisame veel phe tunnuse, mille lõikes teemantide erisusi vaadata, värvi (<em>color</em>).</p>
<div class="sourceCode" id="cb381"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb381-1"><a href="ggplot2.html#cb381-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dt1)<span class="sc">+</span></span>
<span id="cb381-2"><a href="ggplot2.html#cb381-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x=</span>carat, <span class="at">y=</span>price, <span class="at">color=</span>clarity))<span class="sc">+</span></span>
<span id="cb381-3"><a href="ggplot2.html#cb381-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(cut <span class="sc">~</span> color)</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-140-1.png" width="2400" style="display: block; margin: auto;" /></p>
</div>
<div id="geomid-ja-aestetikud" class="section level2" number="40.4">
<h2><span class="header-section-number">40.4</span> Geomid ja aestetikud</h2>
<p>Erinevaid <code>geom</code>’e on päris palju. Kõik nad on üles loetletud ggplot’i kodulehel (koos suure hulga muu infoga): <a href="https://ggplot2.tidyverse.org/reference/" class="uri">https://ggplot2.tidyverse.org/reference/</a>. Aga mõned olulisemad:</p>
<ul>
<li><code>geom_bar()</code></li>
<li><code>geom_histogram()</code> ja <code>geom_freqpoly()</code></li>
<li><code>geom_boxplot()</code> ja <code>geom_violin()</code></li>
<li><code>geom_line()</code> ja <code>geom_path()</code></li>
<li><code>geom_density()</code></li>
<li><code>geom_abline()</code>, <code>geom_hline()</code> ja <code>geom_vline()</code></li>
<li><code>geom_text()</code></li>
</ul>
</div>
<div id="barplot-1" class="section level2" number="40.5">
<h2><span class="header-section-number">40.5</span> Barplot</h2>
<p>Tavaline <em>barplot</em></p>
<div class="sourceCode" id="cb382"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb382-1"><a href="ggplot2.html#cb382-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dt1)<span class="sc">+</span></span>
<span id="cb382-2"><a href="ggplot2.html#cb382-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(clarity))</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-141-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Kahe tunnuse lõikes tulpdiagrammi jaoks peame kasutama <code>aes()</code> sees argumenti <code>fill=</code>.</p>
<div class="sourceCode" id="cb383"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb383-1"><a href="ggplot2.html#cb383-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dt1)<span class="sc">+</span></span>
<span id="cb383-2"><a href="ggplot2.html#cb383-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(clarity, <span class="at">fill=</span>cut))</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-142-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Mhh, see vist ei ole päris see mida me silmas pidasime. Pigem tahaksime, et gruppide tulbad asuksid kõrvuti. Selleks peame määratlema geomi positsiooni:</p>
<div class="sourceCode" id="cb384"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb384-1"><a href="ggplot2.html#cb384-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dt1)<span class="sc">+</span></span>
<span id="cb384-2"><a href="ggplot2.html#cb384-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(clarity, <span class="at">fill=</span>cut), <span class="at">position=</span><span class="st">&quot;dodge&quot;</span>)</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-143-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Või siis kui tahame 100% barplot</p>
<div class="sourceCode" id="cb385"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb385-1"><a href="ggplot2.html#cb385-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dt1)<span class="sc">+</span></span>
<span id="cb385-2"><a href="ggplot2.html#cb385-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(clarity, <span class="at">fill=</span>cut), <span class="at">position =</span> <span class="st">&quot;fill&quot;</span>)</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-144-1.png" width="480" style="display: block; margin: auto;" /></p>
</div>
<div id="boxplot-ja-violin-plot" class="section level2" number="40.6">
<h2><span class="header-section-number">40.6</span> Boxplot ja violin plot</h2>
<div class="sourceCode" id="cb386"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb386-1"><a href="ggplot2.html#cb386-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dt1)<span class="sc">+</span></span>
<span id="cb386-2"><a href="ggplot2.html#cb386-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>color, <span class="at">y=</span>carat))</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-145-1.png" width="480" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb387"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb387-1"><a href="ggplot2.html#cb387-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dt1)<span class="sc">+</span></span>
<span id="cb387-2"><a href="ggplot2.html#cb387-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="fu">aes</span>(<span class="at">x=</span>color, <span class="at">y=</span>carat))</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-146-1.png" width="480" style="display: block; margin: auto;" /></p>
</div>
<div id="histogram-ja-frequency-polygon" class="section level2" number="40.7">
<h2><span class="header-section-number">40.7</span> Histogram ja frequency polygon</h2>
<div class="sourceCode" id="cb388"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb388-1"><a href="ggplot2.html#cb388-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dt1)<span class="sc">+</span></span>
<span id="cb388-2"><a href="ggplot2.html#cb388-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x=</span>carat), <span class="at">bins =</span> <span class="dv">50</span>, <span class="at">color=</span><span class="st">&quot;white&quot;</span>)</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-147-1.png" width="480" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb389"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb389-1"><a href="ggplot2.html#cb389-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dt1)<span class="sc">+</span></span>
<span id="cb389-2"><a href="ggplot2.html#cb389-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_freqpoly</span>(<span class="fu">aes</span>(<span class="at">x=</span>carat))</span></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-148-1.png" width="480" style="display: block; margin: auto;" /></p>
</div>
<div id="keskmised-ja-usalduspiirid" class="section level2" number="40.8">
<h2><span class="header-section-number">40.8</span> Keskmised ja usalduspiirid</h2>
<p>Väga tihti on meil vaja esitada keskmiste või proportsioonide punkthinnanguid mingite gruppide lõikes koos usaldusintervallidega. Selleks on meil kõigepealt vaja keskmisi ja usaldusintervalle. ggplot neid ise ei arvuta. Aga <em>dplyr</em>’i abil saab need võrdlemisi lihtsalt kätte. t-jaotuse kvartiilid on leitavad <code>qt(p, df)</code> funktsiooniga (p on siis tõenäosus).<br />
Leiame teemantite keskmised hinnad koos usalduspiiridega teemadite lõiketi (<em>cut</em>):</p>
<div class="sourceCode" id="cb391"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb391-1"><a href="ggplot2.html#cb391-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb391-2"><a href="ggplot2.html#cb391-2" aria-hidden="true" tabindex="-1"></a>keskmised <span class="ot">&lt;-</span> dt1 <span class="sc">%&gt;%</span></span>
<span id="cb391-3"><a href="ggplot2.html#cb391-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(cut)<span class="sc">%&gt;%</span></span>
<span id="cb391-4"><a href="ggplot2.html#cb391-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">keskmine=</span><span class="fu">mean</span>(price),</span>
<span id="cb391-5"><a href="ggplot2.html#cb391-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">se=</span><span class="fu">sd</span>(price)<span class="sc">/</span><span class="fu">sqrt</span>(<span class="fu">length</span>(price)),</span>
<span id="cb391-6"><a href="ggplot2.html#cb391-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">l.ci=</span>keskmine<span class="sc">-</span><span class="fu">qt</span>(<span class="fl">0.975</span>, <span class="fu">length</span>(price)<span class="sc">-</span><span class="dv">1</span>)<span class="sc">*</span>se,</span>
<span id="cb391-7"><a href="ggplot2.html#cb391-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">u.ci=</span>keskmine<span class="sc">+</span><span class="fu">qt</span>(<span class="fl">0.975</span>, <span class="fu">length</span>(price)<span class="sc">-</span><span class="dv">1</span>)<span class="sc">*</span>se)</span>
<span id="cb391-8"><a href="ggplot2.html#cb391-8" aria-hidden="true" tabindex="-1"></a>keskmised</span></code></pre></div>
<pre><code>## # A tibble: 5 x 5
##   cut       keskmine    se  l.ci  u.ci
##   &lt;ord&gt;        &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 Fair         4359.  88.7 4185. 4533.
## 2 Good         3929.  52.6 3826. 4032.
## 3 Very Good    3982.  35.8 3912. 4052.
## 4 Premium      4584.  37.0 4512. 4657.
## 5 Ideal        3458.  25.9 3407. 3508.</code></pre>
<p>Kasutame <code>geom_point()</code>’i keskmiste visualiseerimiseks ja <code>geom_linerange()</code>’i usalduspiiride märkimiseks</p>
<div class="sourceCode" id="cb393"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb393-1"><a href="ggplot2.html#cb393-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(keskmised, <span class="fu">aes</span>(cut, keskmine))<span class="sc">+</span></span>
<span id="cb393-2"><a href="ggplot2.html#cb393-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb393-3"><a href="ggplot2.html#cb393-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_linerange</span>(<span class="fu">aes</span>(<span class="at">ymin=</span>l.ci, <span class="at">ymax=</span>u.ci))<span class="sc">+</span></span>
<span id="cb393-4"><a href="ggplot2.html#cb393-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="co"># saame joonise teljed ära vahetada</span></span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-150-1.png" width="480" style="display: block; margin: auto;" /></p>
</div>
<div id="joonise-disain" class="section level2" number="40.9">
<h2><span class="header-section-number">40.9</span> Joonise disain</h2>
<p>ggplot võimaldab kontrollida praktiliselt kogu joonise väljanägemist. Vaatame mõnda olulisemat võimalust: telgede nimed ja joonise pealkiri</p>
<div class="sourceCode" id="cb394"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb394-1"><a href="ggplot2.html#cb394-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(keskmised, <span class="fu">aes</span>(cut, keskmine))<span class="sc">+</span></span>
<span id="cb394-2"><a href="ggplot2.html#cb394-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb394-3"><a href="ggplot2.html#cb394-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_linerange</span>(<span class="fu">aes</span>(<span class="at">ymin=</span>l.ci, <span class="at">ymax=</span>u.ci))<span class="sc">+</span></span>
<span id="cb394-4"><a href="ggplot2.html#cb394-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb394-5"><a href="ggplot2.html#cb394-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Hind&quot;</span>)<span class="sc">+</span></span>
<span id="cb394-6"><a href="ggplot2.html#cb394-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Lõige&quot;</span>)<span class="sc">+</span></span>
<span id="cb394-7"><a href="ggplot2.html#cb394-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Teemantite hind&quot;</span>)</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-151-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Kui me tahame telgede nimedest lahti saada:</p>
<div class="sourceCode" id="cb395"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb395-1"><a href="ggplot2.html#cb395-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(keskmised, <span class="fu">aes</span>(cut, keskmine))<span class="sc">+</span></span>
<span id="cb395-2"><a href="ggplot2.html#cb395-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb395-3"><a href="ggplot2.html#cb395-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_linerange</span>(<span class="fu">aes</span>(<span class="at">ymin=</span>l.ci, <span class="at">ymax=</span>u.ci))<span class="sc">+</span></span>
<span id="cb395-4"><a href="ggplot2.html#cb395-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb395-5"><a href="ggplot2.html#cb395-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="cn">NULL</span>)<span class="sc">+</span></span>
<span id="cb395-6"><a href="ggplot2.html#cb395-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="cn">NULL</span>)</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-152-1.png" width="480" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb396"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb396-1"><a href="ggplot2.html#cb396-1" aria-hidden="true" tabindex="-1"></a><span class="co"># või ka nii:</span></span>
<span id="cb396-2"><a href="ggplot2.html#cb396-2" aria-hidden="true" tabindex="-1"></a><span class="co"># ggplot(keskmised, aes(cut, keskmine))+</span></span>
<span id="cb396-3"><a href="ggplot2.html#cb396-3" aria-hidden="true" tabindex="-1"></a><span class="co">#   geom_point()+</span></span>
<span id="cb396-4"><a href="ggplot2.html#cb396-4" aria-hidden="true" tabindex="-1"></a><span class="co">#   geom_linerange(aes(ymin=l.ci, ymax=u.ci))+</span></span>
<span id="cb396-5"><a href="ggplot2.html#cb396-5" aria-hidden="true" tabindex="-1"></a><span class="co">#   coord_flip()+</span></span>
<span id="cb396-6"><a href="ggplot2.html#cb396-6" aria-hidden="true" tabindex="-1"></a><span class="co">#   labs(x = NULL, y = NULL)</span></span></code></pre></div>
<p><code>xlab</code> ja <code>ylab</code> on tegelikult mugavdatud variandid <code>scale</code> funktsioonidest. <code>scale</code> funktsioonid kontrollivad seda kuidas andmed mappitakse <code>aes()</code>’i. Võetakse andmed ja teakse neist midagi joonisel nähtavat. Igal <em>aestheticul</em> on oma <code>scale</code>:<br />
- Kui x telg on pidev: <code>scale_x_continuous</code>
- Kui y telg on kategoriaalne: <code>scale_y_discrete</code>
- Kui kasutame <code>fill</code> <code>aes</code>’i: <code>scale_fill_discrete</code></p>
<div class="sourceCode" id="cb397"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb397-1"><a href="ggplot2.html#cb397-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(keskmised, <span class="fu">aes</span>(cut, keskmine))<span class="sc">+</span></span>
<span id="cb397-2"><a href="ggplot2.html#cb397-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb397-3"><a href="ggplot2.html#cb397-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_linerange</span>(<span class="fu">aes</span>(<span class="at">ymin=</span>l.ci, <span class="at">ymax=</span>u.ci))<span class="sc">+</span></span>
<span id="cb397-4"><a href="ggplot2.html#cb397-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb397-5"><a href="ggplot2.html#cb397-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">name=</span><span class="st">&quot;Lõige&quot;</span>)<span class="sc">+</span></span>
<span id="cb397-6"><a href="ggplot2.html#cb397-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name=</span><span class="st">&quot;Hind&quot;</span>)</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-153-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Saame kontrollida ka <em>tick mark</em>’e ja <em>label</em>’eid</p>
<div class="sourceCode" id="cb398"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb398-1"><a href="ggplot2.html#cb398-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(keskmised, <span class="fu">aes</span>(cut, keskmine))<span class="sc">+</span></span>
<span id="cb398-2"><a href="ggplot2.html#cb398-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb398-3"><a href="ggplot2.html#cb398-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_linerange</span>(<span class="fu">aes</span>(<span class="at">ymin=</span>l.ci, <span class="at">ymax=</span>u.ci))<span class="sc">+</span></span>
<span id="cb398-4"><a href="ggplot2.html#cb398-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()<span class="sc">+</span></span>
<span id="cb398-5"><a href="ggplot2.html#cb398-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">name=</span><span class="st">&quot;Lõige&quot;</span>, <span class="at">labels=</span><span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>))<span class="sc">+</span></span>
<span id="cb398-6"><a href="ggplot2.html#cb398-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name=</span><span class="st">&quot;Hind&quot;</span>, <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">3000</span>,<span class="dv">5000</span>, <span class="at">by=</span><span class="dv">100</span>))</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-154-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Kõige võimsam joonise visuaali tööriist, millega saab kontrollida pea kõike, on <code>theme()</code>. Täpsemalt saab selle kohta lugeda <a href="https://ggplot2.tidyverse.org/reference/theme.html" class="uri">https://ggplot2.tidyverse.org/reference/theme.html</a>. Vaatame näiteks, kuidas <code>theme()</code> abil muula legendi asukohta ning kustutada x-telje skaala:</p>
<div class="sourceCode" id="cb399"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb399-1"><a href="ggplot2.html#cb399-1" aria-hidden="true" tabindex="-1"></a>dt <span class="ot">&lt;-</span> iris</span>
<span id="cb399-2"><a href="ggplot2.html#cb399-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(dt) <span class="ot">&lt;-</span> <span class="fu">tolower</span>(<span class="fu">names</span>(dt))</span>
<span id="cb399-3"><a href="ggplot2.html#cb399-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dt, <span class="fu">aes</span>(sepal.width, sepal.length, <span class="at">color=</span>species))<span class="sc">+</span></span>
<span id="cb399-4"><a href="ggplot2.html#cb399-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb399-5"><a href="ggplot2.html#cb399-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;bottom&quot;</span>,</span>
<span id="cb399-6"><a href="ggplot2.html#cb399-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_blank</span>())</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-155-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Saame üksikasjalikult muuta praktiliselt kogu joonise väljanägemist. Saame kasutada ka juba mõningaid valmistehtud <code>theme()</code>’ide <em>template</em>’e. Näiteks <code>theme_bw()</code>.</p>
<div class="sourceCode" id="cb400"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb400-1"><a href="ggplot2.html#cb400-1" aria-hidden="true" tabindex="-1"></a>dt <span class="ot">&lt;-</span> iris</span>
<span id="cb400-2"><a href="ggplot2.html#cb400-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(dt) <span class="ot">&lt;-</span> <span class="fu">tolower</span>(<span class="fu">names</span>(dt))</span>
<span id="cb400-3"><a href="ggplot2.html#cb400-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dt, <span class="fu">aes</span>(sepal.width, sepal.length, <span class="at">color=</span>species))<span class="sc">+</span></span>
<span id="cb400-4"><a href="ggplot2.html#cb400-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb400-5"><a href="ggplot2.html#cb400-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code></pre></div>
<p><img src="00-sissejuhatus-ri_files/figure-html/unnamed-chunk-156-1.png" width="480" style="display: block; margin: auto;" /></p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="ri-baasgraafikud.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="lugemiseks.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
